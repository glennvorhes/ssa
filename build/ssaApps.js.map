{"version":3,"sources":["webpack:///ssaApps.js","webpack:///webpack/bootstrap a021472f691137e5e80e","webpack:///../../src/util/provide.ts","webpack:///external \"$\"","webpack:///external \"ol\"","webpack:///../../src/olHelpers/mapPopup.ts","webpack:///../../src/util/makeGuid.ts","webpack:///../../src/olHelpers/projections.ts","webpack:///./src/ajaxGetters.ts","webpack:///./src/layerStyles.ts","webpack:///../../src/layers/LayerBaseVectorGeoJson.ts","webpack:///../../src/olHelpers/extentUtil.ts","webpack:///./src/constants.ts","webpack:///./src/popup.ts","webpack:///../../src/domUtil/SelectBoxBase.ts","webpack:///../../src/olHelpers/SortedFeatures.ts","webpack:///./src/corridor/Corridor.ts","webpack:///./src/filters/FilterBase.ts","webpack:///../../src/layers/LayerBase.ts","webpack:///../../src/olHelpers/mapInteractionBase.ts","webpack:///../../src/olHelpers/mapMove.ts","webpack:///../../src/olHelpers/quickMap.ts","webpack:///../../src/util/checkDefined.ts","webpack:///../../src/util/objectHelpers.ts","webpack:///./src/app/SsaMapBase.ts","webpack:///./src/corridor/CorridorConfig.ts","webpack:///./src/filters/filterContollingCriteria.ts","webpack:///./src/filters/filterCrash.ts","webpack:///./src/filters/filterMmFlag.ts","webpack:///./src/app/SsaMapCreate.ts","webpack:///./src/app/SsaMapView.ts","webpack:///../../src/layers/LayerBaseVector.ts","webpack:///../../src/layers/LayerEsriMapServer.ts","webpack:///../../src/olHelpers/esriToOlStyle.ts","webpack:///../../src/olHelpers/geocode.ts","webpack:///../../src/olHelpers/mapMoveCls.ts","webpack:///../../src/olHelpers/mapPopupCls.ts","webpack:///../../src/olHelpers/mapToBase64.ts","webpack:///../../src/olHelpers/quickMapBase.ts","webpack:///../../src/olHelpers/zoomResolutionConvert.ts","webpack:///../../src/util/colors.ts","webpack:///./src/collections/CorridorCollection.ts","webpack:///./src/collections/Deficiency.ts","webpack:///./src/collections/PickerCollection.ts","webpack:///./src/collections/_DeficiencyBase.ts","webpack:///./src/collections/crashData.ts","webpack:///./src/countyLookup.ts","webpack:///./src/selectBox/SegmentPicker.ts","webpack:///./src/selectBox/SelectCounty.ts","webpack:///./src/selectBox/SelectHighway.ts","webpack:///./src/app/ssaApps.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","provide","namespace","window","gv","parts","split","nameSpace","length","util","default","$","ol","mapPopupCls_1","mapPopup","makeGuid","replace","r","Math","random","toString","provide_1","nm","proj4326","proj","Projection","code","proj3857","proj3070","_ajaxInner","url","params","callback","fail","msg","JSON","stringify","console","warn","_ajaxHelper","calbackHelper","toFixed","home","val","location","port","getStartCountiesUrl","getHighwaysUrl","getEndCountiesUrl","getSegmentsUrl","getCorridorUrl","getCrashesUrl","getAllCountiesUrl","getAllHighwaysForStartEndCountyUrl","getCcGeomUrl","_countySort","sort","a","b","AjaxGetters","getStartCounties","getHighways","startCountyId","getEndCounties","highwayName","getSegments","county","routeId","routeIdNum","parseInt","routeid","$mm","getCorridor","startPdp","endPdp","from","to","getCrashes","ssaId","snapshot","getAllCounties","getHwyByStartEndCounty","endCountyId","getCcGeom","txtFunc","style","Text","text","pdpId","scale","stroke","Stroke","color","width","fill","Fill","randomColor","returnedColors","colorOptions","floor","indexOf","push","layerConfigHelper","visible","minZoom","transform","dataProjection","projections_1","featureProjection","Style","deficiencyStyle","feature","props","getProperties","returnStyles","showCc","_i","_a","filterContollingCriteria_1","allValues","cc","valIsOn","controllingCriteriaColor","rateOrKab","rateFlag","filterMmFlag_1","mmRateFlagOn","kabCrshFlag","mmKabFlagOn","onlyRate","onlyKab","rateAndKab","mmRateFlagColor","mmKabFlagColor","mmBothColor","filterCrash_1","colorUtil","constants","segmentLayer","fromSelectionColor","toSelectionColor","corridorPreviewColor","segNodeStyle","image","RegularShape","radius","points","crashPointStyle","crashColor","getCrashColor","crashColorFill","rgbToRgba","Circle","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","__","constructor","create","LayerBaseVector_1","LayerBaseVectorGeoJson","_super","options","_this","_geoJsonFormat","format","GeoJSON","_transform","autoLoad","_load","addFeatures","featureCollection","source","readFeatures","_url","_params","loadCallback","_loaded","mapMoveCallback","_source","LayerBaseVector","calculateExtent","layers","hasExtent","minX","minY","maxX","maxY","layers_1","lyr","olLayer","getSource","getFeatures","ext","getExtent","fitToMap","mp","zoomOut","getView","fit","getSize","setZoom","getZoom","mmFlagListId","ccListId","pdpDataAttr","mmFlagColor","defListId","defColor","propNames","propValues","controllingCriteriaProps","injColor","inj","K","A","B","C","P","processVal","v","crashReportDownload","docNum","crashReportURl","crashInfoHelper","crashData","dteA","Date","getTime","dteB","returnHtml","crashSummary","crashData_1","injSvr","showCrashReport","doctnmbr","accDate","mnrColl","crashType","tableContent","_b","k","$showCrashReport","crashReportVal","toLowerCase","trim","mmPopupContent","crashProps","crashPointPopup","makeGuid_1","SelectBoxBase","parent","labelContent","contentGen","guidTop","guid","htmlString","append","_$container","find","$label","_changeListeners","_box","change","changed","f","addChangeListener","func","theVal","box","isNaN","parseFloat","set","SortedFeatures","features","propertyName","sortedFeatures","_propertyType","__this_1","aMinusB","propA","propB","getFeature","propertyValue","exactMatch","lowProp","highProp","midIndex","midFeature","midProperty","slice","escapeHtml","string","String","&","<",">","\"","'","/","corridorName","fromRp","toRp","substring","LayerBaseVectorGeoJson_1","layerStyles_1","ajaxGetters_1","SortedFeatures_1","layerStyles","Corridor","pdpFrom","pdpTo","rpFrom","rpTo","countyStart","countyEnd","highway","snapshotVersion","corridorId","undefined","cancelLoad","clientId","_color","databaseId","_valid","_error","corName","idx","_corridorLayer","nodeLayer","zIndex","jsonFeatures","buildNodes","load","loadedCallback","setDbValues","corConfig","clear","coords","getGeometry","startPoint","geom","Point","endPoint","addFeature","Feature","clone","updateCorridor","corridor","layer","outString","getDataHtml","getDataHtmlDisp","returnString","vis","FilterBase","topCheckId","otherChecksClass","defaultOn","_topCheck","_subChecks","_changeCallbacks","_onValues","_allValues","each","ix","el","prop","_setAllOnOff","__this","$el","isChecked","splice","_fireCallbacks","addChangeCallback","isOn","fire","outArray","zoomResolutionConvert","LayerBase","_legendCollapse","legendCollapse","_legendCheckbox","legendCheckbox","id","_name","animate","_opacity","opacity","_visible","_olLayer","_maxResolution","zoomToResolution","_minResolution","maxZoom","_minZoom","_maxZoom","_zIndex","_legendContent","_$legendDiv","_applyCollapseCalled","_addLegendContent","legendContent","loaded","getLegendDiv","additionalContent","applyCollapse","addLegendContent","log","$expander","click","$this","siblings","slideToggle","hasClass","removeClass","html","addClass","trigger","refresh","_id","newId","_animate","newVal","newParams","visibility","setVisible","setOpacity","newName","newZ","setZIndex","getOlLayer","MapInteractionBase","subtype","_map","_initialized","_subtype","init","theMap","_checkInit","initialized","alert","checkInit","mapMoveCls_1","mapMove","quickMap","quickMapBase_1","quickMapBase","mapMove_1","mapPopup_1","undefinedOrNull","input","definedAndNotNull","keyValPairs","obj","keys","key","SsaMapBase","divId","$mainContainer","_mapId","mainMapMove","mainMapPopup","mapId","labelValueHelper","label","outHtml","countyLookup_1","CorridorConfig","inputElement","startCounty","endCounty","hgwy","startRp","endRp","bootstrapHtml","index","getCountyById","FilterBase_1","FilterControllingCriteria","kColor","aColor","bColor","cColor","oColor","FilterCrash","FilterMmFlag","SsaMapBase_1","quickMap_1","PickerCollection_1","CorridorCollection_1","SsaMapCreate","corridorDataContainer","dataClass","prepend","mainMap","zoom","fullScreen","addGeocode","$sideBar","afterChange","_afterChange","pickerCollection","corridorsGuid","corridorCollection","loadExistingCorridors","$innerContainer","attr","cor","getCorridorById","extent","removeCorridor","$createCorridorButton","startPicker","closest","CorridorConfig_1","Corridor_1","calcExtent","mapToBase64_1","Deficiency_1","popup_1","mmPopupContentWithCrash","getCrashSummary","SsaMapView","infoAnchorId","_ssaId","_snap","getMapLinkId","mapImageName","linkHtml","summaryListHtml","$mapDiv","$legendDiv","$closeButton","$openButton","$zoomExtent","hide","hideShowWorking","originalWidth","originalMinHeight","css","originalPadding","fadeOut","show","fadeIn","_fitExtent","getTargetElement","corridorConfigs","_corridorArray","createdCorridorsLength","loadedCorridorsLength","returnLookup","returnArr","corId","crs","type","conf","addCorridor","addLayer","addVectorPopup","_afterCorridorLoad","after","getMapData","delay","mapToBase64","afterLoad","lyrs","LayerBase_1","_style","_autoLoad","_onDemand","onDemand","_onDemandDelay","onDemandDelay","mapMoveObj","_mapMove","_mapMoveMakeGetParams","mapMoveMakeGetParams","_mapMoveParams","addVectorLayer","Vector","minResolution","maxResolution","renderOrder","_projectionMap","_projection4326","mapMoveBefore","evtType","zoomLevel","extend","setStyle","mapProj","getCode","map","getProjection","triggerLyrLoad","makeServiceUrl","folder","service","localCacheUrl","loc","href","esriToOl","LayerEsriMapServer","TileArcGISRest","showLayers","join","_showLayers","Tile","addPopup","_esriFormat","EsriJSON","_popupRequest","getLegend","addMapServicePopup","urlCopy","newHtml","makeMapServiceLegend","getPopupInfo","queryParams","abort","popupHtml","attrVal","addMapServicePopupContent","readFeature","always","_colorArrayToRgba","colorArray","htmlEscape","str","makeFeatureServiceLegendAndSymbol","esriResponse","renderer","drawingInfo","symbolLegendOut","geometryType","SingleSymbol","PointSymbol","LineSymbol","PolygonSymbol","UniqueValueSymbol","legend","olStyle","legendHtml","mapServiceLegendItem","lyrObject","skipLayerNameAndExpander","layerName","legendItems","newLegendHtml","CommonSymbol","symbolObj","innerColor","outerColor","outline","outlineWidth","size","Icon","src","lineWidth","SymbolGenerator","SymbolClass","symbol","uniqueValueInfos","field1","defaultSymbol","defaultStyle","defaultLabelHtml","valueArray","labelArray","legendArray","propertyStyleLookup","uniqueVal","uniqueSym","checkProperties","checkProperty","_c","h","invalidClass","geocoderLoadingClass","Geocode","mapDiv","inputGuid","buttonGuid","indicationLayer","theButton","document","getElementById","theInput","reset","$theButton","$theInput","evt","preventDefault","disabled","lat","lon","title","feat","setCenter","getCoordinates","keyup","keyCode","mapInteractionBase_1","checkDefined","MapMoveCls","_arrLyrRequest","_arrLyrTimeout","_arrLayer","_lookupLayer","_mapMoveCallbacks","_mapMoveCallbacksLookup","_mapMoveCallbackDelays","_mapMoveCallbackContext","_mapMoveCallbackTimeout","_mapExtent","_zoomLevel","on","e","_updateMapExtent","triggerMoveCallback","theView","extentArray","eventType","clearTimeout","callbackFunc","innerFunction","theLayer","theIndex","_innerThis","mapMoveParams","jqXHR","statusText","setTimeout","ind","functionId","ctx","theFunc","triggerOnAdd","addCallback","context","FeatureLayerProperties","layerIndex","selectionLayer","esriLayerName","popupContent","MapPopupCls","_arrPopupLayerIds","_arrPopupLayerNames","_arrPopupLayers","_arrPopupOlLayers","_arrPopupContentFunction","_$popupContainer","_$popupContent","_$popupCloser","_popupOverlay","_selectionLayers","_selectionLayerLookup","_mapClickFunctions","_popupChangedFunctions","_esriMapServiceLayers","_popupOpen","_popupCoordinate","_passThroughLayerFeatureArray","_currentPopupIndex","_popupContentLength","$map","target","getTarget","_ease","easing","inAndOut","Overlay","element","autoPan","autoPanAnimation","duration","getCenter","addOverlay","closePopup","geometry","sr","mapExtent","imageDisplay","returnGeometry","tolerance","layerFeatureObjectArray","_featuresAtPixel","featObj","popupContentResponse","_triggerFeatSelect","nextPopup","setPosition","scrollTop","pixel","getEventPixel","hit","hasFeatureAtPixel","lyrCandidate","cursor","$currentPopupItemNumber","$innerPopup","$layerNameSpan","clearSelection","lyrFeatObj","esriName","featLayerObject","forEachFeatureAtPixel","lyrIndex","blur","addPopupChangedFunction","chgFunction","_addPopupLayer","selectionStyle","theStyle","popupContentFunction","removeVectorPopup","addMapClickFunction","resize","mapTarget","originalHeight","height","originalPosition","position","originalCenter","originalZoom","updateSize","once","extentUtil_1","event","canvas","toDataURL","ex","renderSync","center","x","y","baseSwitcher","osmLayer","OSM","coordinates","controls","control","defaults","attributionOptions","collapsible","view","View","Map","addControl","FullScreen","geocode_1","_zoomResLookup","resolutionToZoom","resolution","_hex","hexDigits","rgb2hex","rgb","rgb1","match","toUpperCase","hexAlphaToRgbOrRgba","hexString","alphaVal","charAt","g","alpha","pieces","makeBlueGreenRedGradient","minVal","maxVal","flipColors","ratio","chk","percent","makeBlueGreenRedGradientZScore","median","stdDev","grd","zScore","rowHtml","CorridorCollection","parentDiv","corridorDataIdOrClass","_dataClass","_corridorDataContainer","$corridorDataContainer","$containerEl","innerHtml","_inCreateModifyOperation","_showPopups","_coridorLookup","_popupStyle","showPopups","addCorridorCreate","refreshData","refreshHtmlCreate","confirm","removeLayer","rowContent","tableHtmlCreate","viz","isInCreateModifyOperation","inCreateModifyOperation","loadedCount","existingCorridors","getElementsByClassName","corridorCount","fullExtent","_DeficiencyBase_1","objectHelpers_1","styles","Deficiency","metaList","deficiencyList","deficiencyLayer","rates","rates_1","ccs","newCc","subEls","subEls_1","_d","ccs_1","feats","feats_1","triggerRateFlag","triggerKabFlag","f_1","appendHtml","defs","_summaryListItems","liText","SelectCounty_1","SelectHighway_1","SegmentPicker_1","lyrStyles","LayerEsriMapServer_1","PickerCollection","$zoomExtentButton","pickerGuid","_dummyCorridor","_addModifyEnabled","_modifyCorridor","$btnPickerAdd","$btnPickerModify","$btnPickerCancel","countyStartSelect","countyEndSelect","highwaySelect","_metamanagerSegmentsLayer","segmentPickerFrom","segmentPickerTo","_addHandlers","_helpDialogInit","stopPicker","previewCorridor","modifyCorridor","setStartEndCounty","selectedValue","addModifyButtonEnabled","startEndCountySame","hwy","setCountyAndRoute","helpInfo","helpDialog","dialog","modal","autoOpen","buttons","selectedPdpId","selectedText","newCorridor","existingCor","layersVisible","$primCounty","$primRoute","primaryCounty","primaryRouteId","isEnabled","isSame","DeficiencyBase","layerStyle","z","summaryListId","_sortedFeatures","_summaryListId","$summaryList","getFeatureById","theFeature","objHelp","popup_2","CrashData","_crashHtmlLookup","_crashArrayLookup","pointCrashes","sevOrder","sevA","sevB","sevAInd","sevBInd","_processCrashData","itm","_crashes","crashes","addedCrashDocNumbers","_crashes_1","crashes_1","setProperties","$crashesLoadMsg","pdp","countyId","countyLookup","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","73","SelectBoxBase_1","SegmentPicker","pickerColl","isFrom","_isFrom","_pickerColl","_selectedPdpId","_segmentLayer","_segNodeLayer","_segmentSelectionLayer","_selectBtnClass","_selectBtnClassTo","selectButton","_enabled","_layersVisible","stopPropagation","selectedFeature","_processAjaxResult","arr","arr_1","rteId","enabled","_setExtent","lyrsVisible","SelectCounty","d_1","SelectStartCounty","SelectHighway","startId","endId","forceTrigger","aName","bName","SsaMapCreate_1","SsaMapView_1","glob","glob_1"],"mappings":"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","file":"ssaApps.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 48);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace) {\r\n    \"use strict\";\r\n    if (typeof window.gv == 'undefined') {\r\n        window.gv = {};\r\n    }\r\n    var parts = namespace.split('.');\r\n    var nameSpace = window.gv;\r\n    for (var i = 0; i < parts.length; i++) {\r\n        var newObject = nameSpace[parts[i]];\r\n        if (typeof newObject == 'undefined') {\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n    return nameSpace;\r\n}\r\nprovide('util');\r\nwindow.gv.util.provide = provide;\r\nexports.default = provide;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = $;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = ol;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapPopupCls_1 = __webpack_require__(34);\r\n/**\r\n * The single popup object catch is that it is common to multimap pages\r\n * @type {MapPopupCls}\r\n */\r\nexports.mapPopup = new mapPopupCls_1.default();\r\nexports.default = exports.mapPopup;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util');\r\n/**\r\n * guids are used to uniquely identify groups and features\r\n * @returns {string} a new guid\r\n */\r\nfunction makeGuid() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n        .replace(/[xy]/g, function (c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\nexports.makeGuid = makeGuid;\r\nnm.makeGuid = makeGuid;\r\nexports.default = makeGuid;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 10/3/2016.\r\n */\r\nvar ol = __webpack_require__(2);\r\nexports.proj4326 = new ol.proj.Projection({ code: 'EPSG:4326' });\r\nexports.proj3857 = new ol.proj.Projection({ code: 'EPSG:3857' });\r\nexports.proj3070 = new ol.proj.Projection({ code: 'EPSG:3070' });\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/12/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar $ = __webpack_require__(1);\r\nvar home = $('#site-root').val();\r\nif (window.location.port == '5001') {\r\n    home = 'http://localhost:5004/';\r\n}\r\nvar getStartCountiesUrl = home + 'getStartCounties';\r\nvar getHighwaysUrl = home + 'getHighways';\r\nvar getEndCountiesUrl = home + 'getEndCounties';\r\nvar getSegmentsUrl = home + 'getSegments';\r\nvar getCorridorUrl = home + 'getCorridor';\r\nvar getCrashesUrl = home + 'getCrashes';\r\nvar getAllCountiesUrl = home + 'getAllCounties';\r\nvar getAllHighwaysForStartEndCountyUrl = home + 'getAllHighwaysForStartEndCounty';\r\nvar getCcGeomUrl = home + 'getCcGeom';\r\nvar nm = provide_1.default('ssa');\r\n/**\r\n * inner function to help ajax\r\n * @param {string} url - resource url\r\n * @param {object} [params={}] - get params\r\n * @param {ajaxCallback} callback - callback function\r\n */\r\nfunction _ajaxInner(url, params, callback) {\r\n    \"use strict\";\r\n    $.get(url, params, callback, 'json').fail(function () {\r\n        var msg = \"error getting: \" + url + JSON.stringify(params);\r\n        console.warn(msg);\r\n    });\r\n}\r\n/**\r\n * outer function to help ajax\r\n * @param {string} url - resource url\r\n * @param {ajaxCallback} callback - callback function\r\n * @param {object} [params={}] get params\r\n * @param {ajaxCallback} [calbackHelper=undefined] - callback helper\r\n */\r\nfunction _ajaxHelper(url, callback, params, calbackHelper) {\r\n    \"use strict\";\r\n    if (params === void 0) { params = {}; }\r\n    params[(Math.random() * 1000000).toFixed()] = (Math.random() * 1000000).toFixed();\r\n    if (typeof calbackHelper == 'function') {\r\n        var newCallback = function (d) {\r\n            d = calbackHelper(d);\r\n            callback(d);\r\n        };\r\n        _ajaxInner(url, params, newCallback);\r\n    }\r\n    else {\r\n        _ajaxInner(url, params, callback);\r\n    }\r\n}\r\n/**\r\n * sort function for counties\r\n * @param {Array<object>} d - county object\r\n * @returns {Array<object>} sorted array of county key val pair objects\r\n */\r\nvar _countySort = function (d) {\r\n    d.sort(function (a, b) {\r\n        if (a['name'] == b['name']) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return a['name'] < b['name'] ? -1 : 1;\r\n        }\r\n    });\r\n    return d;\r\n};\r\n/**\r\n * static methods to make ajax requests\r\n */\r\nvar AjaxGetters = (function () {\r\n    /**\r\n     * Do not instantiate this class - only static methods\r\n     */\r\n    function AjaxGetters() {\r\n        throw 'this class should not be instantiated';\r\n    }\r\n    /**\r\n     * @static\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getStartCounties = function (callback) {\r\n        \"use strict\";\r\n        _ajaxHelper(getStartCountiesUrl, callback, {}, _countySort);\r\n    };\r\n    /**\r\n     * Get the highways based on the start county\r\n     * @param {number} startCountyId - start county id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getHighways = function (startCountyId, callback) {\r\n        \"use strict\";\r\n        var params = { \"startCountyId\": startCountyId };\r\n        _ajaxHelper(getHighwaysUrl, callback, params);\r\n    };\r\n    /**\r\n     * Get the highways based on the start county\r\n     * @param {string} highwayName - highway name\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getEndCounties = function (highwayName, callback) {\r\n        \"use strict\";\r\n        var params = { \"highwayName\": highwayName };\r\n        _ajaxHelper(getEndCountiesUrl, callback, params, _countySort);\r\n    };\r\n    /**\r\n     * get the segments based on county and route id\r\n     * @param {number} county - county id\r\n     * @param {number} routeId - route id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getSegments = function (county, routeId, callback) {\r\n        \"use strict\";\r\n        var routeIdNum;\r\n        if (typeof routeId == 'string') {\r\n            routeIdNum = parseInt(routeId);\r\n        }\r\n        else {\r\n            routeIdNum = routeId;\r\n        }\r\n        var params = { \"routeid\": routeIdNum, \"county\": county };\r\n        var $mm = $('#hidden-mm-version');\r\n        if ($mm.length > 0) {\r\n            params['mm'] = $mm.val();\r\n        }\r\n        _ajaxHelper(getSegmentsUrl, callback, params);\r\n    };\r\n    /**\r\n     * get corridor based on start and end pdp id\r\n     * @param {number} startPdp - start pdp id\r\n     * @param {number} endPdp - end pdp id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getCorridor = function (startPdp, endPdp, callback) {\r\n        \"use strict\";\r\n        var params = { \"from\": startPdp, \"to\": endPdp };\r\n        var $mm = $('#hidden-mm-version');\r\n        if ($mm.length > 0) {\r\n            params['mm'] = $mm.val();\r\n        }\r\n        _ajaxHelper(getCorridorUrl, callback, params);\r\n    };\r\n    /**\r\n     * Get the crash data\r\n     * @param {number} ssaId\r\n     * @param {number} snapshot\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getCrashes = function (ssaId, snapshot, callback) {\r\n        \"use strict\";\r\n        var params = {\r\n            'ssaId': ssaId,\r\n            'snapshot': snapshot\r\n        };\r\n        _ajaxHelper(getCrashesUrl, callback, params);\r\n    };\r\n    /**\r\n     * Get all counties as an array\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    AjaxGetters.getAllCounties = function (callback) {\r\n        \"use strict\";\r\n        var params = {};\r\n        _ajaxHelper(getAllCountiesUrl, callback, params);\r\n    };\r\n    /**\r\n     * Get highways based on start and end counties\r\n     * @param {number} startCountyId - start county id\r\n     * @param {number} endCountyId - end county id\r\n     * @param {ajaxCallback} callback - callback function\r\n     *\r\n     */\r\n    AjaxGetters.getHwyByStartEndCounty = function (startCountyId, endCountyId, callback) {\r\n        \"use strict\";\r\n        var params = {\r\n            'startCountyId': startCountyId,\r\n            'endCountyId': endCountyId\r\n        };\r\n        _ajaxHelper(getAllHighwaysForStartEndCountyUrl, callback, params);\r\n    };\r\n    AjaxGetters.getCcGeom = function (ssaId, snapshot, callback) {\r\n        \"use strict\";\r\n        var params = {\r\n            'ssaId': ssaId,\r\n            'snapshot': snapshot\r\n        };\r\n        _ajaxHelper(getCcGeomUrl, callback, params);\r\n    };\r\n    return AjaxGetters;\r\n}());\r\nexports.AjaxGetters = AjaxGetters;\r\nexports.default = AjaxGetters;\r\nnm.AjaxGetters = AjaxGetters;\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ol = __webpack_require__(2);\r\nvar projections_1 = __webpack_require__(5);\r\nvar filterCrash_1 = __webpack_require__(25);\r\nvar colorUtil = __webpack_require__(38);\r\n// import filterControllingCritera from '../filters/filterContollingCriteria';\r\nvar filterContollingCriteria_1 = __webpack_require__(24);\r\nvar filterMmFlag_1 = __webpack_require__(26);\r\nvar constants = __webpack_require__(10);\r\nexports.segmentLayer = new ol.style.Style({\r\n    stroke: new ol.style.Stroke({ color: 'darkblue', width: 5 })\r\n});\r\nexports.fromSelectionColor = '#48FD14';\r\nexports.toSelectionColor = '#EE0071';\r\nexports.corridorPreviewColor = 'black';\r\nexports.mmRateFlagColor = 'yellow';\r\nexports.mmKabFlagColor = 'orange';\r\nexports.mmBothColor = 'red';\r\nexports.controllingCriteriaColor = constants.controllingCriteriaColor;\r\n/**\r\n *\r\n * @type {Array<string>}\r\n */\r\nvar returnedColors = [];\r\nvar colorOptions = ['#FF00FF', '#7FFF00', '#FA8072',\r\n    '#FF6347', '#40E0D0', '#ADFF2F', '#6495ED',\r\n    '#FF8C00', '#7FFFD4', '#DA70D6'];\r\nfunction txtFunc(p) {\r\n    return new ol.style.Text({\r\n        text: p.pdpId.toFixed(),\r\n        scale: 1.5,\r\n        stroke: new ol.style.Stroke({\r\n            color: 'black',\r\n            width: 2\r\n        }),\r\n        fill: new ol.style.Fill({\r\n            color: 'white'\r\n        })\r\n    });\r\n}\r\nexports.txtFunc = txtFunc;\r\n/**\r\n * return a random color for styling\r\n * @returns {string}\r\n */\r\nfunction randomColor() {\r\n    \"use strict\";\r\n    if (returnedColors.length == colorOptions.length) {\r\n        returnedColors = [];\r\n    }\r\n    while (true) {\r\n        var c = colorOptions[Math.floor(Math.random() * colorOptions.length)];\r\n        if (returnedColors.indexOf(c) < 0) {\r\n            returnedColors.push(c);\r\n            return c;\r\n        }\r\n    }\r\n}\r\nexports.randomColor = randomColor;\r\n/**\r\n *\r\n * @param name\r\n * @param color\r\n * @param visible\r\n * @returns {{minZoom: number, name: *, transform: {dataProjection: string, featureProjection: string}, style: ol.style.Style, visible: *}}\r\n */\r\nfunction layerConfigHelper(name, color, visible) {\r\n    \"use strict\";\r\n    return {\r\n        minZoom: 4,\r\n        name: name,\r\n        transform: { dataProjection: projections_1.proj3857, featureProjection: projections_1.proj3857 },\r\n        style: new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: color,\r\n                width: 6\r\n            })\r\n        }),\r\n        visible: visible\r\n    };\r\n}\r\nexports.layerConfigHelper = layerConfigHelper;\r\nexports.segNodeStyle = new ol.style.Style({\r\n    image: new ol.style.RegularShape({\r\n        radius: 6,\r\n        points: 4,\r\n        fill: new ol.style.Fill({\r\n            color: 'rgb(0, 0, 0)'\r\n        }),\r\n        stroke: new ol.style.Stroke({ color: 'rgb(0, 0, 0', width: 2 })\r\n    })\r\n});\r\n/**\r\n *\r\n * @param  feature - the input feature\r\n * @returns return style or null\r\n */\r\nexports.crashPointStyle = function (feature) {\r\n    \"use strict\";\r\n    var props = feature.getProperties();\r\n    var crashColor = filterCrash_1.default.getCrashColor(props['injSvr']);\r\n    if (!crashColor) {\r\n        return null;\r\n    }\r\n    var crashColorFill = colorUtil.rgbToRgba(crashColor, 0.9);\r\n    return [new ol.style.Style({\r\n            image: new ol.style.Circle({\r\n                radius: 6,\r\n                fill: new ol.style.Fill({\r\n                    color: crashColorFill\r\n                }),\r\n                stroke: new ol.style.Stroke({ color: 'black', width: 1 })\r\n            })\r\n        })];\r\n};\r\nfunction deficiencyStyle(feature) {\r\n    \"use strict\";\r\n    var props = feature.getProperties();\r\n    var returnStyles = [];\r\n    var showCc = false;\r\n    for (var _i = 0, _a = filterContollingCriteria_1.default.allValues; _i < _a.length; _i++) {\r\n        var cc = _a[_i];\r\n        if (props[cc] && filterContollingCriteria_1.default.valIsOn(cc)) {\r\n            showCc = true;\r\n            break;\r\n        }\r\n    }\r\n    if (showCc) {\r\n        returnStyles.push(new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: exports.controllingCriteriaColor,\r\n                width: 14\r\n            }),\r\n            text: txtFunc(props)\r\n        }));\r\n    }\r\n    var rateOrKab = (props.rateFlag >= 1 && filterMmFlag_1.default.mmRateFlagOn) || (props.kabCrshFlag >= 1 && filterMmFlag_1.default.mmKabFlagOn);\r\n    var onlyRate = props.rateFlag >= 1 && filterMmFlag_1.default.mmRateFlagOn;\r\n    var onlyKab = props.kabCrshFlag >= 1 && filterMmFlag_1.default.mmKabFlagOn;\r\n    var rateAndKab = onlyRate && onlyKab;\r\n    var color;\r\n    if (onlyRate) {\r\n        color = exports.mmRateFlagColor;\r\n    }\r\n    if (onlyKab) {\r\n        color = exports.mmKabFlagColor;\r\n    }\r\n    if (rateAndKab) {\r\n        color = exports.mmBothColor;\r\n    }\r\n    if (rateOrKab) {\r\n        returnStyles.push(new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: color,\r\n                width: 5\r\n            }),\r\n            text: txtFunc(props)\r\n        }));\r\n    }\r\n    if (returnStyles.length > 0) {\r\n        return returnStyles;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.deficiencyStyle = deficiencyStyle;\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/2/2015.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar LayerBaseVector_1 = __webpack_require__(29);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar proj = __webpack_require__(5);\r\nvar projections_1 = __webpack_require__(5);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * The Vector GeoJson Layer\r\n * @augments LayerBaseVector\r\n */\r\nvar LayerBaseVectorGeoJson = (function (_super) {\r\n    __extends(LayerBaseVectorGeoJson, _super);\r\n    /**\r\n     * @param {string|null} url - resource url, set to '' to make blank layer\r\n     * @param {object} options - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     *\r\n     * @param {boolean} [options.autoLoad=false] if the layer should auto load if not visible\r\n     * @param {object} [options.style=undefined] the layer style, use openlayers default style if not defined\r\n     * @param {boolean} [options.onDemand=false] if the layer should be loaded by extent on map move\r\n     * @param {number} [options.onDemandDelay=300] delay before the map move callback should be called\r\n     *\r\n     * @param {object} [options.transform={}] SR transform, set as false for no transform\r\n     * @param {string} options.transform.dataProjection=EPSG:4326 the data CRS\r\n     * @param {string} options.transform.featureProjection=EPSG:3857 the feature/map CRS\r\n     * @param {mapMoveMakeGetParams} [options.mapMoveMakeGetParams=function(lyr, extent, zoomLevel){}] function to create additional map move params\r\n     * @param {MapMoveCls} [options.mapMoveObj=mapMove] alternate map move object for use with multi map pages\r\n     */\r\n    function LayerBaseVectorGeoJson(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = this;\r\n        url = typeof url == 'string' ? url : '';\r\n        _this = _super.call(this, url, options) || this;\r\n        _this._geoJsonFormat = new ol.format.GeoJSON();\r\n        _this._transform = options.transform || {};\r\n        _this._transform.dataProjection = _this._transform.dataProjection || proj.proj4326;\r\n        _this._transform.featureProjection = _this._transform.featureProjection || projections_1.proj3857;\r\n        if (_this.autoLoad || _this.visible) {\r\n            _this._load();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * add feature collection\r\n     * @param {object} featureCollection - as geojson object\r\n     */\r\n    LayerBaseVectorGeoJson.prototype.addFeatures = function (featureCollection) {\r\n        this.source.addFeatures(this._geoJsonFormat.readFeatures(featureCollection, { dataProjection: this._transform.dataProjection,\r\n            featureProjection: this._transform.featureProjection }));\r\n    };\r\n    /**\r\n     * trigger load features\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    LayerBaseVectorGeoJson.prototype._load = function () {\r\n        var _this = this;\r\n        if (_super.prototype._load.call(this)) {\r\n            return true;\r\n        }\r\n        $.get(this._url, this._params, function (d) {\r\n            _this.addFeatures(d);\r\n            _this.loadCallback(_this);\r\n        }, 'json').fail(function () {\r\n            this._loaded = false;\r\n        });\r\n        return false;\r\n    };\r\n    /**\r\n     * callback function on map move\r\n     * @param {object} d the json response\r\n     * @override\r\n     */\r\n    LayerBaseVectorGeoJson.prototype.mapMoveCallback = function (d) {\r\n        _super.prototype.mapMoveCallback.call(this, d);\r\n        this._source.addFeatures(this._geoJsonFormat.readFeatures(d, { featureProjection: this._transform.featureProjection, dataProjection: this._transform.dataProjection }));\r\n    };\r\n    return LayerBaseVectorGeoJson;\r\n}(LayerBaseVector_1.LayerBaseVector));\r\nexports.LayerBaseVectorGeoJson = LayerBaseVectorGeoJson;\r\nnm.LayerBaseVectorGeoJson = LayerBaseVectorGeoJson;\r\nexports.default = LayerBaseVectorGeoJson;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/18/2016.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util');\r\n/**\r\n *\r\n * @param {Array<LayerBaseVector>|Array<ol.layer.Vector>|LayerBaseVector|ol.layer.Vector|*} layers - array of layers or single\r\n * @returns {ol.Extent|Array<number>|*} - collective extent\r\n */\r\nfunction calculateExtent(layers) {\r\n    \"use strict\";\r\n    var hasExtent = false;\r\n    var minX = 10E100;\r\n    var minY = 10E100;\r\n    var maxX = -10E100;\r\n    var maxY = -10E100;\r\n    for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\r\n        var lyr = layers_1[_i];\r\n        var olLayer = lyr.olLayer || lyr;\r\n        if (olLayer.getSource().getFeatures().length > 0) {\r\n            hasExtent = true;\r\n            var ext = olLayer.getSource().getExtent();\r\n            minX = ext[0] < minX ? ext[0] : minX;\r\n            minY = ext[1] < minY ? ext[1] : minY;\r\n            maxX = ext[2] > maxX ? ext[2] : maxX;\r\n            maxY = ext[3] > maxY ? ext[3] : maxY;\r\n        }\r\n    }\r\n    if (hasExtent) {\r\n        return [minX, minY, maxX, maxY];\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexports.calculateExtent = calculateExtent;\r\nnm.calculateExtent = calculateExtent;\r\n/**\r\n * given one or an array of layers, fit to the map\r\n * @param layers - array of layers or single\r\n * @param  mp - the map to fit\r\n * @param [zoomOut=undefined] - levels to zoom out after fit\r\n */\r\nfunction fitToMap(layers, mp, zoomOut) {\r\n    \"use strict\";\r\n    var ext = calculateExtent(layers);\r\n    if (typeof ext == 'undefined') {\r\n        return;\r\n    }\r\n    mp.getView().fit(ext, mp.getSize());\r\n    if (typeof zoomOut == 'number') {\r\n        mp.getView().setZoom(mp.getView().getZoom() - zoomOut);\r\n    }\r\n}\r\nexports.fitToMap = fitToMap;\r\nnm.calculateExtent = calculateExtent;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 8/17/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.mmFlagListId = 'mm-deficiency-list';\r\nexports.ccListId = 'cc-deficiency-list';\r\nexports.pdpDataAttr = 'data-pdp-id';\r\nexports.mmFlagColor = '#00FF00';\r\nexports.controllingCriteriaColor = '#00FF00';\r\nexports.defListId = 'deficiency-list';\r\nexports.defColor = 'white';\r\n// export const contollingCriteriaLookup = {\r\n//     'ccDesignSpeed': 'Design Speed',\r\n//     'Grade': 'Grade',\r\n//     'Lane Width': 'Lane Width',\r\n//     'Stopping Sight Distance': 'Stopping Sight Distance',\r\n//     'Shoulder Width': 'Shoulder Width',\r\n//     'Pavement Cross Slope': 'Pavement Cross Slope',\r\n//     'Horizontal Alignment': 'Horizontal Alignment',\r\n//     'Vertical Clearance': 'Vertical Clearance',\r\n//     'Superelevation': 'Superelevation',\r\n//     'Structural Capacity': 'Structural Capacity'\r\n// };\r\nexports.propNames = ['ccDesignSpeed', 'ccLaneWidth', 'ccShoulderWidth', 'ccHorizontalCurve', 'ccSuperelevation',\r\n    'ccMaximumGrade', 'ccStoppingSight', 'ccCrossSlope', 'ccVerticalClearance', 'ccDesignLoading'];\r\nexports.propValues = ['Design Speed', 'Lane Width', 'Shoulder Width', 'Horizontal Alignment', 'Superelevation',\r\n    'Grade', 'Stopping Sight Distance', 'Pavement Cross Slope', 'Vertical Clearance', 'Structural Capacity'];\r\nexports.controllingCriteriaProps = {};\r\nfor (var i = 0; i < exports.propNames.length; i++) {\r\n    exports.controllingCriteriaProps[exports.propNames[i]] = exports.propValues[i];\r\n}\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar $ = __webpack_require__(1);\r\nvar crashReportURl = 'https://transportal.cee.wisc.edu/applications/crash-reports/retrieveCrashReport.do?doctnmbr=';\r\nvar $showCrashReport = $('#hidden-show-crash-report');\r\nvar showCrashReport = false;\r\nif ($showCrashReport) {\r\n    var crashReportVal = $showCrashReport.val();\r\n    if (typeof crashReportVal == 'string' && crashReportVal.toLowerCase().trim() == 'y') {\r\n        showCrashReport = true;\r\n    }\r\n}\r\nexports.mmPopupContent = function (props) {\r\n    var returnHtml = '<table class=\"mm-popup-table\">';\r\n    returnHtml += \"<tr><td>PdpId</td><td>\" + props['pdpId'] + \"</td></tr>\";\r\n    returnHtml += \"<tr><td>Highway</td><td>\" + props['stdName'] + \"</td></tr>\";\r\n    returnHtml += \"<tr><td>Description</td><td>\" + (props['rpDesc'] ? props['rpDesc'] : '-') + \"</td></tr>\";\r\n    returnHtml += \"<tr><td>Divided</td><td>\" + props['divUnd'] + \"</td></tr>\";\r\n    returnHtml += \"<tr><td>From RP</td><td>\" + props['startRp'] + \"</td></tr>\";\r\n    returnHtml += \"<tr><td>To RP</td><td>\" + props['endRp'] + \"</td></tr>\";\r\n    returnHtml += '</table>';\r\n    return returnHtml;\r\n};\r\nvar crashProps = [\r\n    'doctnmbr',\r\n    // 'multiflag',\r\n    'accDate',\r\n    'ntfyHour',\r\n    'county',\r\n    'municipality',\r\n    'munitype',\r\n    'onHwyRp',\r\n    'onHwyDir',\r\n    'onStr',\r\n    'athHwy',\r\n    'atStr',\r\n    'intDir',\r\n    'intDis',\r\n    'accdSvr',\r\n    'injSvr',\r\n    'totFatl',\r\n    'toInj',\r\n    'accdType',\r\n    'mnrColl',\r\n    'accdLoc',\r\n    'hwyClass',\r\n    'roadCond',\r\n    'wthrCond',\r\n    'consZone',\r\n    'alcFlag',\r\n    'bikeFlag',\r\n    'cyclFlag',\r\n    'pedFlag',\r\n    'totVeh',\r\n    'lon',\r\n    'lat'\r\n];\r\nfunction injColor(inj) {\r\n    \"use strict\";\r\n    var color = {\r\n        'K': 'rgb(255,0,0)',\r\n        'A': 'rgb(255,165,0)',\r\n        'B': 'rgb(255,255,0)',\r\n        'C': 'rgb(153,255,153)',\r\n        'P': 'rgb(141,227,230)'\r\n    }[inj];\r\n    return color || 'rgba(255,255,255,0)';\r\n}\r\nfunction processVal(v) {\r\n    if (v == null || typeof v == 'undefined') {\r\n        return '';\r\n    }\r\n    else {\r\n        return v;\r\n    }\r\n}\r\nfunction crashReportDownload(docNum) {\r\n    return \"<a class=\\\"crash-map-download\\\" title=\\\"Download Crash Report\\\" target=\\\"_blank\\\" href=\\\"\" + crashReportURl + docNum + \"\\\"></a>\";\r\n}\r\nexports.crashPointPopup = function (props) {\r\n    var returnHtml = '<table class=\"crash-popup-table\">';\r\n    for (var i = 0; i < crashProps.length; i++) {\r\n        var p = crashProps[i];\r\n        var v = processVal(props[p]);\r\n        if (i == 0 && showCrashReport) {\r\n            v = \"<span style=\\\"margin-right: 3px\\\">\" + v + \"</span>\" + crashReportDownload(v);\r\n        }\r\n        returnHtml += \"<tr><td>\" + p + \"&nbsp;&nbsp;</td><td>\" + v + \"</td></tr>\";\r\n    }\r\n    returnHtml += '</table>';\r\n    return returnHtml;\r\n};\r\n/**\r\n *\r\n * @param {Array<CrashDataObject>} crashData - array of crash data\r\n * @returns {string} crash summary table html\r\n * @private\r\n */\r\nfunction crashInfoHelper(crashData) {\r\n    \"use strict\";\r\n    crashData.sort(function (a, b) {\r\n        var dteA = (new Date(a['dte'] + ' ' + a['time'])).getTime();\r\n        var dteB = (new Date(b['dte'] + ' ' + b['time'])).getTime();\r\n        if (dteA == dteB) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return dteA > dteB ? -1 : 1;\r\n        }\r\n    });\r\n    var returnHtml = '';\r\n    returnHtml += '<ul class=\"crash-list\">';\r\n    var crashSummary = {};\r\n    for (var _i = 0, crashData_1 = crashData; _i < crashData_1.length; _i++) {\r\n        var c = crashData_1[_i];\r\n        if (typeof crashSummary[c.injSvr] == 'undefined') {\r\n            crashSummary[c.injSvr] = 1;\r\n        }\r\n        else {\r\n            crashSummary[c.injSvr]++;\r\n        }\r\n        returnHtml += \"<li style=\\\"background-color: \" + injColor(c.injSvr) + \";\\\">\";\r\n        if (showCrashReport) {\r\n            returnHtml += crashReportDownload(c.doctnmbr);\r\n        }\r\n        returnHtml += c.accDate ? c.accDate : '';\r\n        if (c.mnrColl) {\r\n            returnHtml += ', ' + c.mnrColl;\r\n        }\r\n        if (c.injSvr) {\r\n            returnHtml += ', ' + c.injSvr;\r\n        }\r\n        returnHtml += '</li>';\r\n    }\r\n    returnHtml += '</ul>';\r\n    var crashType = {\r\n        'K': 'Fatal',\r\n        'A': 'Incapacitating',\r\n        'B': 'Non-incapacitating',\r\n        'C': 'Possible Injury',\r\n        'P': 'Property Damage'\r\n    };\r\n    var tableContent = '<table class=\"crash-summary-table\">';\r\n    tableContent += \"<tr><th colspan=\\\"2\\\">Crash Summary</th></tr>\";\r\n    tableContent += \"<tr><td>Total</td><td>\" + crashData.length + \"</td></tr>\";\r\n    if (crashData.length > 0) {\r\n        for (var _a = 0, _b = ['K', 'A', 'B', 'C', 'P']; _a < _b.length; _a++) {\r\n            var k = _b[_a];\r\n            if (typeof crashSummary[k] != 'undefined') {\r\n                tableContent += \"<tr><td>\" + crashType[k] + \"</td><td>\" + crashSummary[k] + \"</td></tr>\";\r\n            }\r\n        }\r\n    }\r\n    tableContent += '</table>';\r\n    returnHtml = tableContent + returnHtml;\r\n    return returnHtml;\r\n}\r\nexports.crashInfoHelper = crashInfoHelper;\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('domUtil');\r\nvar SelectBoxBase = (function () {\r\n    /**\r\n     *\r\n     * @param {jQuery} parent - parent container\r\n     * @param {string} labelContent\r\n     * @param {contentGenerator} [contentGen=undefined]\r\n     */\r\n    function SelectBoxBase(parent, labelContent, contentGen) {\r\n        var _this = this;\r\n        var guidTop = makeGuid_1.default();\r\n        var guid = makeGuid_1.default();\r\n        var htmlString = \"<div id=\\\"\" + guidTop + \"\\\">\";\r\n        htmlString += \"<label for=\\\"\" + guid + \"\\\">\" + labelContent + \"</label>\";\r\n        if (contentGen) {\r\n            htmlString += contentGen(guid);\r\n        }\r\n        else {\r\n            htmlString += \"<select id=\\\"\" + guid + \"\\\"></select>\";\r\n        }\r\n        htmlString += '</div>';\r\n        parent.append(htmlString);\r\n        this._$container = parent.find('#' + guidTop);\r\n        this.$label = this._$container.find('label');\r\n        /**\r\n         *\r\n         * @type {Array<selectChangeCallback>}\r\n         * @private\r\n         */\r\n        this._changeListeners = [];\r\n        this._box = parent.find(\"#\" + guid);\r\n        if (!this._box) {\r\n            throw 'the select box was not found';\r\n        }\r\n        this._box.change(function () {\r\n            _this.changed();\r\n        });\r\n    }\r\n    Object.defineProperty(SelectBoxBase.prototype, \"box\", {\r\n        /**\r\n         *\r\n         * @returns {jQuery}\r\n         */\r\n        get: function () {\r\n            return this._box;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SelectBoxBase.prototype.changed = function () {\r\n        var v = this._box.val();\r\n        for (var _i = 0, _a = this._changeListeners; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f(v);\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {selectChangeCallback} func\r\n     */\r\n    SelectBoxBase.prototype.addChangeListener = function (func) {\r\n        this._changeListeners.push(func);\r\n    };\r\n    Object.defineProperty(SelectBoxBase.prototype, \"selectedValue\", {\r\n        get: function () {\r\n            var theVal = this.box.val();\r\n            if (theVal == null || typeof theVal == 'undefined') {\r\n                return null;\r\n            }\r\n            else if (isNaN(theVal)) {\r\n                return theVal;\r\n            }\r\n            else {\r\n                if (theVal.indexOf('.') > -1) {\r\n                    return parseFloat(theVal);\r\n                }\r\n                else {\r\n                    return parseInt(theVal);\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         *\r\n         * @param {string|number} v\r\n         */\r\n        set: function (v) {\r\n            this.box.val(v);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SelectBoxBase.prototype, \"selectedText\", {\r\n        get: function () {\r\n            return this.box.find('option:selected').text();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SelectBoxBase;\r\n}());\r\nexports.SelectBoxBase = SelectBoxBase;\r\nnm.SelectBoxBase = SelectBoxBase;\r\nexports.default = SelectBoxBase;\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 12/23/2015.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * take an array of features and sort by a given property name\r\n */\r\nvar SortedFeatures = (function () {\r\n    /**\r\n     *\r\n     * @param {Array<ol.Feature>} features array of ol features\r\n     * @param {string} propertyName - the property name to use for lookup\r\n     */\r\n    function SortedFeatures(features, propertyName) {\r\n        this.sortedFeatures = features;\r\n        this.propertyName = propertyName;\r\n        if (this.sortedFeatures.length > 0) {\r\n            this._propertyType = typeof this.sortedFeatures[0].getProperties()[this.propertyName];\r\n            var __this_1 = this;\r\n            this.sortedFeatures.sort(function (a, b) {\r\n                if (__this_1._propertyType == 'number') {\r\n                    var aMinusB = a['getProperties']()[__this_1.propertyName] - b['getProperties']()[__this_1.propertyName];\r\n                    if (aMinusB == 0) {\r\n                        return 0;\r\n                    }\r\n                    else {\r\n                        return aMinusB > 0 ? 1 : -1;\r\n                    }\r\n                }\r\n                else if (__this_1._propertyType == 'string') {\r\n                    var propA = a['getProperties']()[__this_1.propertyName] || '';\r\n                    var propB = b['getProperties']()[__this_1.propertyName] || '';\r\n                    propA = propA.toString().trim();\r\n                    propB = propB.toString().trim();\r\n                    if (propA == propB) {\r\n                        return 0;\r\n                    }\r\n                    else {\r\n                        return propA > propB ? 1 : 0;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * recursive search to find the value\r\n     * @param {number|string} propertyValue - the property value to search for\r\n     * @param {boolean} [exactMatch=false] if only an exact match should be returned\r\n     * @param {Array} [sortedFeatures=this.sortedFeatures] - the candidate features\r\n     * @returns {ol.Feature|undefined} the feature matching the lookup\r\n     */\r\n    SortedFeatures.prototype.getFeature = function (propertyValue, exactMatch, sortedFeatures) {\r\n        if (exactMatch === void 0) { exactMatch = false; }\r\n        if (typeof sortedFeatures == 'undefined') {\r\n            sortedFeatures = this.sortedFeatures;\r\n        }\r\n        if (sortedFeatures.length == 0) {\r\n            return undefined;\r\n        }\r\n        if (sortedFeatures.length == 1) {\r\n            if (exactMatch) {\r\n                if (sortedFeatures[0].getProperties()[this.propertyName] == propertyValue) {\r\n                    return sortedFeatures[0];\r\n                }\r\n                else {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                return sortedFeatures[0];\r\n            }\r\n        }\r\n        var lowProp = sortedFeatures[0].getProperties()[this.propertyName];\r\n        var highProp = sortedFeatures[sortedFeatures.length - 1].getProperties()[this.propertyName];\r\n        if (exactMatch) {\r\n            if (lowProp == propertyValue) {\r\n                return sortedFeatures[0];\r\n            }\r\n            else if (propertyValue < lowProp) {\r\n                return undefined;\r\n            }\r\n            else if (highProp == propertyValue) {\r\n                return sortedFeatures[sortedFeatures.length - 1];\r\n            }\r\n            else if (propertyValue > highProp) {\r\n                return undefined;\r\n            }\r\n        }\r\n        else {\r\n            if (propertyValue <= lowProp) {\r\n                return sortedFeatures[0];\r\n            }\r\n            else if (propertyValue >= highProp) {\r\n                return sortedFeatures[sortedFeatures.length - 1];\r\n            }\r\n        }\r\n        var midIndex = Math.floor(sortedFeatures.length / 2);\r\n        var midFeature = sortedFeatures[midIndex];\r\n        var midProperty = midFeature.getProperties()[this.propertyName];\r\n        if (midProperty === propertyValue) {\r\n            return midFeature;\r\n        }\r\n        if (propertyValue < midProperty) {\r\n            return this.getFeature(propertyValue, exactMatch, sortedFeatures.slice(0, midIndex));\r\n        }\r\n        else {\r\n            return this.getFeature(propertyValue, exactMatch, sortedFeatures.slice(midIndex));\r\n        }\r\n    };\r\n    return SortedFeatures;\r\n}());\r\nexports.SortedFeatures = SortedFeatures;\r\nnm.SortedFeatures = SortedFeatures;\r\nexports.default = SortedFeatures;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/11/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar LayerBaseVectorGeoJson_1 = __webpack_require__(8);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar provide_1 = __webpack_require__(0);\r\nvar layerStyles_1 = __webpack_require__(7);\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar SortedFeatures_1 = __webpack_require__(13);\r\nvar layerStyles = __webpack_require__(7);\r\nvar ext = __webpack_require__(9);\r\nvar ol = __webpack_require__(2);\r\nvar nm = provide_1.default('ssa');\r\nfunction escapeHtml(string) {\r\n    return String(string).replace(/[&<>\"'\\/]/g, function (s) {\r\n        return {\r\n            \"&\": \"&amp;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            '\"': '&quot;',\r\n            \"'\": '&#39;',\r\n            \"/\": '&#x2F;'\r\n        }[s];\r\n    });\r\n}\r\n/**\r\n *\r\n * @param {string} fromRp - from reference point\r\n * @param {string} toRp - to reference point\r\n * @returns {string} string with abbreviated reference point identifiers separated by a hyphen\r\n * @private\r\n */\r\nfunction corridorName(fromRp, toRp) {\r\n    \"use strict\";\r\n    return fromRp.substring(0, 7) + ' - ' + toRp.substring(0, 7);\r\n}\r\nvar Corridor = (function () {\r\n    /**\r\n     *\r\n     * @param {number} pdpFrom - from segment id\r\n     * @param {number} pdpTo - to segment id\r\n     * @param {string} rpFrom - from reference point\r\n     * @param {string} rpTo - to reference point\r\n     * @param {number|string} countyStart - start county\r\n     * @param {number} countyEnd - end county\r\n     * @param {string} highway - highway text\r\n     * @param {number} routeId - route Id\r\n     * @param {object} [options={}] options\r\n     * @param {corridorLoaded} [options.loadedCallback=function(c){}] function to call on load\r\n     * @param {number|string|undefined|*} [options.databaseId=undefined] - id in the database\r\n     * @param {string} [options.color=randomColor()] - color for this corridor\r\n     * @param {Array<ol.Feature>|undefined} [options.features=undefined] - pre existing features\r\n     * @param {boolean} [options.cancelLoad=false] - don't load in init\r\n     */\r\n    function Corridor(pdpFrom, pdpTo, rpFrom, rpTo, countyStart, countyEnd, highway, routeId, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.ssaId = -1;\r\n        this.snapshotVersion = -1;\r\n        this.corridorId = -1;\r\n        options.features = options.features ? options.features : undefined;\r\n        options.cancelLoad = typeof options.cancelLoad == 'boolean' ? options.cancelLoad : false;\r\n        this.clientId = makeGuid_1.default();\r\n        if (options.color) {\r\n            this._color = options.color;\r\n        }\r\n        else {\r\n            this._color = layerStyles_1.randomColor();\r\n        }\r\n        this.databaseId = options.databaseId || undefined;\r\n        this._valid = false;\r\n        this._error = '';\r\n        this._loaded = false;\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|null}\r\n         */\r\n        this.sortedFeatures = null;\r\n        this.pdpFrom = pdpFrom;\r\n        this.pdpTo = pdpTo;\r\n        if (typeof countyStart == 'string') {\r\n            this.countyStart = parseInt(countyStart);\r\n        }\r\n        else {\r\n            this.countyStart = countyStart;\r\n        }\r\n        if (typeof countyEnd == 'string') {\r\n            this.countyEnd = parseInt(countyEnd);\r\n        }\r\n        else {\r\n            this.countyEnd = countyEnd;\r\n        }\r\n        if (typeof routeId == 'string') {\r\n            this.routeId = parseInt(routeId);\r\n        }\r\n        else {\r\n            this.routeId = routeId;\r\n        }\r\n        this.highway = highway;\r\n        this.rpFrom = rpFrom;\r\n        this.rpTo = rpTo;\r\n        if (typeof routeId != 'number') {\r\n            throw 'route id is not number';\r\n        }\r\n        var corName = corridorName(this.rpFrom, this.rpTo);\r\n        if (typeof options.idx === 'number') {\r\n            corName = \"Corridor #\" + options.idx;\r\n        }\r\n        this._corridorLayer = new LayerBaseVectorGeoJson_1.LayerBaseVectorGeoJson('', layerStyles_1.layerConfigHelper(corName, this._color, true));\r\n        this.nodeLayer = new LayerBaseVectorGeoJson_1.LayerBaseVectorGeoJson('', {\r\n            style: layerStyles.segNodeStyle,\r\n            minZoom: 11,\r\n            zIndex: 3\r\n        });\r\n        if (options.features) {\r\n            this._corridorLayer.source.addFeatures(options.features);\r\n        }\r\n        else if (options.jsonFeatures) {\r\n            this._corridorLayer.addFeatures(options.jsonFeatures);\r\n            this._loaded = true;\r\n            this.sortedFeatures = new SortedFeatures_1.default(this.olLayer.getSource().getFeatures(), 'pdpId');\r\n            this.buildNodes();\r\n        }\r\n        else if (!options.cancelLoad) {\r\n            this.load(options.loadedCallback);\r\n        }\r\n    }\r\n    Corridor.prototype.setDbValues = function (corConfig) {\r\n        this.ssaId = corConfig.ssaId;\r\n        this.snapshotVersion = corConfig.snapshotVersion;\r\n        this.corridorId = corConfig.corridorId;\r\n    };\r\n    /**\r\n     *\r\n     * @param {corridorLoaded} [loadedCallback=function(c){}] - function to call on load\r\n     */\r\n    Corridor.prototype.load = function (loadedCallback) {\r\n        var _this = this;\r\n        loadedCallback = typeof loadedCallback == 'function' ? loadedCallback : function () {\r\n        };\r\n        this._valid = false;\r\n        this._error = '';\r\n        ajaxGetters_1.default.getCorridor(this.pdpFrom, this.pdpTo, function (d) {\r\n            _this._corridorLayer.addFeatures(d);\r\n            if (typeof d['error'] == 'undefined') {\r\n                _this._valid = true;\r\n            }\r\n            else {\r\n                _this._error = d['error'];\r\n            }\r\n            _this._loaded = true;\r\n            _this.sortedFeatures = new SortedFeatures_1.default(_this.olLayer.getSource().getFeatures(), 'pdpId');\r\n            _this.buildNodes();\r\n            loadedCallback(_this);\r\n        });\r\n    };\r\n    Corridor.prototype.buildNodes = function () {\r\n        this.nodeLayer.clear();\r\n        var features = this._corridorLayer.olLayer.getSource().getFeatures();\r\n        for (var i = 0; i < features.length; i++) {\r\n            var coords = features[i].getGeometry()['getCoordinates']();\r\n            if (coords && coords.length > 0) {\r\n                var startPoint = new ol.geom.Point(coords[0]);\r\n                var endPoint = new ol.geom.Point(coords[coords.length - 1]);\r\n                this.nodeLayer.olLayer.getSource().addFeature(new ol.Feature(startPoint));\r\n                this.nodeLayer.olLayer.getSource().addFeature(new ol.Feature(endPoint));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @returns {Corridor} a copy of the corridor\r\n     */\r\n    Corridor.prototype.clone = function () {\r\n        var c = new Corridor(this.pdpFrom, this.pdpTo, this.rpFrom, this.rpTo, this.countyStart, this.countyEnd, this.highway, this.routeId, { features: this.features });\r\n        c.buildNodes();\r\n        return c;\r\n    };\r\n    /**\r\n     *\r\n     * @param {Corridor} corridor -  the corridor used for updating\r\n     */\r\n    Corridor.prototype.updateCorridor = function (corridor) {\r\n        this.pdpFrom = corridor.pdpFrom;\r\n        this.pdpTo = corridor.pdpTo;\r\n        this.countyStart = corridor.countyStart;\r\n        this.countyEnd = corridor.countyEnd;\r\n        this.highway = corridor.highway;\r\n        this.rpFrom = corridor.rpFrom;\r\n        this.rpTo = corridor.rpTo;\r\n        this.routeId = corridor.routeId;\r\n        this.layer.name = corridorName(this.rpFrom, this.rpTo);\r\n        this.layer.clear();\r\n        this.layer.olLayer.getSource().addFeatures(corridor.features);\r\n        this.buildNodes();\r\n    };\r\n    Object.defineProperty(Corridor.prototype, \"color\", {\r\n        get: function () {\r\n            return this._color;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"valid\", {\r\n        /**\r\n         *\r\n         * @returns {boolean} if the corridor is loaded, no error on ajax\r\n         */\r\n        get: function () {\r\n            return this._valid;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"error\", {\r\n        /**\r\n         *\r\n         * @returns {string|*} - error message\r\n         */\r\n        get: function () {\r\n            return this._error;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"tableHtmlCreate\", {\r\n        /**\r\n         * get the html string to build the corridor table row with zoom, edit, and delete buttons\r\n         * @returns {string} - html for the corridor zoom, edit, and delete buttons\r\n         */\r\n        get: function () {\r\n            var outString = \"<tr class=\\\"corridor-tr\\\">\";\r\n            outString += \"<td style=\\\"background-color: \" + this._color + \"\\\"></td>\";\r\n            outString += \"<td>\" + corridorName(this.rpFrom, this.rpTo) + \"</td>\";\r\n            outString += \"<td>\";\r\n            outString += \"<span title=\\\"Zoom To\\\" class=\\\"corridor-zoom\\\" data-corridor=\\\"\" + this.clientId + \"\\\"></span>\";\r\n            outString += \"<span title=\\\"Edit Corridor\\\"  class=\\\"corridor-edit\\\" data-corridor=\\\"\" + this.clientId + \"\\\"></span>\";\r\n            outString += \"<span title=\\\"Remove Corridor\\\"  class=\\\"corridor-delete\\\" data-corridor=\\\"\" + this.clientId + \"\\\"></span>\";\r\n            outString += \"</td>\";\r\n            outString += '</tr>';\r\n            return outString;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Corridor.prototype.getDataHtml = function (i) {\r\n        var outString = '<div class=\"corridor-data\">';\r\n        outString += \"<label>Ssa Id</label>\";\r\n        outString += \"<input type=\\\"text\\\" readonly class=\\\"corridor-data-ssa-id\\\" name=\\\"corridors[\" + i + \"].id.ssaId\\\" value=\\\"\" + this.ssaId + \"\\\"><br>\";\r\n        outString += \"<label>Snapshot version</label>\";\r\n        outString += \"<input type=\\\"text\\\" readonly class=\\\"corridor-data-snapshot\\\" name=\\\"corridors[\" + i + \"].id.snapshotVersion\\\" value=\\\"\" + this.snapshotVersion + \"\\\"><br>\";\r\n        outString += \"<label>Corridor Id</label>\";\r\n        outString += \"<input type=\\\"text\\\" readonly class=\\\"corridor-data-corridor-id\\\" name=\\\"corridors[\" + i + \"].id.corridorId\\\" value=\\\"\" + this.corridorId + \"\\\"><br>\";\r\n        outString += \"<label>Start County</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-start-county\\\" readonly name=\\\"corridors[\" + i + \"].startCounty\\\" value=\\\"\" + this.countyStart + \"\\\"/><br>\";\r\n        outString += \"<label>End County</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-end-county\\\" readonly name=\\\"corridors[\" + i + \"].endCounty\\\" value=\\\"\" + this.countyEnd + \"\\\"/><br>\";\r\n        outString += \"<label>Highway</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-highway\\\" readonly name=\\\"corridors[\" + i + \"].stdhighway\\\" value=\\\"\" + this.highway + \"\\\"/><br>\";\r\n        outString += \"<label>Start Rp</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-from-rp\\\" readonly name=\\\"corridors[\" + i + \"].startRp\\\" value=\\\"\" + this.rpFrom + \"\\\"/><br>\";\r\n        outString += \"<label>End Rp</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-to-rp\\\" readonly name=\\\"corridors[\" + i + \"].endRp\\\" value=\\\"\" + this.rpTo + \"\\\"/><br>\";\r\n        outString += \"<label>Route Id</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-route-id\\\" readonly name=\\\"corridors[\" + i + \"].rdwyRteId\\\" value=\\\"\" + this.routeId + \"\\\"/><br>\";\r\n        outString += \"<label>Start Pdp</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-from-pdp\\\" readonly value=\\\"\" + this.pdpFrom + \"\\\"/><br>\";\r\n        outString += \"<label>End Pdp</label>\";\r\n        outString += \"<input type=\\\"text\\\" class=\\\"corridor-data-to-pdp\\\" readonly value=\\\"\" + this.pdpTo + \"\\\"/><br>\";\r\n        outString += \"</div>\";\r\n        return outString;\r\n    };\r\n    Corridor.prototype.getDataHtmlDisp = function (i) {\r\n        var returnString = this.getDataHtml(i);\r\n        returnString = escapeHtml(returnString);\r\n        returnString = returnString.replace(/&quot;&#x2F;&gt;/g, '&quot;&#x2F;&gt;<br>');\r\n        returnString = returnString.replace(/corridor-data&quot;&gt;/g, 'corridor-data&quot;&gt;<br>');\r\n        return returnString + '<br>';\r\n    };\r\n    Object.defineProperty(Corridor.prototype, \"olLayer\", {\r\n        /**\r\n         *\r\n         * @returns {ol.layer.Vector|ol.layer.Base} - the OL Vector Layer\r\n         */\r\n        get: function () {\r\n            return this._corridorLayer.olLayer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"layer\", {\r\n        /**\r\n         *\r\n         * @returns {LayerBaseVectorGeoJson} geojson layer\r\n         */\r\n        get: function () {\r\n            return this._corridorLayer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"visible\", {\r\n        /**\r\n         * Getter\r\n         * @returns {boolean} if corridor layer is visible\r\n         */\r\n        get: function () {\r\n            return this._corridorLayer.visible;\r\n        },\r\n        /**\r\n         * Setter\r\n         * @param {boolean} vis if corridor layer is visible\r\n         *\r\n         */\r\n        set: function (vis) {\r\n            this._corridorLayer.visible = vis;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"features\", {\r\n        /**\r\n         *\r\n         * @returns {Array.<ol.Feature>} an array of ol features\r\n         */\r\n        get: function () {\r\n            return this._corridorLayer.features;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"extent\", {\r\n        /**\r\n         *\r\n         * @returns {ol.Extent|undefined} layer extent\r\n         */\r\n        get: function () {\r\n            return ext.calculateExtent([this.layer]);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Corridor.prototype, \"loaded\", {\r\n        get: function () {\r\n            return this._loaded;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Corridor;\r\n}());\r\nnm.Corridor = Corridor;\r\nexports.default = Corridor;\r\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 7/13/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('ssa');\r\nvar FilterBase = (function () {\r\n    /**\r\n     *\r\n     * @param {string} topCheckId - top checkbox id\r\n     * @param {string} otherChecksClass - other checkbox class identifier\r\n     * @param {boolean} defaultOn - is on by default\r\n     */\r\n    function FilterBase(topCheckId, otherChecksClass, defaultOn) {\r\n        var _this = this;\r\n        this._topCheck = $('#' + topCheckId);\r\n        this._subChecks = $('.' + otherChecksClass);\r\n        /**\r\n         *\r\n         * @type {Array<function>}\r\n         * @private\r\n         */\r\n        this._changeCallbacks = [];\r\n        /**\r\n         *\r\n         * @type {Array<string>}\r\n         */\r\n        this._onValues = [];\r\n        /**\r\n         *\r\n         * @type {Array<string>}\r\n         */\r\n        this._allValues = [];\r\n        this._subChecks.each(function (ix, /** @type {HTMLElement} */ el) {\r\n            _this._allValues.push($(el).val());\r\n        });\r\n        this._topCheck.prop('checked', defaultOn);\r\n        this._setAllOnOff(defaultOn);\r\n        this._topCheck.change(function () {\r\n            _this._setAllOnOff(_this._topCheck.prop('checked'));\r\n        });\r\n        var __this = this;\r\n        this._subChecks.change(function () {\r\n            var $el = $(this);\r\n            var theVal = $el.val();\r\n            var isChecked = $el.prop('checked');\r\n            var ix = __this._onValues.indexOf(theVal);\r\n            if (isChecked && ix == -1) {\r\n                __this._onValues.push(theVal);\r\n            }\r\n            else if (!isChecked && ix != -1) {\r\n                __this._onValues.splice(ix, 1);\r\n            }\r\n            __this._topCheck.prop('checked', __this._onValues.length == __this._allValues.length);\r\n            __this._fireCallbacks();\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * @param {function} f - function to call on change\r\n     */\r\n    FilterBase.prototype.addChangeCallback = function (f) {\r\n        this._changeCallbacks.push(f);\r\n    };\r\n    /**\r\n     *\r\n     * @param {string} val - the value to check\r\n     * @returns {boolean} - if the property is on\r\n     */\r\n    FilterBase.prototype.valIsOn = function (val) {\r\n        return this._onValues.indexOf(val) > -1;\r\n    };\r\n    /**\r\n     *\r\n     * @param {boolean} isOn - if all are on of off\r\n     * @param {boolean} [fire=true] - if the callbacks should be fired\r\n     * @private\r\n     */\r\n    FilterBase.prototype._setAllOnOff = function (isOn, fire) {\r\n        if (fire === void 0) { fire = true; }\r\n        this._subChecks.prop('checked', isOn);\r\n        this._onValues = [];\r\n        if (isOn) {\r\n            for (var _i = 0, _a = this._allValues; _i < _a.length; _i++) {\r\n                var v = _a[_i];\r\n                this._onValues.push(v);\r\n            }\r\n        }\r\n        if (fire) {\r\n            this._fireCallbacks();\r\n        }\r\n    };\r\n    FilterBase.prototype._fireCallbacks = function () {\r\n        for (var _i = 0, _a = this._changeCallbacks; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f();\r\n        }\r\n    };\r\n    Object.defineProperty(FilterBase.prototype, \"allValues\", {\r\n        /**\r\n         * array of all values\r\n         * @returns {Array<string>} all values available in the filter\r\n         */\r\n        get: function () {\r\n            var outArray = [];\r\n            for (var _i = 0, _a = this._allValues; _i < _a.length; _i++) {\r\n                var v = _a[_i];\r\n                outArray.push(v);\r\n            }\r\n            return outArray;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FilterBase;\r\n}());\r\nnm.FilterBase = FilterBase;\r\nexports.default = FilterBase;\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar zoomResolutionConvert = __webpack_require__(37);\r\nvar provide_1 = __webpack_require__(0);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * The base layer class\r\n * @abstract\r\n */\r\nvar LayerBase = (function () {\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - url for source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id=makeGuid()] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] - the z index for the layer\r\n     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n     */\r\n    function LayerBase(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        options = options || {};\r\n        if (typeof url !== 'string') {\r\n            throw 'Invalid URL';\r\n        }\r\n        this._url = url;\r\n        this._params = typeof options.params == 'object' ? options.params : {};\r\n        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n        this.id = options.id || makeGuid_1.default();\r\n        this._name = options.name || 'Unnamed Layer';\r\n        this.animate = false;\r\n        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1;\r\n        }\r\n        else if (this._opacity < 0) {\r\n            this._opacity = 0;\r\n        }\r\n        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n        this._source = undefined;\r\n        /**\r\n         *\r\n         * @protected\r\n         */\r\n        this._olLayer = undefined;\r\n        this._loaded = false;\r\n        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n        if (typeof this._maxResolution !== 'undefined') {\r\n            this._maxResolution += 0.00001;\r\n        }\r\n        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n        };\r\n        this._legendContent = '';\r\n        if (this._legendCheckbox) {\r\n            this._legendContent += \"<input type=\\\"checkbox\\\" \" + (this.visible ? 'checked' : '') + \" \" +\r\n                (\"class=\\\"legend-check\\\" id=\\\"\" + this.id + \"-legend-layer-check\\\"><span></span>\");\r\n            this._legendContent += \"<label for=\\\"\" + this.id + \"-legend-layer-check\\\" class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n        }\r\n        else {\r\n            this._legendContent += \"<label class=\\\"legend-layer-name\\\">\" + this.name + \"</label>\";\r\n        }\r\n        this._$legendDiv = null;\r\n        this._applyCollapseCalled = false;\r\n        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n    }\r\n    /**\r\n     * base load function, sets _loaded = true if it is not already\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    LayerBase.prototype._load = function () {\r\n        if (this.loaded == true) {\r\n            return true;\r\n        }\r\n        else {\r\n            this._loaded = true;\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Get the legend html, be sure to only add to the DOM once\r\n     * @returns {string} html for layer wrapped in a div\r\n     */\r\n    LayerBase.prototype.getLegendDiv = function () {\r\n        return \"<div class=\\\"legend-layer-div\\\" id=\\\"\" + this.id + \"-legend-layer-div\\\">\" + this._legendContent + \"</div>\";\r\n    };\r\n    /**\r\n     *\r\n     * @param additionalContent - additional content to add to legend\r\n     * @private\r\n     */\r\n    LayerBase.prototype._addLegendContent = function (additionalContent) {\r\n        if (additionalContent === void 0) { additionalContent = ''; }\r\n        var addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n        if (addCollapse) {\r\n            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n        }\r\n        this._legendContent += additionalContent;\r\n        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n        if (this._$legendDiv.length > 0) {\r\n            this._$legendDiv.append(additionalContent);\r\n            this.applyCollapse();\r\n        }\r\n    };\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=] - additonal content to add\r\n     */\r\n    LayerBase.prototype.addLegendContent = function (additionalContent) {\r\n        this._addLegendContent(additionalContent);\r\n    };\r\n    LayerBase.prototype.applyCollapse = function () {\r\n        if (this._applyCollapseCalled) {\r\n            console.log('collapse already applied');\r\n            return undefined;\r\n        }\r\n        this._$legendDiv = $(\"#\" + this.id + \"-legend-layer-div\");\r\n        if (this._$legendDiv.length > 0) {\r\n            var $expander = this._$legendDiv.find('.legend-items-expander');\r\n            if ($expander.length > 0) {\r\n                this._applyCollapseCalled = true;\r\n                $expander.click(function () {\r\n                    var $this = $(this);\r\n                    $this.siblings('ul').slideToggle();\r\n                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                        $this.removeClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9660;');\r\n                    }\r\n                    else {\r\n                        $this.addClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9654;');\r\n                    }\r\n                });\r\n                if (this._legendCollapse) {\r\n                    $expander.trigger('click');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * trick to refresh the layer\r\n     */\r\n    LayerBase.prototype.refresh = function () {\r\n        if (this.source) {\r\n            this.source.refresh();\r\n        }\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"id\", {\r\n        get: function () {\r\n            return this._id;\r\n        },\r\n        set: function (newId) {\r\n            this._id = newId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"animate\", {\r\n        get: function () {\r\n            return this._animate;\r\n        },\r\n        set: function (animate) {\r\n            this._animate = animate;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"legendContent\", {\r\n        /**\r\n         * get the legend content\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._legendContent;\r\n        },\r\n        /**\r\n         * set the legend content directly\r\n         * @param {string} newVal - new content\r\n         * @protected\r\n         */\r\n        set: function (newVal) {\r\n            this._legendContent = newVal;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"params\", {\r\n        /**\r\n         * get the map get params\r\n         * @type {object}\r\n         */\r\n        get: function () {\r\n            return this._params;\r\n        },\r\n        /**\r\n         * set the map get params\r\n         * @param {object} newParams - new get params\r\n         * @protected\r\n         */\r\n        set: function (newParams) {\r\n            this._params = newParams;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"minResolution\", {\r\n        /**\r\n         * get the minimum resolution\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._minResolution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"maxResolution\", {\r\n        /**\r\n         * get the maximum resolution\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._maxResolution;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"minZoom\", {\r\n        /**\r\n         * get min zoom\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._minZoom;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"maxZoom\", {\r\n        /**\r\n         * get max zoom\r\n         * @type {number|*}\r\n         */\r\n        get: function () {\r\n            return this._maxZoom;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"url\", {\r\n        /**\r\n         * get the url\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._url;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"visible\", {\r\n        /**\r\n         * Get the layer visibility\r\n         * @type {boolean}\r\n         */\r\n        get: function () {\r\n            return this._visible;\r\n        },\r\n        /**\r\n         * set the visibility\r\n         * @param visibility\r\n         */\r\n        set: function (visibility) {\r\n            this.setVisible(visibility);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.setVisible = function (visibility) {\r\n        this._visible = visibility;\r\n        if (this.olLayer) {\r\n            this.olLayer.setVisible(this._visible);\r\n            if (visibility && !this._loaded) {\r\n                this._load();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"opacity\", {\r\n        /**\r\n         * Get the layer opacity\r\n         * @type {number}\r\n         */\r\n        get: function () {\r\n            return this._opacity;\r\n        },\r\n        /**\r\n         * Set the layer opacity\r\n         * @param {number} opacity - layer opacity\r\n         */\r\n        set: function (opacity) {\r\n            this._opacity = opacity;\r\n            if (this.olLayer) {\r\n                this.olLayer.setOpacity(this._opacity);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"name\", {\r\n        /**\r\n         * Get the layer name\r\n         * @type {string}\r\n         */\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        /**\r\n         * set the layer name\r\n         * @param {string} newName - the new name\r\n         */\r\n        set: function (newName) {\r\n            this._name = newName;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"loaded\", {\r\n        /**\r\n         * Check if the layer is loaded\r\n         * @type {boolean}\r\n         */\r\n        get: function () {\r\n            return this._loaded;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBase.prototype, \"source\", {\r\n        /**\r\n         * get the layer source\r\n         * @type {*}\r\n         */\r\n        get: function () {\r\n            return this.getSource();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.getSource = function () {\r\n        return this._source;\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"zIndex\", {\r\n        /**\r\n         * get the z index\r\n         */\r\n        get: function () {\r\n            return this._zIndex;\r\n        },\r\n        /**\r\n         * set the z index\r\n         */\r\n        set: function (newZ) {\r\n            this._zIndex = newZ;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.setZIndex = function (newZ) {\r\n    };\r\n    Object.defineProperty(LayerBase.prototype, \"olLayer\", {\r\n        /**\r\n         * the the ol layer\r\n         */\r\n        get: function () {\r\n            return this.getOlLayer();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBase.prototype.getOlLayer = function () {\r\n        return this._olLayer;\r\n    };\r\n    return LayerBase;\r\n}());\r\nexports.LayerBase = LayerBase;\r\nnm.LayerBase = LayerBase;\r\nexports.default = LayerBase;\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 12/8/2015.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * base interaction\r\n */\r\nvar MapInteractionBase = (function () {\r\n    /**\r\n     * map interaction base\r\n     * @param subtype - the interaction subtype\r\n     */\r\n    function MapInteractionBase(subtype) {\r\n        this._map = null;\r\n        this._initialized = false;\r\n        this._subtype = subtype;\r\n    }\r\n    /**\r\n     * base initializer, returns true for already initialized\r\n     * @param theMap - the ol Map\r\n     * @returns true for already initialized\r\n     */\r\n    MapInteractionBase.prototype.init = function (theMap) {\r\n        if (!this._initialized) {\r\n            this._map = theMap;\r\n            this._initialized = true;\r\n        }\r\n    };\r\n    Object.defineProperty(MapInteractionBase.prototype, \"map\", {\r\n        /**\r\n         * get reference to the ol map object\r\n         * @returns {ol.Map} the map object\r\n         */\r\n        get: function () {\r\n            return this._map;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MapInteractionBase.prototype, \"initialized\", {\r\n        /**\r\n         * get if is initialized\r\n         * @returns {boolean} is initialized\r\n         */\r\n        get: function () {\r\n            return this._initialized;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     * @protected\r\n     */\r\n    MapInteractionBase.prototype._checkInit = function () {\r\n        if (!this.initialized) {\r\n            var msg = this._subtype + \" object not initialized\";\r\n            alert(msg);\r\n            console.log(msg);\r\n            throw msg;\r\n        }\r\n    };\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     */\r\n    MapInteractionBase.prototype.checkInit = function () {\r\n        this._checkInit();\r\n    };\r\n    return MapInteractionBase;\r\n}());\r\nexports.MapInteractionBase = MapInteractionBase;\r\nnm.MapInteractionBase = MapInteractionBase;\r\nexports.default = MapInteractionBase;\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapMoveCls_1 = __webpack_require__(33);\r\n/**\r\n * The single map move object catch is that it is common to multimap pages\r\n * @type {MapMoveCls}\r\n */\r\nexports.mapMove = new mapMoveCls_1.default();\r\nexports.default = exports.mapMove;\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar quickMapBase_1 = __webpack_require__(36);\r\nvar provide_1 = __webpack_require__(0);\r\nvar mapMove_1 = __webpack_require__(18);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param {object} [options={}] config options\r\n * @param {string} [options.divId=map] map div id\r\n * @param {object} [options.center={}] center config object\r\n * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n * @param {number} [options.zoom=7] zoom level\r\n * @param {number} [options.minZoom=undefined] min zoom\r\n * @param {number} [options.maxZoom=undefined] max zoom\r\n * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n * @returns {ol.Map} the ol map\r\n */\r\nfunction quickMap(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var m = quickMapBase_1.quickMapBase(options);\r\n    mapMove_1.default.init(m);\r\n    mapPopup_1.default.init(m);\r\n    return m;\r\n}\r\nexports.quickMap = quickMap;\r\nnm.quickMap = quickMap;\r\nexports.default = quickMap;\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util.checkDefined');\r\n/**\r\n * check if the input is undefined or null\r\n * @param input - input pointer\r\n * @returns true undefined or null\r\n */\r\nfunction undefinedOrNull(input) {\r\n    \"use strict\";\r\n    return (typeof input === 'undefined' || input === null);\r\n}\r\nexports.undefinedOrNull = undefinedOrNull;\r\nnm.undefinedOrNull = undefinedOrNull;\r\n/**\r\n * check if the input is defined and not null\r\n * @param input - input pointer\r\n * @returns true defined and not null\r\n */\r\nfunction definedAndNotNull(input) {\r\n    \"use strict\";\r\n    return !(undefinedOrNull(input));\r\n}\r\nexports.definedAndNotNull = definedAndNotNull;\r\nnm.definedAndNotNull = definedAndNotNull;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 6/7/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('util');\r\n/**\r\n * iterate over the key value pairs of an object\r\n * @example for (let x:KeyValuePair of keyValPairs(object)){..}\r\n * @param {object} obj - the input object\r\n * @returns {Array<keyVals>} - array of key value pairs\r\n */\r\nfunction keyValPairs(obj) {\r\n    var outArray = [];\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        outArray.push({ 'key': key, 'value': obj[key] });\r\n    }\r\n    outArray.sort(function (a, b) {\r\n        \"use strict\";\r\n        return a > b ? 1 : -1;\r\n    });\r\n    return outArray;\r\n}\r\nexports.keyValPairs = keyValPairs;\r\nnm.keyValPairs = keyValPairs;\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar provide_1 = __webpack_require__(0);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('ssa');\r\nvar SsaMapBase = (function () {\r\n    function SsaMapBase(divId) {\r\n        /**\r\n         * @type {JQuery|*|jQuery|HTMLElement}\r\n         */\r\n        this.$mainContainer = $('#' + divId);\r\n        this.$mainContainer.addClass('ssa-map-container');\r\n        /**\r\n         *\r\n         * @type {string}\r\n         * @protected\r\n         */\r\n        this._mapId = makeGuid_1.default();\r\n        this.$mainContainer.append(\"<div id=\\\"\" + this._mapId + \"\\\" class=\\\"ssa-main-map\\\"></div>\");\r\n        $('.ol-zoom-out').html('&#8211;');\r\n        /**\r\n         *\r\n         * @type {MapPopupCls|undefined}\r\n         */\r\n        this.mainMapMove = undefined;\r\n        /**\r\n         *\r\n         * @type {MapPopupCls|undefined}\r\n         */\r\n        this.mainMapPopup = undefined;\r\n    }\r\n    Object.defineProperty(SsaMapBase.prototype, \"mapId\", {\r\n        get: function () {\r\n            return this._mapId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SsaMapBase.prototype, \"$mapDiv\", {\r\n        /**\r\n         *\r\n         * @returns {JQuery|jQuery|HTMLElement}\r\n         * @protected\r\n         */\r\n        get: function () {\r\n            return $(\"#\" + this.mapId);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SsaMapBase;\r\n}());\r\nexports.SsaMapBase = SsaMapBase;\r\nnm.SsaMapBase = SsaMapBase;\r\nexports.default = SsaMapBase;\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/17/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar countyLookup_1 = __webpack_require__(44);\r\nvar $ = __webpack_require__(1);\r\nfunction labelValueHelper(label, val) {\r\n    \"use strict\";\r\n    var outHtml = '<div class=\"col-xs-2\">';\r\n    outHtml += \"<label>\" + label + \"</label>\";\r\n    outHtml += \"<input class=\\\"form-control\\\" type=\\\"text\\\" readonly=\\\"\\\" value=\\\"\" + val + \"\\\">\";\r\n    outHtml += \"</div>\";\r\n    return outHtml;\r\n}\r\nvar CorridorConfig = (function () {\r\n    /**\r\n     *\r\n     * @param {jQuery|HTMLDivElement|*} inputElement\r\n     */\r\n    function CorridorConfig(inputElement) {\r\n        if (!inputElement.val) {\r\n            inputElement = $(inputElement);\r\n        }\r\n        this.ssaId = parseInt(inputElement.find('.corridor-data-ssa-id').val());\r\n        this.snapshotVersion = parseInt(inputElement.find('.corridor-data-snapshot').val());\r\n        this.corridorId = parseInt(inputElement.find('.corridor-data-corridor-id').val());\r\n        this.startCounty = parseInt(inputElement.find('.corridor-data-start-county').val());\r\n        this.endCounty = parseInt(inputElement.find('.corridor-data-end-county').val());\r\n        this.hgwy = inputElement.find('.corridor-data-highway').val();\r\n        this.startRp = inputElement.find('.corridor-data-from-rp').val();\r\n        this.endRp = inputElement.find('.corridor-data-to-rp').val();\r\n        this.startPdp = parseInt(inputElement.find('.corridor-data-from-pdp').val());\r\n        this.endPdp = parseInt(inputElement.find('.corridor-data-to-pdp').val());\r\n        this.routeId = parseInt(inputElement.find('.corridor-data-route-id').val());\r\n    }\r\n    /**\r\n     * @returns {string} bootstrap formatted corridor description\r\n     */\r\n    CorridorConfig.prototype.bootstrapHtml = function (index) {\r\n        index++;\r\n        var outHtml = '<div class=\"row ssa-corridor-info-row\">';\r\n        outHtml += '<div class=\"col-xs-2\">';\r\n        outHtml += \"<label>Corridor #\" + index + \"</label>\";\r\n        outHtml += '</div>';\r\n        outHtml += labelValueHelper('Highway', this.hgwy);\r\n        outHtml += labelValueHelper('Start County', countyLookup_1.getCountyById(this.startCounty));\r\n        outHtml += labelValueHelper('End County', countyLookup_1.getCountyById(this.endCounty));\r\n        outHtml += labelValueHelper('Start RP', this.startRp);\r\n        outHtml += labelValueHelper('End RP', this.endRp);\r\n        outHtml += '</div>';\r\n        return outHtml;\r\n    };\r\n    CorridorConfig.prototype.toString = function () {\r\n        return \"CorId \" + this.corridorId + \" \" + this.startRp + \" - \" + this.endRp;\r\n    };\r\n    return CorridorConfig;\r\n}());\r\nexports.default = CorridorConfig;\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nvar FilterBase_1 = __webpack_require__(15);\r\nvar FilterControllingCriteria = (function (_super) {\r\n    __extends(FilterControllingCriteria, _super);\r\n    function FilterControllingCriteria() {\r\n        return _super.call(this, 'filter-controlling-criteria', 'filter-controlling-criteria-sub', true) || this;\r\n    }\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccDesignSpeedOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccDesignSpeed');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccLaneWidthOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccLaneWidth');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccShoulderWidthOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccShoulderWidth');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccHorizontalCurveOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccHorizontalCurve');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccSuperelevationOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccSuperelevation');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccMaximumGradeOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccMaximumGrade');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccStoppingSightOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccStoppingSight');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccCrossSlopeOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccCrossSlope');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccVerticalClearanceOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccVerticalClearance');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterControllingCriteria.prototype, \"ccDesignLoadingOn\", {\r\n        get: function () {\r\n            return this.valIsOn('ccDesignLoading');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FilterControllingCriteria;\r\n}(FilterBase_1.default));\r\nexports.FilterControllingCriteria = FilterControllingCriteria;\r\nexports.default = new FilterControllingCriteria();\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nvar FilterBase_1 = __webpack_require__(15);\r\nexports.kColor = 'rgb(255,0,0)';\r\nexports.aColor = 'rgb(255,165,0)';\r\nexports.bColor = 'rgb(255,255,0)';\r\nexports.cColor = 'rgb(153,255,153)';\r\nexports.oColor = 'rgb(0,0,255)';\r\nvar FilterCrash = (function (_super) {\r\n    __extends(FilterCrash, _super);\r\n    function FilterCrash() {\r\n        return _super.call(this, 'filter-crash', 'filter-crash-sub', false) || this;\r\n    }\r\n    /**\r\n     *\r\n     * @param {string} val - the lookup value\r\n     * @returns {string|null} crash color or null if the crash type should be suppressed\r\n     */\r\n    FilterCrash.prototype.getCrashColor = function (val) {\r\n        var isActive = _super.prototype.valIsOn.call(this, val);\r\n        if (!isActive) {\r\n            return null;\r\n        }\r\n        var color = {\r\n            'K': exports.kColor,\r\n            'A': exports.aColor,\r\n            'B': exports.bColor,\r\n            'C': exports.cColor,\r\n            'P': exports.oColor\r\n        }[val];\r\n        return color || 'rgb(128,128,128)';\r\n    };\r\n    return FilterCrash;\r\n}(FilterBase_1.default));\r\nexports.FilterCrash = FilterCrash;\r\nexports.default = new FilterCrash();\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nvar FilterBase_1 = __webpack_require__(15);\r\nvar FilterMmFlag = (function (_super) {\r\n    __extends(FilterMmFlag, _super);\r\n    function FilterMmFlag() {\r\n        return _super.call(this, 'mm-flags', 'mm-flags-sub', true) || this;\r\n    }\r\n    Object.defineProperty(FilterMmFlag.prototype, \"mmRateFlagOn\", {\r\n        get: function () {\r\n            return this.valIsOn('rateFlag');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FilterMmFlag.prototype, \"mmKabFlagOn\", {\r\n        get: function () {\r\n            return this.valIsOn('kabCrshFlag');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FilterMmFlag;\r\n}(FilterBase_1.default));\r\nexports.FilterMmFlag = FilterMmFlag;\r\nexports.default = new FilterMmFlag();\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SsaMapBase_1 = __webpack_require__(22);\r\nvar quickMap_1 = __webpack_require__(19);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar provide_1 = __webpack_require__(0);\r\nvar PickerCollection_1 = __webpack_require__(41);\r\nvar CorridorCollection_1 = __webpack_require__(39);\r\nvar $ = __webpack_require__(1);\r\n__webpack_require__(1);\r\nvar nm = provide_1.default('ssa');\r\nvar SsaMapCreate = (function (_super) {\r\n    __extends(SsaMapCreate, _super);\r\n    /**\r\n     *\r\n     * @param {string} divId\r\n     * @param {string} corridorDataContainer\r\n     * @param {string} [dataClass=corridor-data] - class selector for the corridor data elements\r\n     */\r\n    function SsaMapCreate(divId, corridorDataContainer, dataClass) {\r\n        var _this = _super.call(this, divId) || this;\r\n        _this.$mainContainer.prepend(\"<div class=\\\"ssa-map-sidebar\\\"></div>\");\r\n        _this.mainMap = quickMap_1.default({\r\n            divId: _this.mapId,\r\n            minZoom: 6,\r\n            zoom: 6,\r\n            fullScreen: true,\r\n            addGeocode: true\r\n        });\r\n        _this.mainMapPopup = mapPopup_1.mapPopup;\r\n        _this.$sideBar = _this.$mainContainer.find('.ssa-map-sidebar');\r\n        var afterChange = function () {\r\n            _this._afterChange();\r\n        };\r\n        _this.pickerCollection = new PickerCollection_1.default(_this.$sideBar, _this.mainMap);\r\n        var corridorsGuid = makeGuid_1.default();\r\n        _this.$sideBar.append(\"<div id=\\\"\" + corridorsGuid + \"\\\"></div>\");\r\n        _this.corridorCollection = new CorridorCollection_1.default(_this.$sideBar, _this.mainMap, corridorDataContainer, afterChange, dataClass);\r\n        _this.pickerCollection.corridorCollection = _this.corridorCollection;\r\n        _this.corridorCollection.loadExistingCorridors();\r\n        return _this;\r\n    }\r\n    SsaMapCreate.prototype._afterChange = function () {\r\n        var __this = this;\r\n        this.corridorCollection.$innerContainer.find('.corridor-zoom').click(function () {\r\n            var corridorId = $(this).attr('data-corridor');\r\n            var cor = __this.corridorCollection.getCorridorById(corridorId);\r\n            __this.mainMap.getView().fit(cor.extent, __this.mainMap.getSize());\r\n        });\r\n        this.corridorCollection.$innerContainer.find('.corridor-delete').click(function () {\r\n            var corridorId = $(this).attr('data-corridor');\r\n            __this.corridorCollection.removeCorridor(corridorId);\r\n        });\r\n        this.corridorCollection.$innerContainer.find('.corridor-edit').click(function () {\r\n            __this.pickerCollection.$createCorridorButton.prop('disabled', true);\r\n            var corridorId = $(this).attr('data-corridor');\r\n            var cor = __this.corridorCollection.getCorridorById(corridorId);\r\n            __this.pickerCollection.startPicker(cor);\r\n            $(this).closest('.corridor-tr').addClass('corridor-tr-selected');\r\n        });\r\n    };\r\n    return SsaMapCreate;\r\n}(SsaMapBase_1.default));\r\nexports.SsaMapCreate = SsaMapCreate;\r\nnm.SsaMapCreate = SsaMapCreate;\r\nwindow['SsaMapCreate'] = SsaMapCreate;\r\nexports.default = SsaMapCreate;\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SsaMapBase_1 = __webpack_require__(22);\r\nvar quickMap_1 = __webpack_require__(19);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar provide_1 = __webpack_require__(0);\r\nvar CorridorConfig_1 = __webpack_require__(23);\r\nvar Corridor_1 = __webpack_require__(14);\r\nvar calcExtent = __webpack_require__(9);\r\nvar crashData_1 = __webpack_require__(43);\r\nvar mapToBase64_1 = __webpack_require__(35);\r\nvar Deficiency_1 = __webpack_require__(40);\r\nvar constants = __webpack_require__(10);\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar $ = __webpack_require__(1);\r\nvar popup_1 = __webpack_require__(11);\r\n// import controllingCriteria from '../collections/controllingCriteria';\r\n// import mmFlags from '../collections/mmFlags';\r\nvar nm = provide_1.default('ssa');\r\nvar mmPopupContentWithCrash = function (props) {\r\n    \"use strict\";\r\n    var returnHtml = '';\r\n    returnHtml += crashData_1.default.getCrashSummary(props['pdpId']);\r\n    returnHtml += popup_1.mmPopupContent(props);\r\n    return returnHtml;\r\n};\r\nvar SsaMapView = (function (_super) {\r\n    __extends(SsaMapView, _super);\r\n    /**\r\n     *\r\n     * @param {string} divId - container for the map\r\n     * @param {string} [dataClass=corridor-data] - class selector for the corridor data elements\r\n     * @param {string} [infoAnchorId=ssa-corridor-info-anchor] - id of element after which to insert the info rows\r\n     */\r\n    function SsaMapView(divId, dataClass, infoAnchorId) {\r\n        var _this = _super.call(this, divId) || this;\r\n        _this._ssaId = parseInt($('#hidden-ssa-id').val());\r\n        _this._snap = parseInt($('#hidden-snapshot-id').val());\r\n        _this.getMapLinkId = 'get-map-link';\r\n        _this.mapImageName = \"map-image-id-\" + _this._ssaId + \"-ver-\" + _this._snap + \".png\";\r\n        var linkHtml = \"<a id=\\\"\" + _this.getMapLinkId + \"\\\" href=\\\"#\\\" \" +\r\n            (\"download=\\\"\" + _this.mapImageName + \"\\\" \") +\r\n            \"style=\\\"display: none\\\"></a>\";\r\n        $('#' + _this.mapId).append(linkHtml);\r\n        _this.mainMap = quickMap_1.default({\r\n            divId: _this.mapId,\r\n            minZoom: 6,\r\n            zoom: 6,\r\n            fullScreen: true,\r\n            addGeocode: true\r\n        });\r\n        var summaryListHtml = '<div class=\"segment-index-summary\">';\r\n        summaryListHtml += '<div class=\"segment-index-summary-toggles\">';\r\n        summaryListHtml += \"<span class=\\\"segment-index-summary-toggle segment-index-summary-zoom\\\" title=\\\"Zoom To Initial Extent\\\">&#8634;</span>\";\r\n        summaryListHtml += \"<span class=\\\"segment-index-summary-toggle segment-index-summary-close\\\" title=\\\"Hide Legend\\\">&#8598;</span>\";\r\n        summaryListHtml += \"<span class=\\\"segment-index-summary-toggle segment-index-summary-open\\\" title=\\\"Show Legend\\\">&#8600;</span>\";\r\n        summaryListHtml += '</div>';\r\n        // summaryListHtml += `<h4 style=\"color: ${constants.mmFlagColor}\">Metamanager Flags</h4>`;\r\n        // summaryListHtml += `<ul id=\"${constants.mmFlagListId}\"></ul>`;\r\n        // summaryListHtml += `<h4 style=\"color: ${constants.controllingCriteriaColor}\">Controlling Criteria</h4>`;\r\n        // summaryListHtml += `<ul id=\"${constants.ccListId}\"></ul>`;\r\n        summaryListHtml += \"<h4 style=\\\"color: \" + constants.defColor + \"; font-size: large\\\">Flags and Deficiencies</h4>\";\r\n        summaryListHtml += \"<ul id=\\\"\" + constants.defListId + \"\\\"></ul>\";\r\n        summaryListHtml += '</div>';\r\n        _this.$mapDiv.append(summaryListHtml);\r\n        var $legendDiv = _this.$mapDiv.find('.segment-index-summary');\r\n        var $closeButton = $legendDiv.find('.segment-index-summary-close');\r\n        var $openButton = $legendDiv.find('.segment-index-summary-open');\r\n        var $zoomExtent = $legendDiv.find('.segment-index-summary-zoom');\r\n        $openButton.hide();\r\n        var hideShowWorking = false;\r\n        var originalWidth = $legendDiv.width();\r\n        var originalMinHeight = $legendDiv.css('min-height');\r\n        var originalPadding = $legendDiv.css('padding');\r\n        $closeButton.click(function () {\r\n            if (hideShowWorking) {\r\n                return;\r\n            }\r\n            hideShowWorking = true;\r\n            $legendDiv.find('ul, h3, h4, h5').fadeOut(100, function () {\r\n                $legendDiv.css('padding', '2px');\r\n                $legendDiv.width('auto');\r\n                $legendDiv.css('min-height', 'auto');\r\n                $closeButton.hide();\r\n                $openButton.show();\r\n                hideShowWorking = false;\r\n            });\r\n        });\r\n        $openButton.click(function () {\r\n            if (hideShowWorking) {\r\n                return;\r\n            }\r\n            hideShowWorking = true;\r\n            $legendDiv.css('padding', originalPadding);\r\n            $legendDiv.width(originalWidth);\r\n            $legendDiv.css('min-height', originalMinHeight);\r\n            $legendDiv.find('ul, h3, h4, h5').fadeIn(100, function () {\r\n                $closeButton.show();\r\n                $openButton.hide();\r\n                hideShowWorking = false;\r\n            });\r\n        });\r\n        $zoomExtent.click(function () {\r\n            _this._fitExtent();\r\n        });\r\n        _this.mainMapPopup = mapPopup_1.default;\r\n        dataClass = typeof dataClass == 'string' ? dataClass : 'corridor-data';\r\n        infoAnchorId = typeof infoAnchorId == 'string' ? infoAnchorId : 'ssa-corridor-info-anchor';\r\n        dataClass = '.' + dataClass;\r\n        $(_this.mainMap.getTargetElement()).append('<div class=\"crashes-loaded-msg\">Crashes Loaded</div>');\r\n        /**\r\n         *\r\n         * @type {Array<CorridorConfig>}\r\n         */\r\n        var corridorConfigs = [];\r\n        /**\r\n         *\r\n         * @type {Array<Corridor>}\r\n         */\r\n        _this._corridorArray = [];\r\n        // parse the data from the hidden input elements\r\n        $(dataClass).each(function (n, el) {\r\n            corridorConfigs.push(new CorridorConfig_1.default(el));\r\n        });\r\n        _this.createdCorridorsLength = corridorConfigs.length;\r\n        _this.loadedCorridorsLength = 0;\r\n        var returnLookup = {};\r\n        var returnArr = [];\r\n        ajaxGetters_1.default.getCcGeom(_this._ssaId, _this._snap, function (d) {\r\n            for (var _i = 0, _a = d['features']; _i < _a.length; _i++) {\r\n                var f = _a[_i];\r\n                var corId = f['properties']['corridorId'].toFixed();\r\n                if (!returnLookup[corId]) {\r\n                    returnArr.push(corId);\r\n                    returnLookup[corId] = { crs: d['crs'], type: d['type'], features: [] };\r\n                }\r\n                returnLookup[corId].features.push(f);\r\n            }\r\n            var outHtml = '';\r\n            for (var i = 0; i < returnArr.length; i++) {\r\n                var conf = corridorConfigs[i];\r\n                outHtml += conf.bootstrapHtml(i);\r\n                var corridor = new Corridor_1.default(conf.startPdp, conf.endPdp, conf.startRp, conf.endRp, conf.startCounty, conf.endCounty, conf.hgwy, conf.routeId, {\r\n                    color: 'black',\r\n                    jsonFeatures: returnLookup[i.toFixed()],\r\n                    idx: i + 1\r\n                });\r\n                // mmFlags.addCorridor(corridor);\r\n                // controllingCriteria.addCorridor(corridor);\r\n                Deficiency_1.default.addCorridor(corridor);\r\n                _this._corridorArray.push(corridor);\r\n                _this.mainMap.addLayer(corridor.olLayer);\r\n                _this.mainMap.addLayer(corridor.nodeLayer.olLayer);\r\n                _this.mainMapPopup.addVectorPopup(corridor.layer, mmPopupContentWithCrash);\r\n            }\r\n            _this._afterCorridorLoad();\r\n            $('#' + infoAnchorId).after(outHtml);\r\n        });\r\n        // mmFlags.init(this.mainMap);\r\n        // controllingCriteria.init(this.mainMap);\r\n        Deficiency_1.default.init(_this.mainMap);\r\n        return _this;\r\n    }\r\n    SsaMapView.prototype.getMapData = function (callback, options) {\r\n        options = options || {};\r\n        options.delay = typeof options.delay === 'number' ? options.delay : 2000;\r\n        options.layers = this._fitExtent();\r\n        mapToBase64_1.mapToBase64(this.mainMap, callback, options);\r\n    };\r\n    SsaMapView.prototype._afterCorridorLoad = function () {\r\n        this._fitExtent();\r\n        crashData_1.default.init(this.mainMap, this._ssaId, this._snap);\r\n        // mmFlags.afterLoad();\r\n        // controllingCriteria.afterLoad();\r\n        Deficiency_1.default.afterLoad();\r\n    };\r\n    SsaMapView.prototype._fitExtent = function () {\r\n        var lyrs = [];\r\n        for (var _i = 0, _a = this._corridorArray; _i < _a.length; _i++) {\r\n            var c = _a[_i];\r\n            lyrs.push(c.layer);\r\n        }\r\n        if (lyrs.length > 0) {\r\n            calcExtent.fitToMap(lyrs, this.mainMap);\r\n        }\r\n        return lyrs;\r\n    };\r\n    return SsaMapView;\r\n}(SsaMapBase_1.default));\r\nexports.SsaMapView = SsaMapView;\r\nnm.SsaMapView = SsaMapView;\r\nwindow['SsaMapView'] = SsaMapView;\r\nexports.default = SsaMapView;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar LayerBase_1 = __webpack_require__(16);\r\nvar mapMove_1 = __webpack_require__(18);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * The Vector layer base\r\n * @augments LayerBase\r\n * @abstract\r\n */\r\nvar LayerBaseVector = (function (_super) {\r\n    __extends(LayerBaseVector, _super);\r\n    /**\r\n     * The base vector layer\r\n     * @param {string} url - pass an empty string to prevent default load and add from a json source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     *\r\n     * @param {boolean} [options.autoLoad=false] if the layer should auto load if not visible\r\n     * @param {object} [options.style=undefined] the layer style, use openlayers default style if not defined\r\n     * @param {boolean} [options.onDemand=false] if the layer should be loaded by extent on map move\r\n     * @param {number} [options.onDemandDelay=300] delay before the map move callback should be called\r\n     * @param {mapMoveMakeGetParams} [options.mapMoveMakeGetParams=function(lyr, extent, zoomLevel){}] function to create additional map move params\r\n     * @param {MapMoveCls} [options.mapMoveObj=mapMove] alternate map move object for use with multi map pages\r\n     *\r\n     */\r\n    function LayerBaseVector(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, url, options) || this;\r\n        options = options;\r\n        //prevent regular load if no url has been provided\r\n        if (_this.url.trim() == '') {\r\n            _this._loaded = true;\r\n        }\r\n        _this._style = typeof options.style == 'undefined' ? undefined : options.style;\r\n        if (_this.visible) {\r\n            _this._autoLoad = true;\r\n        }\r\n        else {\r\n            _this._autoLoad = (typeof options['autoLoad'] == 'boolean' ? options['autoLoad'] : false);\r\n        }\r\n        _this._onDemand = typeof options.onDemand == 'boolean' ? options.onDemand : false;\r\n        _this._onDemandDelay = typeof options.onDemandDelay == 'number' ? options.onDemandDelay : 300;\r\n        if (options.mapMoveObj) {\r\n            _this._mapMove = options.mapMoveObj;\r\n        }\r\n        else {\r\n            _this._mapMove = _this._onDemand ? mapMove_1.default : undefined;\r\n        }\r\n        _this._mapMoveMakeGetParams = typeof options.mapMoveMakeGetParams == 'function' ? options.mapMoveMakeGetParams :\r\n            function () { return {}; };\r\n        if (_this._onDemand) {\r\n            _this._loaded = true;\r\n            _this._mapMoveParams = {};\r\n            _this._mapMove.checkInit();\r\n            _this._mapMove.addVectorLayer(_this);\r\n        }\r\n        _this._source = new ol.source.Vector();\r\n        _this._olLayer = new ol.layer.Vector({\r\n            source: _this._source,\r\n            visible: _this.visible,\r\n            style: _this.style,\r\n            minResolution: _this._minResolution,\r\n            maxResolution: _this._maxResolution,\r\n            renderOrder: options.renderOrder\r\n        });\r\n        _this.olLayer.setZIndex(_this._zIndex);\r\n        _this._projectionMap = null;\r\n        _this._projection4326 = new ol.proj.Projection({ code: \"EPSG:4326\" });\r\n        _this._olLayer.setOpacity(_this.opacity);\r\n        return _this;\r\n    }\r\n    /**\r\n     * dummy to be overridden\r\n     * @param {object} featureCollection - geojson or esrijson object\r\n     */\r\n    LayerBaseVector.prototype.addFeatures = function (featureCollection) {\r\n        console.log('Layer vector base addFeatures is a placeholder and does nothing');\r\n    };\r\n    /**\r\n     * Before call to map move callback, can prevent call by returning false\r\n     * @param {number} zoom - zoom level\r\n     * @param {string} [evtType=undefined] undefined for initial load, otherwise one of 'change:center', 'change:resolution'\r\n     * @returns {boolean} if the call should proceed\r\n     */\r\n    LayerBaseVector.prototype.mapMoveBefore = function (zoom, evtType) {\r\n        if (this.minZoom !== undefined) {\r\n            if (zoom < this.minZoom) {\r\n                return false;\r\n            }\r\n        }\r\n        if (this.maxZoom !== undefined) {\r\n            if (zoom > this.maxZoom) {\r\n                return false;\r\n            }\r\n        }\r\n        return this.visible;\r\n    };\r\n    /**\r\n     * callback to generate the parameters passed in the get request\r\n     * @param {object} extent - extent object\r\n     * @param {number} extent.minX - minX\r\n     * @param {number} extent.minY - minY\r\n     * @param {number} extent.maxX - maxX\r\n     * @param {number} extent.maxY - maxY\r\n     * @param {number} zoomLevel - zoom level\r\n     */\r\n    LayerBaseVector.prototype.mapMoveMakeGetParams = function (extent, zoomLevel) {\r\n        this._mapMoveParams = {};\r\n        $.extend(this._mapMoveParams, this.params);\r\n        $.extend(this._mapMoveParams, this._mapMoveMakeGetParams(this, extent, zoomLevel));\r\n    };\r\n    /**\r\n     * callback function on map move\r\n     * @param {object} d - the json response\r\n     */\r\n    LayerBaseVector.prototype.mapMoveCallback = function (d) {\r\n        if (this.source) {\r\n            this._source.clear();\r\n        }\r\n    };\r\n    /**\r\n     * clear features in the layer\r\n     */\r\n    LayerBaseVector.prototype.clear = function () {\r\n        if (this._source) {\r\n            this._source.clear();\r\n        }\r\n    };\r\n    Object.defineProperty(LayerBaseVector.prototype, \"onDemandDelay\", {\r\n        /**\r\n         * get on demand delay in miliseconds\r\n         */\r\n        get: function () {\r\n            return this._onDemandDelay;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"autoLoad\", {\r\n        /**\r\n         * get if the layer is autoloaded\r\n         */\r\n        get: function () {\r\n            return this._autoLoad;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"style\", {\r\n        /**\r\n         * get the style definition\r\n         */\r\n        get: function () {\r\n            return this._style;\r\n        },\r\n        /**\r\n         * set the style\r\n         * @param style - the style or function\r\n         */\r\n        set: function (style) {\r\n            this._style = style;\r\n            this.olLayer.setStyle(this._style);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"mapCrs\", {\r\n        /**\r\n         * get the map CRS if it is defined by the map move object\r\n         */\r\n        get: function () {\r\n            return this.mapProj == null ? null : this.mapProj.getCode();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"mapProj\", {\r\n        get: function () {\r\n            if (this._projectionMap != null) {\r\n                return this._projectionMap;\r\n            }\r\n            if (this._mapMove) {\r\n                this._projectionMap = this._mapMove.map.getView().getProjection();\r\n                return this._projectionMap;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"mapMove\", {\r\n        /**\r\n         * get the map move object\r\n         * @type {MapMoveCls|*}\r\n         */\r\n        get: function () {\r\n            return this._mapMove;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"mapMoveParams\", {\r\n        /**\r\n         * map move params\r\n         * @type {object}\r\n         */\r\n        get: function () {\r\n            return this._mapMoveParams;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"visible\", {\r\n        get: function () {\r\n            return this._visible;\r\n        },\r\n        /**\r\n         * Set the layer visibility\r\n         * @type {boolean}\r\n         * @override\r\n         */\r\n        set: function (visibility) {\r\n            _super.prototype.setVisible.call(this, visibility);\r\n            if (this._onDemand) {\r\n                this.mapMove.triggerLyrLoad(this);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"source\", {\r\n        /**\r\n         * get the layer vector source\r\n         * @override\r\n         */\r\n        get: function () {\r\n            return this.getSource();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"features\", {\r\n        /**\r\n         * array of ol features\r\n         */\r\n        get: function () {\r\n            return this.source.getFeatures();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerBaseVector.prototype, \"olLayer\", {\r\n        /**\r\n         *\r\n         */\r\n        get: function () {\r\n            return _super.prototype.getOlLayer.call(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LayerBaseVector.prototype.setZIndex = function (newZ) {\r\n        this.olLayer.setZIndex(newZ);\r\n    };\r\n    return LayerBaseVector;\r\n}(LayerBase_1.LayerBase));\r\nexports.LayerBaseVector = LayerBaseVector;\r\nnm.LayerBaseVector = LayerBaseVector;\r\nexports.default = LayerBaseVector;\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 12/7/2015.\r\n */\r\nvar LayerBase_1 = __webpack_require__(16);\r\nvar esriToOl = __webpack_require__(31);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('layers');\r\n/**\r\n * Helper to return the url to the service on the production server\r\n * @param {string} folder\r\n * @param {string} service\r\n * @returns {string}\r\n */\r\nfunction makeServiceUrl(folder, service) {\r\n    return \"https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/\" + folder + \"/\" + service + \"/MapServer\";\r\n}\r\nexports.makeServiceUrl = makeServiceUrl;\r\nfunction localCacheUrl(folder, service) {\r\n    var loc = window.location.href;\r\n    var url = \"/mapserver/\" + folder + \"/\" + service;\r\n    if (loc.indexOf('transportal.cee.wisc.edu') > -1) {\r\n        if (loc.toLowerCase().indexOf('webmapsstage') > -1) {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmapsstage' + url;\r\n        }\r\n        else {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmaps' + url;\r\n        }\r\n    }\r\n    return url;\r\n}\r\nexports.localCacheUrl = localCacheUrl;\r\n/**\r\n * esri mapserver layer\r\n * @augments LayerBase\r\n */\r\nvar LayerEsriMapServer = (function (_super) {\r\n    __extends(LayerEsriMapServer, _super);\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - resource url\r\n     * @param {object} [options] - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n     */\r\n    function LayerEsriMapServer(url, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, url, options) || this;\r\n        _this._source = new ol.source.TileArcGISRest({\r\n            url: _this.url == '' ? undefined : _this.url,\r\n            params: typeof options.showLayers == 'undefined' ? undefined : { layers: 'show:' + options.showLayers.join(',') }\r\n        });\r\n        _this._showLayers = options.showLayers || [];\r\n        _this._olLayer = new ol.layer.Tile({\r\n            source: _this._source,\r\n            visible: _this.visible,\r\n            opacity: _this.opacity,\r\n            minResolution: _this._minResolution,\r\n            maxResolution: _this._maxResolution\r\n        });\r\n        _this._olLayer.setZIndex(_this._zIndex);\r\n        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n        _this._esriFormat = new ol.format.EsriJSON();\r\n        _this._popupRequest = null;\r\n        options.getLegend = typeof options.getLegend === 'boolean' ? options.getLegend : true;\r\n        if (options.getLegend) {\r\n            _this.addLegendContent();\r\n        }\r\n        if (options.addPopup) {\r\n            mapPopup_1.default.addMapServicePopup(_this);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=''] additional content for legend\r\n     */\r\n    LayerEsriMapServer.prototype.addLegendContent = function (additionalContent) {\r\n        var _this = this;\r\n        var urlCopy = this.url;\r\n        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n            urlCopy += '/';\r\n        }\r\n        urlCopy += 'legend?f=pjson&callback=?';\r\n        $.get(urlCopy, {}, function (d) {\r\n            var newHtml = esriToOl.makeMapServiceLegend(d, _this._showLayers);\r\n            _super.prototype.addLegendContent.call(_this, newHtml);\r\n        }, 'json');\r\n    };\r\n    LayerEsriMapServer.prototype.getPopupInfo = function (queryParams) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        var urlCopy = this.url;\r\n        if (urlCopy[urlCopy.length - 1] != '/') {\r\n            urlCopy += '/';\r\n        }\r\n        urlCopy += 'identify?callback=?';\r\n        var __this = this;\r\n        if (this._popupRequest != null) {\r\n            this._popupRequest.abort();\r\n        }\r\n        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n            for (var _i = 0, _a = d['results']; _i < _a.length; _i++) {\r\n                var r = _a[_i];\r\n                var popupHtml = '<table class=\"esri-popup-table\">';\r\n                for (var a in r['attributes']) {\r\n                    if (r['attributes'].hasOwnProperty(a)) {\r\n                        var attrVal = r['attributes'][a];\r\n                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n                            continue;\r\n                        }\r\n                        var attr = a;\r\n                        if (attr.length > 14) {\r\n                            attr = attr.slice(0, 11) + '...';\r\n                        }\r\n                        popupHtml += \"<tr><td>\" + attr + \"</td><td>\" + attrVal + \"</td></tr>\";\r\n                    }\r\n                }\r\n                popupHtml += '</table>';\r\n                mapPopup_1.default.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n            }\r\n        }, 'json');\r\n        this._popupRequest.always(function () {\r\n            __this._popupRequest = null;\r\n        });\r\n    };\r\n    Object.defineProperty(LayerEsriMapServer.prototype, \"source\", {\r\n        /**\r\n         *\r\n         * @returns {ol.source.TileArcGISRest} the vector source\r\n         */\r\n        get: function () {\r\n            return _super.prototype.getSource.call(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LayerEsriMapServer.prototype, \"olLayer\", {\r\n        /**\r\n         *\r\n         * @returns the ol layer\r\n         */\r\n        get: function () {\r\n            return _super.prototype.getOlLayer.call(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LayerEsriMapServer;\r\n}(LayerBase_1.LayerBase));\r\nexports.LayerEsriMapServer = LayerEsriMapServer;\r\nnm.LayerEsriMapServer = LayerEsriMapServer;\r\nexports.default = LayerEsriMapServer;\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 1/4/2016.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar nm = provide_1.default('olHelpers.esriToOlStyle');\r\n/**\r\n *\r\n * @param {Array<number>} colorArray - input color array\r\n * @param {number} opacity - the opacity 0 to 1\r\n * @returns {string} rgba string\r\n * @private\r\n */\r\nfunction _colorArrayToRgba(colorArray, opacity) {\r\n    \"use strict\";\r\n    return \"rgba(\" + colorArray[0] + \",\" + colorArray[1] + \",\" + colorArray[2] + \",\" + opacity + \")\";\r\n}\r\n/**\r\n * escape html charcters\r\n * @param {string} str - input string\r\n * @returns {string} escaped string\r\n */\r\nfunction htmlEscape(str) {\r\n    return String(str)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#39;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;');\r\n}\r\nnm.htmlEscape = htmlEscape;\r\nvar CommonSymbol = (function () {\r\n    /**\r\n     *\r\n     * @param symbolObj\r\n     * @param {number} opacity\r\n     */\r\n    function CommonSymbol(symbolObj, opacity) {\r\n        this.symbolObj = symbolObj;\r\n        this.opacity = opacity;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n    return CommonSymbol;\r\n}());\r\nvar PointSymbol = (function (_super) {\r\n    __extends(PointSymbol, _super);\r\n    function PointSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj.type) {\r\n            case 'esriSMS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n                var outlineWidth = _this.symbolObj.outline.width;\r\n                var radius = _this.symbolObj.size;\r\n                _this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        fill: new ol.style.Fill({\r\n                            color: innerColor\r\n                        }),\r\n                        stroke: new ol.style.Stroke({ color: outerColor, width: outlineWidth })\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" style=\\\"color: \" + innerColor + \"\\\">&#9679;</span>\";\r\n                break;\r\n            case 'esriPMS':\r\n                _this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Icon({ src: \"data:image/png;base64,\" + _this.symbolObj['imageData'] })\r\n                });\r\n                _this.legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + _this.symbolObj['imageData'] + \"\\\">\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Point symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return PointSymbol;\r\n}(CommonSymbol));\r\nvar LineSymbol = (function (_super) {\r\n    __extends(LineSymbol, _super);\r\n    function LineSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj.type) {\r\n            case 'esriSLS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var lineWidth = _this.symbolObj.width;\r\n                _this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: innerColor,\r\n                        //lineDash: [4],\r\n                        width: lineWidth\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n                _this.legendHtml += \"style=\\\"\";\r\n                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n                _this.legendHtml += \"width: 40px;\";\r\n                _this.legendHtml += \"height: 4px;\";\r\n                _this.legendHtml += \"position: relative;\";\r\n                _this.legendHtml += \"display: inline-block;\";\r\n                _this.legendHtml += \"top: -1px;\";\r\n                _this.legendHtml += \"\\\"></span>\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Line symbol does not handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return LineSymbol;\r\n}(CommonSymbol));\r\nvar PolygonSymbol = (function (_super) {\r\n    __extends(PolygonSymbol, _super);\r\n    function PolygonSymbol(symbolObj, opacity) {\r\n        var _this = _super.call(this, symbolObj, opacity) || this;\r\n        switch (_this.symbolObj['type']) {\r\n            case 'esriSFS':\r\n                var innerColor = _colorArrayToRgba(_this.symbolObj.color, _this.opacity);\r\n                var outerColor = _colorArrayToRgba(_this.symbolObj.outline.color, _this.opacity);\r\n                var outlineWidth = _this.symbolObj.outline.width;\r\n                _this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: outerColor,\r\n                        //lineDash: [4],\r\n                        width: outlineWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: innerColor\r\n                    })\r\n                });\r\n                _this.legendHtml = \"<span class=\\\"legend-layer-icon\\\" \";\r\n                _this.legendHtml += \"style=\\\"\";\r\n                _this.legendHtml += \"background-color: \" + innerColor + \";\";\r\n                _this.legendHtml += \"border: solid \" + outerColor + \" 1px;\";\r\n                _this.legendHtml += \"width: 40px;\";\r\n                _this.legendHtml += \"height: 9px;\";\r\n                _this.legendHtml += \"position: relative;\";\r\n                _this.legendHtml += \"display: inline-block;\";\r\n                _this.legendHtml += \"top: 2px;\";\r\n                _this.legendHtml += \"\\\"></span>\";\r\n                break;\r\n            default:\r\n                console.log(_this.symbolObj);\r\n                alert('Polygon symbol does handle symbol type: ' + _this.symbolObj['type']);\r\n        }\r\n        return _this;\r\n    }\r\n    return PolygonSymbol;\r\n}(CommonSymbol));\r\nvar SymbolGenerator = (function () {\r\n    function SymbolGenerator(esriResponse) {\r\n        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n        this.renderer = esriResponse.drawingInfo.renderer;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n    return SymbolGenerator;\r\n}());\r\nvar SingleSymbol = (function (_super) {\r\n    __extends(SingleSymbol, _super);\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the symbol class to use\r\n     */\r\n    function SingleSymbol(esriResponse, SymbolClass) {\r\n        var _this = _super.call(this, esriResponse) || this;\r\n        _this.symbol = _this.renderer.symbol;\r\n        var symbolObj = new SymbolClass(_this.symbol, _this.opacity);\r\n        _this.olStyle = symbolObj.olStyle;\r\n        _this.legendHtml = symbolObj.legendHtml;\r\n        return _this;\r\n    }\r\n    return SingleSymbol;\r\n}(SymbolGenerator));\r\nvar UniqueValueSymbol = (function (_super) {\r\n    __extends(UniqueValueSymbol, _super);\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the Symbol class definition\r\n     */\r\n    function UniqueValueSymbol(esriResponse, SymbolClass) {\r\n        var _this = _super.call(this, esriResponse) || this;\r\n        _this.uniqueValueInfos = _this.renderer.uniqueValueInfos;\r\n        _this.propertyName = _this.renderer.field1;\r\n        _this.defaultSymbol = _this.renderer.defaultSymbol;\r\n        if (_this.defaultSymbol) {\r\n            var symbolObj = new SymbolClass(_this.defaultSymbol, _this.opacity);\r\n            _this.defaultStyle = symbolObj.olStyle;\r\n            _this.defaultLabelHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(_this.renderer['defaultLabel']) + \"</span>\" + symbolObj.legendHtml;\r\n        }\r\n        else {\r\n            _this.defaultStyle = undefined;\r\n            _this.defaultLabelHtml = 'other';\r\n        }\r\n        _this.valueArray = [];\r\n        _this.labelArray = [];\r\n        _this.legendArray = [];\r\n        _this.propertyStyleLookup = {};\r\n        for (var _i = 0, _a = _this.uniqueValueInfos; _i < _a.length; _i++) {\r\n            var uniqueVal = _a[_i];\r\n            _this.labelArray.push(uniqueVal['label']);\r\n            _this.valueArray.push(uniqueVal['value']);\r\n            var uniqueSym = new SymbolClass(uniqueVal.symbol, _this.opacity);\r\n            _this.legendArray.push(\"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(uniqueVal['label']) + \"</span>\" + uniqueSym.legendHtml);\r\n            _this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n        }\r\n        _this.olStyle = function (feature) {\r\n            var checkProperties = feature.getProperties();\r\n            var checkProperty = checkProperties[_this.propertyName];\r\n            if (_this.propertyStyleLookup[checkProperty] !== undefined) {\r\n                return [_this.propertyStyleLookup[checkProperty]];\r\n            }\r\n            else {\r\n                return [_this.defaultStyle];\r\n            }\r\n        };\r\n        if (_this.defaultLabelHtml !== null) {\r\n            _this.legendArray.push(_this.defaultLabelHtml);\r\n        }\r\n        _this.legendHtml = '<ul>';\r\n        for (var _b = 0, _c = _this.legendArray; _b < _c.length; _b++) {\r\n            var h = _c[_b];\r\n            _this.legendHtml += \"<li>\" + h + \"</li>\";\r\n        }\r\n        _this.legendHtml += '</ul>';\r\n        return _this;\r\n    }\r\n    return UniqueValueSymbol;\r\n}(SymbolGenerator));\r\nfunction makeFeatureServiceLegendAndSymbol(esriResponse) {\r\n    \"use strict\";\r\n    var renderer = esriResponse.drawingInfo.renderer;\r\n    var symbolLegendOut = null;\r\n    switch (renderer.type) {\r\n        case 'simple':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse.geometryType + ' not handled');\r\n            }\r\n            break;\r\n        case 'uniqueValue':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse['geometryType'] + ' not handled');\r\n            }\r\n            break;\r\n        default:\r\n            alert('not handled renderer type: ' + renderer['type']);\r\n    }\r\n    if (symbolLegendOut == null) {\r\n        return { style: undefined, legend: '' };\r\n    }\r\n    else {\r\n        return { style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml };\r\n    }\r\n}\r\nexports.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\nnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n/**\r\n *\r\n * @param {object} lyrObject - the layer as defined in the response\r\n * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n * @returns {string} legend html\r\n */\r\nfunction mapServiceLegendItem(lyrObject, skipLayerNameAndExpander) {\r\n    if (skipLayerNameAndExpander === void 0) { skipLayerNameAndExpander = false; }\r\n    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n    var layerName = lyrObject['layerName'];\r\n    var legendItems = lyrObject['legend'];\r\n    var legendHtml = '';\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\";\r\n    }\r\n    if (legendItems.length == 1) {\r\n        legendHtml = \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[0]['imageData'] + \"\\\">\";\r\n    }\r\n    else {\r\n        if (!skipLayerNameAndExpander) {\r\n            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n        }\r\n        legendHtml += '<ul>';\r\n        for (var i = 0; i < legendItems.length; i++) {\r\n            legendHtml += \"<li>\";\r\n            legendHtml += \"<span class=\\\"legend-layer-subitem\\\">\" + htmlEscape(legendItems[i]['label']) + \"</span>\";\r\n            legendHtml += \"<img class=\\\"legend-layer-icon\\\" height=\\\"17\\\" src=\\\"data:image/png;base64,\" + legendItems[i]['imageData'] + \"\\\">\";\r\n            legendHtml += \"</li>\";\r\n        }\r\n        legendHtml += '</ul>';\r\n    }\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml = \"<span class=\\\"legend-layer-subitem\\\">\" + layerName + \"</span>\" + legendHtml;\r\n    }\r\n    return legendHtml;\r\n}\r\n/**\r\n * make map service legent\r\n * @param {object} esriResponse - layer info\r\n * @param  showLayers - limited number of layers to show in map service\r\n * @returns {string} legend content\r\n */\r\nfunction makeMapServiceLegend(esriResponse, showLayers) {\r\n    \"use strict\";\r\n    if (showLayers === void 0) { showLayers = []; }\r\n    var newLegendHtml = '';\r\n    var layers = esriResponse['layers'];\r\n    if (layers.length == 1) {\r\n        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n    }\r\n    else {\r\n        newLegendHtml += '<ul>';\r\n        for (var i = 0; i < layers.length; i++) {\r\n            if (showLayers.length > 0 && showLayers.indexOf(i) < 0) {\r\n                continue;\r\n            }\r\n            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n        }\r\n        newLegendHtml += '</ul>';\r\n    }\r\n    return newLegendHtml;\r\n}\r\nexports.makeMapServiceLegend = makeMapServiceLegend;\r\nnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar $ = __webpack_require__(1);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar ol = __webpack_require__(2);\r\nvar projections_1 = __webpack_require__(5);\r\nvar invalidClass = 'geocoder-invalid';\r\nvar geocoderLoadingClass = 'geocoder-loading';\r\n// let testAddress = '65 7th Street, Prairie du Sac, WI';\r\nvar Geocode = (function () {\r\n    function Geocode(mapDiv, map) {\r\n        var _this = this;\r\n        var inputGuid = makeGuid_1.makeGuid();\r\n        var buttonGuid = makeGuid_1.makeGuid();\r\n        this.map = map;\r\n        this.indicationLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: new ol.style.Style({\r\n                image: new ol.style.Circle({\r\n                    radius: 12,\r\n                    fill: new ol.style.Fill({ color: 'rgba(255,0,0,0.5)' }),\r\n                    stroke: new ol.style.Stroke({ color: 'red', width: 1 })\r\n                })\r\n            })\r\n        });\r\n        this.map.addLayer(this.indicationLayer);\r\n        $(mapDiv).append('<div class=\"geocoder-el\">' +\r\n            (\"<input type=\\\"text\\\" id=\\\"\" + inputGuid + \"\\\">\") +\r\n            (\"<button id=\\\"\" + buttonGuid + \"\\\">Search</button>\") +\r\n            '</div>');\r\n        this.theButton = document.getElementById(buttonGuid);\r\n        this.theInput = document.getElementById(inputGuid);\r\n        this.reset();\r\n        var $theButton = $(this.theButton);\r\n        var $theInput = $(this.theInput);\r\n        $theButton.click(function (evt) {\r\n            evt.preventDefault();\r\n            $theButton.addClass(geocoderLoadingClass);\r\n            _this.theButton.disabled = true;\r\n            _this.indicationLayer.getSource().clear();\r\n            $.get(\"https://geocode.xyz/\" + _this.theInput.value + \"?geoit=json\", {}, function (d) {\r\n                var lat = parseFloat(d['latt']);\r\n                var lon = parseFloat(d['longt']);\r\n                if ((lat == 0 && lon == 0) || d['error']) {\r\n                    $theInput.addClass(invalidClass);\r\n                    _this.theInput.title = 'Specified Location Invalid';\r\n                    _this.theButton.title = 'Specified Location Invalid';\r\n                }\r\n                else {\r\n                    var v = _this.map.getView();\r\n                    var p = new ol.geom.Point([lon, lat]);\r\n                    var feat = new ol.Feature(p);\r\n                    _this.indicationLayer.getSource().addFeature(feat);\r\n                    p.transform(projections_1.proj4326, projections_1.proj3857);\r\n                    v.setCenter(p.getCoordinates());\r\n                    v.setZoom(13);\r\n                }\r\n                $theButton.removeClass(geocoderLoadingClass);\r\n                _this.theButton.disabled = false;\r\n            }, 'json');\r\n        });\r\n        $(this.theInput).keyup(function (evt) {\r\n            evt.preventDefault();\r\n            _this.theButton.disabled = _this.theInput.value.length == 0;\r\n            $theInput.removeClass(invalidClass);\r\n            _this.theInput.title = '';\r\n            _this.theButton.title = '';\r\n            if (!_this.theButton.disabled && evt.keyCode == 13) {\r\n                $theButton.click();\r\n            }\r\n        });\r\n    }\r\n    Geocode.prototype.reset = function () {\r\n        this.theButton.disabled = true;\r\n        this.theInput.value = '';\r\n    };\r\n    return Geocode;\r\n}());\r\nexports.Geocode = Geocode;\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapInteractionBase_1 = __webpack_require__(17);\r\nvar checkDefined = __webpack_require__(20);\r\nvar provide_1 = __webpack_require__(0);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * assists with map move interactions, trigger callback functions\r\n * @augments MapInteractionBase\r\n */\r\nvar MapMoveCls = (function (_super) {\r\n    __extends(MapMoveCls, _super);\r\n    /**\r\n     * constructor called implicitly\r\n     */\r\n    function MapMoveCls() {\r\n        var _this = _super.call(this, 'map move') || this;\r\n        _this._arrLyrRequest = [];\r\n        _this._arrLyrTimeout = [];\r\n        _this._arrLayer = [];\r\n        _this._lookupLayer = {};\r\n        _this._mapMoveCallbacks = [];\r\n        _this._mapMoveCallbacksLookup = {};\r\n        _this._mapMoveCallbackDelays = [];\r\n        _this._mapMoveCallbackContext = [];\r\n        _this._mapMoveCallbackTimeout = [];\r\n        _this._mapExtent = undefined;\r\n        _this._zoomLevel = undefined;\r\n        return _this;\r\n    }\r\n    /**\r\n     * initialize the map move object\r\n     * @param theMap - the ol map\r\n     */\r\n    MapMoveCls.prototype.init = function (theMap) {\r\n        var _this = this;\r\n        _super.prototype.init.call(this, theMap);\r\n        this.map.getView().on(['change:center', 'change:resolution'], function (e) {\r\n            _this._updateMapExtent();\r\n            // trigger the layer updates\r\n            for (var i = 0; i < _this._arrLayer.length; i++) {\r\n                _this.triggerLyrLoad(_this._arrLayer[i], i, e.type);\r\n            }\r\n            // trigger the map callbacks\r\n            for (var i = 0; i < _this._mapMoveCallbacks.length; i++) {\r\n                _this.triggerMoveCallback(i, e.type);\r\n            }\r\n        });\r\n    };\r\n    MapMoveCls.prototype._updateMapExtent = function () {\r\n        var theView = this.map.getView();\r\n        this._zoomLevel = theView.getZoom();\r\n        var extentArray = theView.calculateExtent(this.map.getSize());\r\n        this._mapExtent = {\r\n            minX: extentArray[0],\r\n            minY: extentArray[1],\r\n            maxX: extentArray[2],\r\n            maxY: extentArray[3]\r\n        };\r\n    };\r\n    Object.defineProperty(MapMoveCls.prototype, \"mapExtent\", {\r\n        /**\r\n         * return the map extent\r\n         */\r\n        get: function () {\r\n            if (!this._mapExtent) {\r\n                this._updateMapExtent();\r\n            }\r\n            return this._mapExtent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Trigger the layer load\r\n     * @param lyr the layer being acted on\r\n     * @param index index of the layer\r\n     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n     */\r\n    MapMoveCls.prototype.triggerLyrLoad = function (lyr, index, eventType) {\r\n        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            throw 'need to define lyr or index';\r\n        }\r\n        else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            index = this._arrLayer.indexOf(lyr);\r\n        }\r\n        else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n            lyr = this._arrLayer[index];\r\n        }\r\n        // clear the timeout\r\n        if (this._arrLyrTimeout[index] != null) {\r\n            clearTimeout(this._arrLyrTimeout[index]);\r\n            this._arrLyrTimeout[index] = null;\r\n        }\r\n        // abort if necessary and clear the request\r\n        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n            this._arrLyrRequest[index].abort();\r\n            this._arrLyrRequest[index] = null;\r\n        }\r\n        // dummy callback used if before load returns false\r\n        var callbackFunc = function () { };\r\n        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n            var __this_1 = this;\r\n            callbackFunc = function () {\r\n                function innerFunction(theLayer, theIndex) {\r\n                    var _innerThis = this;\r\n                    this._arrLyrRequest[theIndex] = $.get(theLayer.url, theLayer.mapMoveParams, function (d) {\r\n                        /**\r\n                         * @type {LayerBaseVector}\r\n                         */\r\n                        theLayer.mapMoveCallback(d);\r\n                        theLayer.loadCallback();\r\n                    }, 'json').fail(function (jqXHR) {\r\n                        if (jqXHR.statusText != 'abort') {\r\n                            console.log('failed');\r\n                            console.log(theLayer.url);\r\n                            console.log(theLayer.mapMoveParams);\r\n                        }\r\n                    }).always(function () {\r\n                        _innerThis._arrLyrTimeout[theIndex] = null;\r\n                        _innerThis._arrLyrRequest[theIndex] = null;\r\n                    });\r\n                }\r\n                innerFunction.call(__this_1, lyr, index);\r\n            };\r\n        }\r\n        else {\r\n            lyr.clear();\r\n        }\r\n        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n    };\r\n    /**\r\n     * trigger the map move call back at the given index\r\n     * @param ind - the index of the layer\r\n     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n     * @param functionId=undefined the function id used to reference the added callback function\r\n     */\r\n    MapMoveCls.prototype.triggerMoveCallback = function (ind, eventType, functionId) {\r\n        if (typeof ind == 'undefined' && typeof functionId == 'undefined') {\r\n            throw 'either the function index or the id must be defined';\r\n        }\r\n        if (typeof ind !== 'number') {\r\n            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n        }\r\n        if (ind < 0) {\r\n            console.log('function not found');\r\n            return;\r\n        }\r\n        // clear the timeout\r\n        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n            this._mapMoveCallbackTimeout[ind] = null;\r\n        }\r\n        var ctx = this._mapMoveCallbackContext[ind];\r\n        var theFunc = this._mapMoveCallbacks[ind];\r\n        var __this = this;\r\n        var f = function () {\r\n            if (ctx !== null) {\r\n                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n            else {\r\n                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n        };\r\n        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n    };\r\n    /**\r\n     * Add a layer to the interaction\r\n     * @param  lyr - layer to add\r\n     * @param triggerOnAdd - if the layer should be loaded on add\r\n     */\r\n    MapMoveCls.prototype.addVectorLayer = function (lyr, triggerOnAdd) {\r\n        if (triggerOnAdd === void 0) { triggerOnAdd = true; }\r\n        if (this._arrLayer.indexOf(lyr) > -1) {\r\n            console.log('already added ' + lyr.name + ' to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        this._arrLyrRequest.push(null);\r\n        this._arrLyrTimeout.push(null);\r\n        this._arrLayer.push(lyr);\r\n        this._lookupLayer[lyr.id] = lyr;\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n        }\r\n    };\r\n    /**\r\n     * add a callback to the map move event\r\n     * @param func - callback function\r\n     * @param context - the context to use for this function\r\n     * @param delay=50 the delay before call load\r\n     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n     * @param functionId optional id to reference the function later for outside triggering\r\n     */\r\n    MapMoveCls.prototype.addCallback = function (func, context, delay, triggerOnAdd, functionId) {\r\n        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n            console.log('this function already added to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        if (!functionId) {\r\n            functionId = makeGuid_1.default();\r\n        }\r\n        this._mapMoveCallbacks.push(func);\r\n        this._mapMoveCallbacksLookup[functionId] = func;\r\n        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n        this._mapMoveCallbackTimeout.push(null);\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n        }\r\n    };\r\n    return MapMoveCls;\r\n}(mapInteractionBase_1.default));\r\nexports.MapMoveCls = MapMoveCls;\r\nnm.MapMoveCls = MapMoveCls;\r\nexports.default = MapMoveCls;\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar mapInteractionBase_1 = __webpack_require__(17);\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar nm = provide_1.default('olHelpers');\r\nvar FeatureLayerProperties = (function () {\r\n    /**\r\n     *\r\n     * @param feature the feature\r\n     * @param layer - the layer in the popup\r\n     * @param layerIndex - index of the layer\r\n     * @param selectionLayer - the ol selection layer\r\n     * @param [esriLayerName=undefined] - esri layer name\r\n     */\r\n    function FeatureLayerProperties(feature, layer, layerIndex, selectionLayer, esriLayerName) {\r\n        this.feature = feature;\r\n        this.layer = layer;\r\n        this.layerIndex = layerIndex;\r\n        this.selectionLayer = selectionLayer;\r\n        this.popupContent = '';\r\n        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n    }\r\n    Object.defineProperty(FeatureLayerProperties.prototype, \"layerName\", {\r\n        get: function () {\r\n            if (typeof this.esriLayerName == 'string') {\r\n                return this.esriLayerName;\r\n            }\r\n            else {\r\n                return this.layer.name;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FeatureLayerProperties;\r\n}());\r\nexports.FeatureLayerProperties = FeatureLayerProperties;\r\n/**\r\n * map popup class\r\n * @augments MapInteractionBase\r\n */\r\nvar MapPopupCls = (function (_super) {\r\n    __extends(MapPopupCls, _super);\r\n    /**\r\n     * Definition for openlayers style function\r\n     * @callback olStyleFunction\r\n     * &param feature the openlayers vector feature\r\n     * $param\r\n     */\r\n    /**\r\n     * map popup constructor\r\n     */\r\n    function MapPopupCls() {\r\n        var _this = _super.call(this, 'map popup') || this;\r\n        _this._arrPopupLayerIds = [];\r\n        _this._arrPopupLayerNames = [];\r\n        _this._arrPopupLayers = [];\r\n        _this._arrPopupOlLayers = [];\r\n        _this._arrPopupContentFunction = [];\r\n        _this._$popupContainer = undefined;\r\n        _this._$popupContent = undefined;\r\n        _this._$popupCloser = undefined;\r\n        _this._popupOverlay = undefined;\r\n        _this._selectionLayers = [];\r\n        _this._selectionLayerLookup = {};\r\n        _this._mapClickFunctions = [];\r\n        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n        //this._popupChangedLookup = {'a': a};\r\n        _this._popupChangedFunctions = [];\r\n        _this._esriMapServiceLayers = [];\r\n        _this._popupOpen = false;\r\n        _this._popupCoordinate = null;\r\n        _this._passThroughLayerFeatureArray = [];\r\n        _this._currentPopupIndex = -1;\r\n        _this._popupContentLength = 0;\r\n        return _this;\r\n    }\r\n    /**\r\n     * map popup initialization\r\n     * @param {ol.Map} theMap - the ol map\r\n     */\r\n    MapPopupCls.prototype.init = function (theMap) {\r\n        var _this = this;\r\n        _super.prototype.init.call(this, theMap);\r\n        var $map;\r\n        var target = this.map.getTarget();\r\n        if (typeof target == 'string') {\r\n            $map = $('#' + target);\r\n        }\r\n        else {\r\n            $map = $(target);\r\n        }\r\n        $map.append('<div class=\"ol-popup\">' +\r\n            '<span class=\"ol-popup-closer\">X</span>' +\r\n            '<div class=\"popup-content\"></div>' +\r\n            '</div>');\r\n        this._$popupContainer = $map.find('.ol-popup');\r\n        this._$popupContent = $map.find('.popup-content');\r\n        this._$popupCloser = $map.find('.ol-popup-closer');\r\n        var _ease = function (n) {\r\n            return ol.easing.inAndOut(n);\r\n        };\r\n        this._popupOverlay = new ol.Overlay({\r\n            element: this._$popupContainer[0],\r\n            autoPan: true,\r\n            autoPanAnimation: {\r\n                duration: 250,\r\n                source: theMap.getView().getCenter(),\r\n                easing: _ease\r\n            }\r\n        });\r\n        this._map.addOverlay(this._popupOverlay);\r\n        this._$popupCloser.click(function (evt) {\r\n            _this.closePopup();\r\n        });\r\n        // display popup on click\r\n        this._map.on('singleclick', function (evt) {\r\n            _this.closePopup();\r\n            _this._popupCoordinate = evt['coordinate'];\r\n            // esri map service layers\r\n            if (_this._esriMapServiceLayers.length > 0) {\r\n                var queryParams = {\r\n                    geometry: evt['coordinate'].join(','),\r\n                    geometryType: 'esriGeometryPoint',\r\n                    layers: 'all',\r\n                    sr: _this._map.getView().getProjection().getCode().split(':')[1],\r\n                    mapExtent: _this._map.getView().calculateExtent(_this._map.getSize()).join(','),\r\n                    imageDisplay: _this._map.getSize().join(',') + ',96',\r\n                    returnGeometry: true,\r\n                    tolerance: 15,\r\n                    f: 'pjson'\r\n                };\r\n                for (var _i = 0, _a = _this._esriMapServiceLayers; _i < _a.length; _i++) {\r\n                    var l = _a[_i];\r\n                    l.getPopupInfo(queryParams);\r\n                }\r\n            }\r\n            var layerFeatureObjectArray = _this._featuresAtPixel(evt['pixel']);\r\n            _this._passThroughLayerFeatureArray = [];\r\n            _this._currentPopupIndex = -1;\r\n            for (var i = 0; i < layerFeatureObjectArray.length; i++) {\r\n                var featObj = layerFeatureObjectArray[i];\r\n                var props = featObj.feature.getProperties();\r\n                var popupContentResponse = _this._arrPopupContentFunction[featObj.layerIndex](props, _this._$popupContent);\r\n                //skip if return was false\r\n                if (popupContentResponse === false) {\r\n                    //continue;\r\n                }\r\n                else if (typeof popupContentResponse == 'string') {\r\n                    featObj.popupContent = popupContentResponse;\r\n                    _this._passThroughLayerFeatureArray.push(featObj);\r\n                }\r\n                else {\r\n                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n                }\r\n            }\r\n            _this._popupContentLength = _this._passThroughLayerFeatureArray.length;\r\n            _this._currentPopupIndex = -1;\r\n            var popupHtml = '<div class=\"ol-popup-nav\">';\r\n            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n            popupHtml += \"<span class=\\\"current-popup-item-number\\\" style=\\\"font-weight: bold;\\\"></span>\";\r\n            popupHtml += \"<span>&nbsp;of&nbsp;</span>\";\r\n            popupHtml += \"<span class=\\\"popup-content-length\\\" style=\\\"font-weight: bold;\\\">\" + _this._popupContentLength + \"</span>\";\r\n            popupHtml += \"<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>\";\r\n            popupHtml += \"<span class=\\\"current-popup-layer-name\\\"></span>\";\r\n            popupHtml += '</div>';\r\n            popupHtml += '<div class=\"ol-popup-inner\">';\r\n            popupHtml += '</div>';\r\n            _this._$popupContent.html(popupHtml);\r\n            _this._$popupContent.find('.previous-popup').click(function () {\r\n                if (_this._popupContentLength == 1) {\r\n                    return;\r\n                }\r\n                if (_this._currentPopupIndex == 0) {\r\n                    _this._currentPopupIndex = _this._popupContentLength - 1;\r\n                }\r\n                else {\r\n                    _this._currentPopupIndex--;\r\n                }\r\n                _this._triggerFeatSelect();\r\n            });\r\n            var nextPopup = _this._$popupContent.find('.next-popup');\r\n            nextPopup.click(function () {\r\n                if (_this._popupContentLength == 1 && _this._currentPopupIndex > -1) {\r\n                    return;\r\n                }\r\n                if (_this._currentPopupIndex == _this._popupContentLength - 1) {\r\n                    _this._currentPopupIndex = 0;\r\n                }\r\n                else {\r\n                    _this._currentPopupIndex++;\r\n                }\r\n                _this._triggerFeatSelect();\r\n            });\r\n            if (_this._popupContentLength > 0) {\r\n                nextPopup.trigger('click');\r\n                _this._popupOverlay.setPosition(_this._popupCoordinate);\r\n                _this._$popupContent.scrollTop(0);\r\n                _this._popupOpen = true;\r\n            }\r\n        });\r\n        //change mouse cursor when over marker\r\n        this._map.on('pointermove', function (evt) {\r\n            if (evt['dragging']) {\r\n                return;\r\n            }\r\n            var pixel = _this.map.getEventPixel(evt['originalEvent']);\r\n            var hit = _this.map.hasFeatureAtPixel(pixel, function (lyrCandidate) {\r\n                for (var _i = 0, _a = _this._arrPopupOlLayers; _i < _a.length; _i++) {\r\n                    var olLayer = _a[_i];\r\n                    if (lyrCandidate == olLayer) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            });\r\n            var mapElement = _this.map.getTargetElement();\r\n            mapElement.style.cursor = hit ? 'pointer' : '';\r\n        });\r\n        return true;\r\n    };\r\n    /**\r\n     * helper to select features\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._triggerFeatSelect = function () {\r\n        var $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n        var $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n        var $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n        this.clearSelection();\r\n        var lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n        $layerNameSpan.html(lyrFeatObj.layerName);\r\n        $innerPopup.html(lyrFeatObj.popupContent);\r\n        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n        for (var _i = 0, _a = this._popupChangedFunctions; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f(this._$popupContent);\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param feature - the ol feature\r\n     * @param {LayerEsriMapServer} lyr - the map server layer\r\n     * @param {string} popupContent - popup content\r\n     * @param {string} esriName - esri layer name\r\n     */\r\n    MapPopupCls.prototype.addMapServicePopupContent = function (feature, lyr, popupContent, esriName) {\r\n        var featLayerObject = new FeatureLayerProperties(feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName);\r\n        featLayerObject.popupContent = popupContent;\r\n        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n        this._popupContentLength++;\r\n        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n        if (!this._popupOpen) {\r\n            this._$popupContent.find('.next-popup').trigger('click');\r\n            this._popupOverlay.setPosition(this._popupCoordinate);\r\n            this._$popupContent.scrollTop(0);\r\n            this._popupOpen = true;\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param  pixel - the ol pixel\r\n     * @returns  feature layer properties\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._featuresAtPixel = function (pixel) {\r\n        var _this = this;\r\n        var layerFeatureObjectArray = [];\r\n        this.map.forEachFeatureAtPixel(pixel, function (feature, layer) {\r\n            var lyrIndex = _this._arrPopupOlLayers.indexOf(layer);\r\n            if (lyrIndex > -1) {\r\n                layerFeatureObjectArray.push(new FeatureLayerProperties(feature, _this._arrPopupLayers[lyrIndex], lyrIndex, _this._selectionLayers[lyrIndex]));\r\n            }\r\n        });\r\n        return layerFeatureObjectArray;\r\n    };\r\n    MapPopupCls.prototype.closePopup = function () {\r\n        this._checkInit();\r\n        this._popupOpen = false;\r\n        this._popupOverlay.setPosition(undefined);\r\n        this._$popupCloser[0].blur();\r\n        this.clearSelection();\r\n        this._$popupContent.html('');\r\n        return false;\r\n    };\r\n    ;\r\n    /**\r\n     *\r\n     * @param chgFunction - popup change function\r\n     */\r\n    MapPopupCls.prototype.addPopupChangedFunction = function (chgFunction) {\r\n        this._popupChangedFunctions.push(chgFunction);\r\n    };\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - the layer being acted on\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns  the new selection layer\r\n     * @private\r\n     */\r\n    MapPopupCls.prototype._addPopupLayer = function (lyr, selectionStyle) {\r\n        this._checkInit();\r\n        selectionStyle = selectionStyle || {};\r\n        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n        selectionStyle.width = selectionStyle.width || 10;\r\n        var theStyle;\r\n        if (selectionStyle.olStyle) {\r\n            theStyle = selectionStyle.olStyle;\r\n        }\r\n        else {\r\n            theStyle = new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: selectionStyle.color,\r\n                    width: selectionStyle.width\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 7,\r\n                    fill: new ol.style.Fill({ color: selectionStyle.color }),\r\n                    stroke: new ol.style.Stroke({ color: selectionStyle.color, width: 1 })\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: selectionStyle.color\r\n                })\r\n            });\r\n        }\r\n        var selectionLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: theStyle\r\n        });\r\n        selectionLayer.setZIndex(100);\r\n        this._selectionLayers.push(selectionLayer);\r\n        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n        this.map.addLayer(selectionLayer);\r\n        return selectionLayer;\r\n    };\r\n    /**\r\n     * Add popup to the map\r\n     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    MapPopupCls.prototype.addVectorPopup = function (lyr, popupContentFunction, selectionStyle) {\r\n        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._arrPopupLayerIds.push(lyr.id);\r\n        this._arrPopupLayerNames.push(lyr.name);\r\n        this._arrPopupLayers.push(lyr);\r\n        this._arrPopupOlLayers.push(lyr.olLayer);\r\n        this._arrPopupContentFunction.push(popupContentFunction);\r\n        return selectionLayer;\r\n    };\r\n    ;\r\n    /**\r\n     *\r\n     * @param {LayerBase} lyr - layer\r\n     */\r\n    MapPopupCls.prototype.removeVectorPopup = function (lyr) {\r\n        var idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n        if (idx > -1) {\r\n            this._arrPopupLayerIds.splice(idx, 1);\r\n            this._arrPopupLayerNames.splice(idx, 1);\r\n            this._arrPopupLayers.splice(idx, 1);\r\n            this._arrPopupOlLayers.splice(idx, 1);\r\n            this._arrPopupContentFunction.splice(idx, 1);\r\n            this._selectionLayers.splice(idx, 1);\r\n            delete this._selectionLayerLookup[lyr.id];\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {LayerEsriMapServer} lyr - map server layer\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    MapPopupCls.prototype.addMapServicePopup = function (lyr, selectionStyle) {\r\n        var selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._esriMapServiceLayers.push(lyr);\r\n        return selectionLayer;\r\n    };\r\n    MapPopupCls.prototype.clearSelection = function () {\r\n        this._checkInit();\r\n        for (var i = 0; i < this._selectionLayers.length; i++) {\r\n            this._selectionLayers[i].getSource().clear();\r\n        }\r\n        for (var _i = 0, _a = this._mapClickFunctions; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f();\r\n        }\r\n    };\r\n    ;\r\n    /**\r\n     * Add a function to be called when the map is clicked but before any popups are implemented\r\n     * @param {function} func - the map click function\r\n     */\r\n    MapPopupCls.prototype.addMapClickFunction = function (func) {\r\n        this._mapClickFunctions.push(func);\r\n    };\r\n    return MapPopupCls;\r\n}(mapInteractionBase_1.default));\r\nexports.MapPopupCls = MapPopupCls;\r\nnm.MapPopupCls = MapPopupCls;\r\nexports.default = MapPopupCls;\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar extentUtil_1 = __webpack_require__(9);\r\n/**\r\n *\r\n * @param {ol.Map} map\r\n * @param {(imgData) => string} callback\r\n * @param {iMapToBase64Options} options\r\n * @returns {any}\r\n */\r\nfunction mapToBase64(map, callback, options) {\r\n    options = options || {};\r\n    if (typeof options.delay === 'number') {\r\n        //pass\r\n    }\r\n    else if (options.layers || options.resize) {\r\n        options.delay = 2000;\r\n    }\r\n    else {\r\n        options.delay = 1;\r\n    }\r\n    var mapTarget = map.getTargetElement();\r\n    var originalHeight = mapTarget.style.height;\r\n    var originalWidth = mapTarget.style.width;\r\n    var originalPosition = mapTarget.style.position;\r\n    var originalCenter = map.getView().getCenter();\r\n    var originalZoom = map.getView().getZoom();\r\n    // let mapTimeout = 1;\r\n    if (options.resize) {\r\n        mapTarget.style.height = options.resize.height + \"px\";\r\n        mapTarget.style.width = options.resize.width + \"px\";\r\n        mapTarget.style.position = 'absolute';\r\n        map.updateSize();\r\n    }\r\n    map.once('postrender', function () {\r\n        if (options.layers) {\r\n            extentUtil_1.fitToMap(options.layers, map);\r\n        }\r\n        setTimeout(function () {\r\n            map.once('postcompose', function (event) {\r\n                try {\r\n                    var canvas = event['context'].canvas;\r\n                    var imgData = canvas.toDataURL('image/png');\r\n                    callback(imgData);\r\n                }\r\n                catch (ex) {\r\n                    // reportParams['imgData'] = null;\r\n                }\r\n                finally {\r\n                    if (options.resize) {\r\n                        mapTarget.style.height = originalHeight;\r\n                        mapTarget.style.width = originalWidth;\r\n                        mapTarget.style.position = originalPosition;\r\n                        map.updateSize();\r\n                        map.getView().setCenter(originalCenter);\r\n                        map.getView().setZoom(originalZoom);\r\n                    }\r\n                    if (options.layers) {\r\n                        extentUtil_1.fitToMap(options.layers, map);\r\n                    }\r\n                }\r\n            });\r\n            map.renderSync();\r\n        }, options.delay);\r\n    });\r\n    map.updateSize();\r\n}\r\nexports.mapToBase64 = mapToBase64;\r\nexports.default = mapToBase64;\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar geocode_1 = __webpack_require__(32);\r\nvar nm = provide_1.default('olHelpers');\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param [options={}] config options\r\n * @param [options.divId=map] map div id\r\n * @param [options.center={}] center config object\r\n * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param [options.center.y=5574910] center y, web mercator y or lat\r\n * @param [options.zoom=7] zoom level\r\n * @param [options.minZoom=undefined] min zoom\r\n * @param [options.maxZoom=undefined] max zoom\r\n * @param [options.baseSwitcher=true] if add base map switcher\r\n * @param [options.fullScreen=false] if add base map switcher\r\n * @returns the ol map\r\n */\r\nfunction quickMapBase(options) {\r\n    if (options === void 0) { options = {}; }\r\n    options.divId = options.divId || 'map';\r\n    options.center = options.center || { x: -10018378, y: 5574910 };\r\n    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n    options.addGeocode = options.addGeocode || false;\r\n    var $mapDiv = $('#' + options.divId);\r\n    $mapDiv.css('position', 'relative');\r\n    var osmLayer = new ol.layer.Tile({ source: new ol.source.OSM() });\r\n    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n    var osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n    var aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n    if (options.baseSwitcher) {\r\n        //  let switcherContent = '<div class=\"base-map-switcher\" title=\"Toggle Base Layer\" style=\"';\r\n        //  switcherContent += 'position: absolute; top: 70px; left: 4px; border: solid black 1px; ';\r\n        //  switcherContent += `height: 50px; width: 50px; z-index: 10; border-radius: 4px; background: ${aerialCss};`;\r\n        //  switcherContent += '\"></div>';\r\n        //  $mapDiv.append(switcherContent);\r\n        //\r\n        // $mapDiv.find('.base-map-switcher').click(function() {\r\n        //      \"use strict\";\r\n        //      osmLayer.setVisible(!osmLayer.getVisible());\r\n        //      satLayer.setVisible(!satLayer.getVisible());\r\n        //\r\n        //      if (osmLayer.getVisible()){\r\n        //          $(this).css('background', aerialCss);\r\n        //      } else {\r\n        //          $(this).css('background', osmCss);\r\n        //      }\r\n        //  });\r\n    }\r\n    if (options.zoom < 0 || options.zoom > 28) {\r\n        throw 'zoom out of range';\r\n    }\r\n    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n        var p = new ol.geom.Point([options.center.x, options.center.y]);\r\n        new ol.proj.Projection({ code: \"EPSG:4326\" });\r\n        p.transform(new ol.proj.Projection({ code: \"EPSG:4326\" }), new ol.proj.Projection({ code: \"EPSG:3857\" }));\r\n        var coordinates = p.getCoordinates();\r\n        options.center.x = coordinates[0];\r\n        options.center.y = coordinates[1];\r\n    }\r\n    var controls = ol.control.defaults({\r\n        attributionOptions: { collapsible: false }\r\n    });\r\n    var view = new ol.View({\r\n        center: [options.center.x, options.center.y],\r\n        zoom: options.zoom,\r\n        minZoom: options.minZoom,\r\n        maxZoom: options.maxZoom\r\n    });\r\n    var map = new ol.Map({\r\n        layers: [osmLayer],\r\n        target: options.divId,\r\n        controls: controls,\r\n        view: view\r\n    });\r\n    if (options.fullScreen) {\r\n        map.addControl(new ol.control.FullScreen({}));\r\n    }\r\n    if (options.addGeocode) {\r\n        new geocode_1.Geocode(document.getElementById(options.divId), map);\r\n    }\r\n    return map;\r\n}\r\nexports.quickMapBase = quickMapBase;\r\nnm.quickMapBase = quickMapBase;\r\nexports.default = quickMapBase;\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 12/14/2015.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('olHelpers.zoomResolutionConvert');\r\nvar _zoomResLookup = [\r\n    156543.03392804097,\r\n    78271.51696402048,\r\n    39135.75848201024,\r\n    19567.87924100512,\r\n    9783.93962050256,\r\n    4891.96981025128,\r\n    2445.98490512564,\r\n    1222.99245256282,\r\n    611.49622628141,\r\n    305.748113140705,\r\n    152.8740565703525,\r\n    76.43702828517625,\r\n    38.21851414258813,\r\n    19.109257071294063,\r\n    9.554628535647032,\r\n    4.777314267823516,\r\n    2.388657133911758,\r\n    1.194328566955879,\r\n    0.5971642834779395,\r\n    0.29858214173896974,\r\n    0.14929107086948487,\r\n    0.07464553543474244,\r\n    0.03732276771737122,\r\n    0.01866138385868561,\r\n    0.009330691929342804,\r\n    0.004665345964671402,\r\n    0.002332672982335701,\r\n    0.0011663364911678506,\r\n    0.0005831682455839253 //28\r\n];\r\n/**\r\n * Get the resolution given the zoom level\r\n * @param {number} zoomLevel - the zoom level\r\n * @returns {number|*} the map resolution\r\n */\r\nfunction zoomToResolution(zoomLevel) {\r\n    \"use strict\";\r\n    if (typeof zoomLevel == 'number') {\r\n        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n            return _zoomResLookup[zoomLevel];\r\n        }\r\n        else {\r\n            console.log(\"invalid zoom level provided: \" + zoomLevel);\r\n            return undefined;\r\n        }\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexports.zoomToResolution = zoomToResolution;\r\nnm.zoomToResolution = zoomToResolution;\r\n/**\r\n * Get resolution from the zoom level\r\n * @param {number} resolution - the resolution\r\n * @returns {number|*} the zoom level\r\n */\r\nfunction resolutionToZoom(resolution) {\r\n    for (var i = 0; i < _zoomResLookup.length; i++) {\r\n        if (resolution >= _zoomResLookup[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return 0;\r\n}\r\nexports.resolutionToZoom = resolutionToZoom;\r\nnm.resolutionToZoom = resolutionToZoom;\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar chk = __webpack_require__(20);\r\nvar nm = provide_1.default('util.colors');\r\n/**\r\n * helper function to convert to hex\r\n * @param {number|string} x - the number to convert to hex\r\n * @returns {string} number as hex\r\n * @private\r\n */\r\nfunction _hex(x) {\r\n    var hexDigits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n    if (isNaN(x)) {\r\n        return \"00\";\r\n    }\r\n    else {\r\n        var m = x;\r\n        return hexDigits[(m - m % 16) / 16] + hexDigits[m % 16];\r\n    }\r\n    // return isNaN(x as number) ? \"00\" : hexDigits[(x - x % 16) / 16] + hexDigits[x % 16];\r\n}\r\n/**\r\n * converts an RGB string to hex\r\n * @param {string} rgb - rgb color\r\n * @returns {string} rbg as hex\r\n */\r\nfunction rgb2hex(rgb) {\r\n    var rgb1 = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\r\n    return (\"#\" + _hex(rgb1[1]) + _hex(rgb1[2]) + _hex(rgb1[3])).toUpperCase();\r\n}\r\nexports.rgb2hex = rgb2hex;\r\nnm.rgb2hex = rgb2hex;\r\n/**\r\n * Convert hex string to RGB or RGBA string\r\n * @param {string} hexString - hex color string\r\n * @param {number} [alphaVal=undefined] Alpha value\r\n * @returns {string} - rgb or rgba color\r\n */\r\nfunction hexAlphaToRgbOrRgba(hexString, alphaVal) {\r\n    hexString = ((hexString.charAt(0) == \"#\") ? hexString.substring(1, 7) : hexString);\r\n    var r = parseInt(hexString.substring(0, 2), 16).toString() || '0';\r\n    var g = parseInt(hexString.substring(2, 4), 16).toString() || '0';\r\n    var b = parseInt(hexString.substring(4, 6), 16).toString() || '0';\r\n    if (alphaVal) {\r\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + alphaVal + \")\";\r\n    }\r\n    else {\r\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \")\";\r\n    }\r\n}\r\nexports.hexAlphaToRgbOrRgba = hexAlphaToRgbOrRgba;\r\nnm.hexAlphaToRgbOrRgba = hexAlphaToRgbOrRgba;\r\n/**\r\n * adds alpha value to rgb string 'rgb(r, b, g)', returns 'rgba(r, g, b, a)'\r\n * @param {string} rgb - rgb color\r\n * @param {number} alpha - alpha value 0 to 1\r\n * @returns {string} rgba color\r\n */\r\nfunction rgbToRgba(rgb, alpha) {\r\n    var pieces = rgb.split(',');\r\n    pieces[0] = pieces[0].replace('rgb', 'rgba');\r\n    pieces[2] = pieces[2].replace(')', '');\r\n    pieces.push(' ' + alpha.toFixed(1) + ')');\r\n    return pieces.join(',');\r\n}\r\nexports.rgbToRgba = rgbToRgba;\r\nnm.rgbToRgba = rgbToRgba;\r\n/**\r\n * @typedef {function} colorLookupByNumber\r\n * @param {number} num - the number to use to retrieve the color\r\n * @returns {string} rgb color\r\n */\r\n/**\r\n * Make a blue green red gradient\r\n * @param {number} minVal - minimum value\r\n * @param {number} maxVal - maximum value\r\n * @param {boolean} flipColors - if the colors should be flipped\r\n * @returns {colorLookupByNumber} color lookup function\r\n */\r\nfunction makeBlueGreenRedGradient(minVal, maxVal, flipColors) {\r\n    if (flipColors === void 0) { flipColors = false; }\r\n    if (typeof flipColors != \"boolean\") {\r\n        flipColors = false;\r\n    }\r\n    return function (theVal) {\r\n        var r, g, b;\r\n        var ratio;\r\n        if (chk.undefinedOrNull(theVal)) {\r\n            return 'rgb(100,100,100)';\r\n        }\r\n        var percent = (theVal - minVal) / (maxVal - minVal);\r\n        if (flipColors == true) {\r\n            percent = 1 - percent;\r\n        }\r\n        if (percent >= 1) {\r\n            r = 255;\r\n            g = 0;\r\n            b = 0;\r\n        }\r\n        else if (percent <= 0) {\r\n            r = 0;\r\n            g = 0;\r\n            b = 255;\r\n        }\r\n        else if (percent < .25) {\r\n            // green up, blue constant\r\n            r = 0;\r\n            g = Math.floor(255 * percent / 0.25);\r\n            b = 255;\r\n        }\r\n        else if (percent < 0.50) {\r\n            //blue down, green constant\r\n            ratio = (percent - 0.25) / 0.25;\r\n            r = 0;\r\n            g = 255;\r\n            b = 255 - Math.floor(255 * ratio);\r\n        }\r\n        else if (percent < 0.75) {\r\n            // red up, green constant\r\n            ratio = (percent - 0.5) / 0.25;\r\n            r = Math.floor(255 * ratio);\r\n            g = 255;\r\n            b = 0;\r\n        }\r\n        else {\r\n            // green down, red constant\r\n            ratio = (percent - 0.75) / 0.25;\r\n            r = 255;\r\n            g = 255 - Math.floor(255 * ratio);\r\n            b = 0;\r\n        }\r\n        r = r.toFixed();\r\n        g = g.toFixed();\r\n        b = b.toFixed();\r\n        return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n    };\r\n}\r\nexports.makeBlueGreenRedGradient = makeBlueGreenRedGradient;\r\nnm.makeBlueGreenRedGradient = makeBlueGreenRedGradient;\r\n/**\r\n * Create a function that will return colors based on a gradient\r\n * @param {number} median - median value\r\n * @param {number} stdDev - standard deviation\r\n * @param {boolean} flipColors - if the colors should be flipped\r\n * @returns {colorLookupByNumber} color lookup function\r\n */\r\nfunction makeBlueGreenRedGradientZScore(median, stdDev, flipColors) {\r\n    if (flipColors === void 0) { flipColors = false; }\r\n    var grd = makeBlueGreenRedGradient(-2.5, 2.5, flipColors);\r\n    return function (theVal) {\r\n        var zScore;\r\n        if (theVal == null) {\r\n            zScore = null;\r\n        }\r\n        else {\r\n            zScore = (theVal - median) / stdDev;\r\n        }\r\n        return grd(zScore);\r\n    };\r\n}\r\nexports.makeBlueGreenRedGradientZScore = makeBlueGreenRedGradientZScore;\r\nnm.makeBlueGreenRedGradientZScore = makeBlueGreenRedGradientZScore;\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 5/16/2016.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\n// import * as styles  from '../layerStyles';\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar calcExtent = __webpack_require__(9);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar CorridorConfig_1 = __webpack_require__(23);\r\nvar Corridor_1 = __webpack_require__(14);\r\nvar $ = __webpack_require__(1);\r\nvar popup_1 = __webpack_require__(11);\r\nvar nm = provide_1.default('ssa');\r\n/**\r\n *\r\n * @param {string} [rowHtml=''] data row html\r\n * @returns {string} full table html\r\n */\r\nfunction tableContent(rowHtml) {\r\n    \"use strict\";\r\n    if (rowHtml === void 0) { rowHtml = ''; }\r\n    rowHtml = typeof rowHtml == 'string' ? rowHtml : '';\r\n    var tableContent = \"<table>\";\r\n    tableContent += \"<tr>\";\r\n    tableContent += '<th></th>';\r\n    tableContent += '<th>Corridors</th>';\r\n    tableContent += '<th></th>';\r\n    tableContent += \"</tr>\";\r\n    tableContent += rowHtml;\r\n    tableContent += \"</table>\";\r\n    return tableContent;\r\n}\r\n/**\r\n *\r\n * @param {string} fromRp - from reference point\r\n * @param {string} toRp - to reference point\r\n * @returns {string} string with abbreviated reference point identifiers separated by a hyphen\r\n * @private\r\n */\r\nfunction corridorName(fromRp, toRp) {\r\n    \"use strict\";\r\n    return fromRp.substring(0, 7) + ' - ' + toRp.substring(0, 7);\r\n}\r\nvar CorridorCollection = (function () {\r\n    /**\r\n     * @param {jQuery} parentDiv - div id inside which to make the collection\r\n     * @param {ol.Map} theMap - the SSA main map\r\n     * @param {string} corridorDataIdOrClass - the corridor data container id or class\r\n     * @param {function} afterChange - function to run after a change has taken place\r\n     * @param {string} [dataClass=corridor-data] - function to run after a change has taken place\r\n     */\r\n    function CorridorCollection(parentDiv, theMap, corridorDataIdOrClass, afterChange, dataClass) {\r\n        var _this = this;\r\n        this._dataClass = dataClass || 'corridor-data';\r\n        this._afterChange = afterChange;\r\n        var _corridorDataContainer = $(\".\" + corridorDataIdOrClass + \", #\" + corridorDataIdOrClass);\r\n        if (_corridorDataContainer.length == 0) {\r\n            throw 'data container not found';\r\n        }\r\n        this.$corridorDataContainer = $(_corridorDataContainer[0]);\r\n        this.$corridorDataContainer.addClass('corridor-data-container');\r\n        this._map = theMap;\r\n        var corridorsGuid = makeGuid_1.default();\r\n        parentDiv.append(\"<div id=\\\"\" + corridorsGuid + \"\\\"></div>\");\r\n        this.$containerEl = $('#' + corridorsGuid).addClass('corridor-collection-container');\r\n        var innerHtml = '<div class=\"corridor-collection\">';\r\n        innerHtml += tableContent();\r\n        innerHtml += '</div>';\r\n        this.$containerEl.append(innerHtml);\r\n        this.$innerContainer = this.$containerEl.find('.corridor-collection');\r\n        this._visible = true;\r\n        this._inCreateModifyOperation = false;\r\n        this._showPopups = true;\r\n        /**\r\n         *\r\n         * @type {Array<Corridor>}\r\n         */\r\n        this._corridorArray = [];\r\n        /**\r\n         *\r\n         * @type {{}}\r\n         * @private\r\n         */\r\n        this._coridorLookup = {};\r\n        this._popupStyle = function (props) {\r\n            if (!_this.showPopups) {\r\n                return false;\r\n            }\r\n            return popup_1.mmPopupContent(props);\r\n        };\r\n    }\r\n    /**\r\n     * add a corridor\r\n     * @param {Corridor} c - the corridor to be added\r\n     * @param [refreshData=true] c - the corridor to be added\r\n     */\r\n    CorridorCollection.prototype.addCorridorCreate = function (c, refreshData) {\r\n        if (refreshData === void 0) { refreshData = true; }\r\n        this._corridorArray.push(c);\r\n        this._coridorLookup[c.clientId] = c;\r\n        this._map.addLayer(c.olLayer);\r\n        this._map.addLayer(c.nodeLayer.olLayer);\r\n        c.layer.name = corridorName(c.rpFrom, c.rpTo);\r\n        mapPopup_1.default.addVectorPopup(c.layer, this._popupStyle);\r\n        if (refreshData) {\r\n            this.refreshHtmlCreate();\r\n        }\r\n    };\r\n    /**\r\n     * delete/remove a corridor\r\n     * @param {string|Corridor} cor - the corridor to be removed\r\n     */\r\n    CorridorCollection.prototype.removeCorridor = function (cor) {\r\n        if (!confirm('Confirm Delete Corridor?')) {\r\n            return;\r\n        }\r\n        if (typeof cor == 'string') {\r\n            cor = this._coridorLookup[cor];\r\n        }\r\n        var ix = this._corridorArray.indexOf(cor);\r\n        mapPopup_1.default.removeVectorPopup(cor.layer);\r\n        this._map.removeLayer(cor.olLayer);\r\n        this._map.removeLayer(cor.nodeLayer.olLayer);\r\n        this._corridorArray.splice(ix, 1);\r\n        delete this._coridorLookup[cor.clientId];\r\n        this._map.getView().setZoom(this._map.getView().getZoom() - 1);\r\n        this._map.getView().setZoom(this._map.getView().getZoom() + 1);\r\n        this.refreshHtmlCreate();\r\n    };\r\n    /**\r\n     * refresh the contents of the corridor table and hidden corridor data input elements\r\n     */\r\n    CorridorCollection.prototype.refreshHtmlCreate = function () {\r\n        this.$innerContainer.html('');\r\n        var rowContent = '';\r\n        for (var _i = 0, _a = this._corridorArray; _i < _a.length; _i++) {\r\n            var c = _a[_i];\r\n            rowContent += c.tableHtmlCreate;\r\n        }\r\n        this.$innerContainer.append(tableContent(rowContent));\r\n        this.$corridorDataContainer.html('');\r\n        for (var i = 0; i < this._corridorArray.length; i++) {\r\n            var cor = this._corridorArray[i];\r\n            this.$corridorDataContainer.append(cor.getDataHtml(i));\r\n        }\r\n        this._afterChange();\r\n    };\r\n    Object.defineProperty(CorridorCollection.prototype, \"visible\", {\r\n        get: function () {\r\n            return this._visible;\r\n        },\r\n        set: function (viz) {\r\n            if (viz == this.visible) {\r\n                return;\r\n            }\r\n            this._visible = viz;\r\n            if (this.visible) {\r\n                this.$containerEl.show();\r\n            }\r\n            else {\r\n                this.$containerEl.hide();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CorridorCollection.prototype, \"fullExtent\", {\r\n        get: function () {\r\n            var lyrs = [];\r\n            for (var _i = 0, _a = this._corridorArray; _i < _a.length; _i++) {\r\n                var c = _a[_i];\r\n                lyrs.push(c.layer);\r\n            }\r\n            return calcExtent.calculateExtent(lyrs);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CorridorCollection.prototype, \"inCreateModifyOperation\", {\r\n        /**\r\n         * if currently in a create or modify operation\r\n         * @returns {boolean} is creating or modifying\r\n         */\r\n        get: function () {\r\n            return this._inCreateModifyOperation;\r\n        },\r\n        /**\r\n         * if currently in a create or modify operation\r\n         * @param {boolean} isInCreateModifyOperation - is creating or modifying\r\n         */\r\n        set: function (isInCreateModifyOperation) {\r\n            this._inCreateModifyOperation = isInCreateModifyOperation;\r\n            if (this.inCreateModifyOperation) {\r\n                this.$innerContainer.addClass('corridor-collection-create-modify');\r\n            }\r\n            else {\r\n                this.$innerContainer.removeClass('corridor-collection-create-modify');\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CorridorCollection.prototype, \"showPopups\", {\r\n        /**\r\n         *\r\n         * @returns {boolean} if the corridor popups should be shown\r\n         */\r\n        get: function () {\r\n            return this._showPopups;\r\n        },\r\n        /**\r\n         *\r\n         * @param {boolean} show - if the corridor popups should be shown\r\n         */\r\n        set: function (show) {\r\n            this._showPopups = show;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CorridorCollection.prototype, \"corridorCount\", {\r\n        get: function () {\r\n            return this._corridorArray.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     *\r\n     * @param {string} corId - corridor id\r\n     * @returns {Corridor} the corridor matching the id in the lookup\r\n     */\r\n    CorridorCollection.prototype.getCorridorById = function (corId) {\r\n        return this._coridorLookup[corId];\r\n    };\r\n    CorridorCollection.prototype.loadExistingCorridors = function () {\r\n        var _this = this;\r\n        var loadedCount = 0;\r\n        var existingCorridors = document.getElementsByClassName(this._dataClass);\r\n        // parse the data from the hidden input elements\r\n        for (var n = 0; n < existingCorridors.length; n++) {\r\n            var el = existingCorridors[n];\r\n            var conf = new CorridorConfig_1.default(el);\r\n            var corridor = new Corridor_1.default(conf.startPdp, conf.endPdp, conf.startRp, conf.endRp, conf.startCounty, conf.endCounty, conf.hgwy, conf.routeId, {\r\n                loadedCallback: function () {\r\n                    loadedCount++;\r\n                    //something special when all the corridors have been loaded\r\n                    if (_this.corridorCount == loadedCount) {\r\n                        var ext = _this.fullExtent;\r\n                        if (ext) {\r\n                            _this._map.getView().fit(ext, _this._map.getSize());\r\n                        }\r\n                        _this.refreshHtmlCreate();\r\n                    }\r\n                }\r\n            });\r\n            corridor.setDbValues(conf);\r\n            if (n == 0) {\r\n                $('#primaryCounty').val(corridor.countyStart);\r\n                $('#primaryRdwyRteId').val(corridor.routeId);\r\n            }\r\n            this.addCorridorCreate(corridor, false);\r\n        }\r\n    };\r\n    return CorridorCollection;\r\n}());\r\nexports.CorridorCollection = CorridorCollection;\r\nnm.CorridorCollection = CorridorCollection;\r\nexports.default = CorridorCollection;\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/15/2016.\r\n */\r\nvar filterMmFlag_1 = __webpack_require__(26);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar constants = __webpack_require__(10);\r\nvar _DeficiencyBase_1 = __webpack_require__(42);\r\nvar objectHelpers_1 = __webpack_require__(21);\r\nvar filterContollingCriteria_1 = __webpack_require__(24);\r\nvar styles = __webpack_require__(7);\r\nvar hasMmFlag = 'hasMmFlag';\r\nvar hasCc = 'hasCc';\r\nvar rateFlag = 'rateFlag';\r\nvar kabCrshFlag = 'kabCrshFlag';\r\nvar Deficiency = (function (_super) {\r\n    __extends(Deficiency, _super);\r\n    function Deficiency() {\r\n        var _this = _super.call(this, \"Deficiencies\", styles.deficiencyStyle, 200, constants.defListId) || this;\r\n        _this.metaList = [];\r\n        _this.deficiencyList = [];\r\n        return _this;\r\n    }\r\n    /**\r\n     * initialize with the map\r\n     * @param  m - the ol map\r\n     */\r\n    Deficiency.prototype.init = function (m) {\r\n        var _this = this;\r\n        _super.prototype.init.call(this, m);\r\n        filterMmFlag_1.default.addChangeCallback(function () {\r\n            _this.deficiencyLayer.refresh();\r\n        });\r\n        filterContollingCriteria_1.default.addChangeCallback(function () {\r\n            _this.deficiencyLayer.refresh();\r\n        });\r\n        mapPopup_1.default.addVectorPopup(this.deficiencyLayer, function (props) {\r\n            // console.log(props);\r\n            var returnHtml = \"PDP ID: \" + props['pdpId'] + \"<br/>\";\r\n            var rates = [];\r\n            if (props['rateFlag'] != null) {\r\n                rates.push(\"Rate Flag: \" + props['rateFlag'].toFixed(4));\r\n            }\r\n            if (props['kabCrshFlag'] != null) {\r\n                rates.push(\"KAB Flag: \" + props['kabCrshFlag'].toFixed(4));\r\n            }\r\n            if (rates.length > 0) {\r\n                returnHtml += 'Metamanager<ul>';\r\n                for (var _i = 0, rates_1 = rates; _i < rates_1.length; _i++) {\r\n                    var m_1 = rates_1[_i];\r\n                    returnHtml += \"<li>\" + m_1 + \"</li>\";\r\n                }\r\n                returnHtml += '</ul>';\r\n            }\r\n            var ccs = [];\r\n            for (var _a = 0, _b = objectHelpers_1.keyValPairs(constants.controllingCriteriaProps); _a < _b.length; _a++) {\r\n                var cc = _b[_a];\r\n                if (props[cc.key]) {\r\n                    var newCc = \"<li>\";\r\n                    newCc += cc.value;\r\n                    var subEls = props[cc.key].split('::');\r\n                    newCc += '<ul>';\r\n                    for (var _c = 0, subEls_1 = subEls; _c < subEls_1.length; _c++) {\r\n                        var s = subEls_1[_c];\r\n                        if (!isNaN(parseInt(s)) || s.trim().length == 0) {\r\n                            continue;\r\n                        }\r\n                        newCc += \"<li>\" + s + \"</li>\";\r\n                    }\r\n                    newCc += '</ul>';\r\n                    newCc += '</li>';\r\n                    ccs.push(newCc);\r\n                }\r\n            }\r\n            if (ccs.length > 0) {\r\n                returnHtml += \"Geometric Deficiencies<ul>\";\r\n                for (var _d = 0, ccs_1 = ccs; _d < ccs_1.length; _d++) {\r\n                    var c = ccs_1[_d];\r\n                    returnHtml += c;\r\n                }\r\n                returnHtml += '</ul>';\r\n            }\r\n            return returnHtml;\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param {Corridor} c - the corridor to be added\r\n     */\r\n    Deficiency.prototype.addCorridor = function (c) {\r\n        var feats = c.layer.source.getFeatures();\r\n        for (var _i = 0, feats_1 = feats; _i < feats_1.length; _i++) {\r\n            var f = feats_1[_i];\r\n            var props = f.getProperties();\r\n            var triggerRateFlag = props['rateFlag'] >= 1;\r\n            var triggerKabFlag = props['kabCrshFlag'] >= 1;\r\n            var deficiencyList = [];\r\n            for (var _a = 0, _b = objectHelpers_1.keyValPairs(constants.controllingCriteriaProps); _a < _b.length; _a++) {\r\n                var f_1 = _b[_a];\r\n                var ccProps = props[f_1.key];\r\n                if (ccProps) {\r\n                    deficiencyList.push(f_1.value);\r\n                }\r\n            }\r\n            if (triggerRateFlag || triggerKabFlag || deficiencyList.length > 0) {\r\n                this.deficiencyLayer.source.addFeature(f);\r\n                var appendHtml = \"<span style=\\\"font-weight: bold; color: white\\\">\" + props['pdpId'] + \"</span>:&nbsp;\";\r\n                var defs = [];\r\n                if (triggerRateFlag && triggerKabFlag) {\r\n                    defs.push(\"<span style=\\\"color: \" + styles.mmBothColor + \"\\\">KAB,&nbsp;Crash Rate</span>\");\r\n                }\r\n                else if (triggerRateFlag) {\r\n                    defs.push(\"<span style=\\\"color: \" + styles.mmRateFlagColor + \"\\\">Crash Rate</span>\");\r\n                }\r\n                else if (triggerKabFlag) {\r\n                    defs.push(\"<span style=\\\"color: \" + styles.mmKabFlagColor + \"\\\">KAB</span>\");\r\n                }\r\n                appendHtml += defs.join(' ');\r\n                if (defs.length > 0) {\r\n                    appendHtml += ',&nbsp;';\r\n                }\r\n                if (deficiencyList.length > 0) {\r\n                    // console.log(deficiencyList);\r\n                    appendHtml += \"<span style=\\\"color: \" + styles.controllingCriteriaColor + \"\\\">\" +\r\n                        (deficiencyList.join(',&nbsp;') + \"</span>\");\r\n                }\r\n                this._summaryListItems.push({\r\n                    pdpId: props['pdpId'],\r\n                    liText: \"<li \" + constants.pdpDataAttr + \"=\\\"\" + props['pdpId'] + \"\\\">\" + appendHtml + \"</li>\"\r\n                });\r\n                // this.$summaryList.append(`<li ${constants.pdpDataAttr}=\"${props['pdpId']}\">${appendHtml}</li>`);\r\n            }\r\n        }\r\n    };\r\n    return Deficiency;\r\n}(_DeficiencyBase_1.default));\r\nexports.Deficiency = Deficiency;\r\nexports.default = new Deficiency();\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//\r\nvar SelectCounty_1 = __webpack_require__(46);\r\nvar SelectHighway_1 = __webpack_require__(47);\r\nvar SegmentPicker_1 = __webpack_require__(45);\r\nvar Corridor_1 = __webpack_require__(14);\r\nvar provide_1 = __webpack_require__(0);\r\nvar lyrStyles = __webpack_require__(7);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar makeGuid_1 = __webpack_require__(4);\r\nvar LayerEsriMapServer_1 = __webpack_require__(30);\r\nvar $ = __webpack_require__(1);\r\n__webpack_require__(1);\r\nvar nm = provide_1.default('ssa');\r\nvar PickerCollection = (function () {\r\n    /**\r\n     *\r\n     * @param {jQuery} parentDiv - container div\r\n     * @param {ol.Map} theMap - the main map\r\n     */\r\n    function PickerCollection(parentDiv, theMap) {\r\n        this._map = theMap;\r\n        parentDiv.append('<div>' +\r\n            '<input type=\"button\" value=\"Add Corridor\" class=\"btn btn-default picker-create-corridor\">' +\r\n            '<input type=\"button\" value=\"Zoom to Extent\" class=\"btn btn-default picker-zoom-extent\">' +\r\n            '</div>');\r\n        this.$createCorridorButton = parentDiv.find('.picker-create-corridor');\r\n        this.$zoomExtentButton = parentDiv.find('.picker-zoom-extent');\r\n        var pickerGuid = makeGuid_1.default();\r\n        parentDiv.append(\"<div id=\\\"\" + pickerGuid + \"\\\"></div>\");\r\n        this.$containerEl = $('#' + pickerGuid).addClass('picker-collection-container');\r\n        this.$containerEl.append('<div class=\"picker-collection\"><span class=\"corridor-picker-help\" title=\"Show Help\"></span></div>');\r\n        // this.$containerEl.append('<input type=\"button\" value=\"Preview\" class=\"btn btn-default picker-preview\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Add\" class=\"btn btn-default picker-add\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Modify\" class=\"btn btn-default picker-modify\" style=\"display: none;\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Cancel\" class=\"btn btn-default picker-cancel\">');\r\n        this.$innerContainer = this.$containerEl.find('.picker-collection');\r\n        this._dummyCorridor = new Corridor_1.default(1, 1, '', '', 1, 1, 'h', -1, {\r\n            cancelLoad: true,\r\n            color: lyrStyles.corridorPreviewColor\r\n        });\r\n        this._dummyCorridor.layer.zIndex = 10;\r\n        this._map.addLayer(this._dummyCorridor.olLayer);\r\n        this._addModifyEnabled = false;\r\n        /**\r\n         *\r\n         * @type {Corridor|undefined}\r\n         * @private\r\n         */\r\n        this._modifyCorridor = undefined;\r\n        // this.$btnPickerPreview = this.$containerEl.find('.picker-preview');\r\n        this.$btnPickerAdd = this.$containerEl.find('.picker-add');\r\n        this.$btnPickerModify = this.$containerEl.find('.picker-modify');\r\n        this.$btnPickerCancel = this.$containerEl.find('.picker-cancel');\r\n        this.countyStartSelect = new SelectCounty_1.default(this.$innerContainer, \"Start County\");\r\n        this.countyEndSelect = new SelectCounty_1.default(this.$innerContainer, \"End County\");\r\n        this.highwaySelect = new SelectHighway_1.default(this.$innerContainer);\r\n        this._metamanagerSegmentsLayer = new LayerEsriMapServer_1.default('http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/MM_All_Segments/MapServer', {\r\n            minZoom: 7,\r\n            visible: false,\r\n            name: 'Metamanager Segments',\r\n            opacity: 0.4\r\n        });\r\n        this._map.addLayer(this._metamanagerSegmentsLayer.olLayer);\r\n        this.segmentPickerFrom = new SegmentPicker_1.default(this, true);\r\n        this.segmentPickerTo = new SegmentPicker_1.default(this, false);\r\n        this._map.addLayer(this.segmentPickerFrom.segmentLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerTo.segmentLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerFrom.selectionLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerTo.selectionLayer.olLayer);\r\n        /**\r\n         *\r\n         * @type {CorridorCollection|undefined}\r\n         */\r\n        this.corridorCollection = undefined;\r\n        this._addHandlers();\r\n        this._helpDialogInit();\r\n    }\r\n    PickerCollection.prototype._addHandlers = function () {\r\n        var _this = this;\r\n        this.$createCorridorButton.click(function () {\r\n            _this.startPicker();\r\n            _this.$createCorridorButton.prop('disabled', true);\r\n        });\r\n        this.$zoomExtentButton.click(function () {\r\n            var ext = _this.corridorCollection.fullExtent;\r\n            if (ext) {\r\n                _this._map.getView().fit(ext, _this._map.getSize());\r\n            }\r\n        });\r\n        this.$btnPickerCancel.click(function () {\r\n            _this.stopPicker();\r\n        });\r\n        // this.$btnPickerPreview.click(() => {\r\n        //     this.previewCorridor(()=> {});\r\n        //     // this.addCorridor();\r\n        // });\r\n        this.$btnPickerAdd.click(function () {\r\n            _this.previewCorridor(_this.addCorridor);\r\n            // this.addCorridor();\r\n        });\r\n        this.$btnPickerModify.click(function () {\r\n            _this.previewCorridor(_this.modifyCorridor);\r\n        });\r\n        this.countyStartSelect.addChangeListener(function (v) {\r\n            \"use strict\";\r\n            _this.highwaySelect.setStartEndCounty(v, _this.countyEndSelect.selectedValue);\r\n            _this.addModifyButtonEnabled = false;\r\n            _this.segmentPickerTo.segmentLayer.visible = !_this.startEndCountySame;\r\n        });\r\n        this.countyEndSelect.addChangeListener(function (v) {\r\n            \"use strict\";\r\n            _this.highwaySelect.setStartEndCounty(_this.countyStartSelect.selectedValue, v);\r\n            _this.addModifyButtonEnabled = false;\r\n            _this.segmentPickerTo.segmentLayer.visible = !_this.startEndCountySame;\r\n        });\r\n        this.highwaySelect.addChangeListener(function (hwy) {\r\n            \"use strict\";\r\n            _this.segmentPickerFrom.setCountyAndRoute(_this.countyStartSelect.selectedValue, hwy);\r\n            _this.segmentPickerTo.setCountyAndRoute(_this.countyEndSelect.selectedValue, hwy);\r\n            _this.addModifyButtonEnabled = false;\r\n        });\r\n        this.segmentPickerFrom.addChangeListener(function () {\r\n            _this.addModifyButtonEnabled = false;\r\n        });\r\n        this.segmentPickerTo.addChangeListener(function () {\r\n            _this.addModifyButtonEnabled = false;\r\n        });\r\n    };\r\n    /**\r\n     * Configure the help dialog\r\n     * @private\r\n     */\r\n    PickerCollection.prototype._helpDialogInit = function () {\r\n        var _this = this;\r\n        var helpInfo = 'Corridors are defined by selecting in sequence the start county, highway, and end county ';\r\n        helpInfo += \"The reference points are then populated and can be selected either by using the combo box or \";\r\n        helpInfo += \"by clicking a segment in the map and clicking select in the resulting popup \";\r\n        helpInfo += \"Corridors are defined visually in the pickers as the start segment (green) and end segment (red) \";\r\n        helpInfo += \"inclusive of the corridor extents\";\r\n        $('body').append(\"<div class=\\\"corridor-picker-help-dialog\\\" title=\\\"Corridor Selection Help\\\">\" +\r\n            (\"<p style=\\\"text-align: justify\\\">\" + helpInfo + \"</p></div>\"));\r\n        this.helpDialog = $(\".corridor-picker-help-dialog\");\r\n        this.helpDialog.dialog({\r\n            modal: true,\r\n            autoOpen: false,\r\n            height: 450,\r\n            width: 650,\r\n            buttons: [\r\n                {\r\n                    text: \"OK\",\r\n                    click: function () {\r\n                        $(this).dialog(\"close\");\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        this.$containerEl.find('.corridor-picker-help').click(function () {\r\n            _this.helpDialog.dialog('open');\r\n        });\r\n    };\r\n    PickerCollection.prototype.previewCorridor = function (callback) {\r\n        var _this = this;\r\n        if (!this.segmentPickerFrom.selectedPdpId || !this.segmentPickerTo.selectedPdpId) {\r\n            alert('Select From and To Reference Points');\r\n            return;\r\n        }\r\n        this._map.removeLayer(this._dummyCorridor.layer.olLayer);\r\n        this._map.removeLayer(this._dummyCorridor.nodeLayer.olLayer);\r\n        this._dummyCorridor = new Corridor_1.default(this.segmentPickerFrom.selectedPdpId, this.segmentPickerTo.selectedPdpId, this.segmentPickerFrom.selectedText, this.segmentPickerTo.selectedText, this.countyStartSelect.selectedValue, this.countyEndSelect.selectedValue, this.highwaySelect.selectedText, this.highwaySelect.selectedValue, {\r\n            cancelLoad: true,\r\n            color: lyrStyles.corridorPreviewColor\r\n        });\r\n        this._dummyCorridor.layer.zIndex = 10;\r\n        this._map.addLayer(this._dummyCorridor.layer.olLayer);\r\n        this._map.addLayer(this._dummyCorridor.nodeLayer.olLayer);\r\n        this._dummyCorridor.load(function (c) {\r\n            _this._map.getView().fit(c.extent, _this._map.getSize());\r\n            _this.addModifyButtonEnabled = true;\r\n            callback.call(_this);\r\n        });\r\n    };\r\n    /**\r\n     * add a corridor\r\n     */\r\n    PickerCollection.prototype.addCorridor = function () {\r\n        var newCorridor = this._dummyCorridor.clone();\r\n        this.corridorCollection.addCorridorCreate(newCorridor);\r\n        this.segmentPickerTo.segmentLayer.visible = !this.startEndCountySame;\r\n        this.stopPicker();\r\n    };\r\n    PickerCollection.prototype.modifyCorridor = function () {\r\n        this._modifyCorridor.updateCorridor(this._dummyCorridor);\r\n        this.corridorCollection.refreshHtmlCreate();\r\n        this.stopPicker();\r\n    };\r\n    /**\r\n     * Populate the selections based on values from an existing corridor\r\n     * @param {Corridor} [existingCor=undefined] existing corridor if in an edit operation\r\n     */\r\n    PickerCollection.prototype.startPicker = function (existingCor) {\r\n        this.corridorCollection.inCreateModifyOperation = true;\r\n        this.$containerEl.show();\r\n        this.segmentPickerFrom.layersVisible = true;\r\n        this.segmentPickerTo.layersVisible = true;\r\n        this._metamanagerSegmentsLayer.visible = true;\r\n        this.corridorCollection.showPopups = false;\r\n        if (existingCor) {\r\n            this.$btnPickerAdd.hide();\r\n            this.$btnPickerModify.show();\r\n            this.countyStartSelect.box.val(existingCor.countyStart);\r\n            this.countyEndSelect.box.val(existingCor.countyEnd);\r\n            this.highwaySelect.setStartEndCounty(existingCor.countyStart, existingCor.countyEnd, existingCor.routeId);\r\n            this.segmentPickerFrom.setCountyAndRoute(existingCor.countyStart, existingCor.routeId, existingCor.pdpFrom);\r\n            this.segmentPickerTo.setCountyAndRoute(existingCor.countyEnd, existingCor.routeId, existingCor.pdpTo);\r\n            this._modifyCorridor = existingCor;\r\n            this._dummyCorridor.updateCorridor(existingCor);\r\n            this._map.getView().fit(this._dummyCorridor.extent, this._map.getSize());\r\n        }\r\n        else {\r\n            var $primCounty = $('#primaryCounty');\r\n            var $primRoute = $('#primaryRdwyRteId');\r\n            var primaryCounty = undefined;\r\n            var primaryRouteId = undefined;\r\n            if ($primCounty.length > 0) {\r\n                primaryCounty = $primCounty.val().length > 0 ? parseInt($primCounty.val()) : undefined;\r\n            }\r\n            if ($primRoute.length > 0) {\r\n                primaryRouteId = $primRoute.val().length > 0 ? parseInt($primRoute.val()) : undefined;\r\n            }\r\n            if (primaryCounty) {\r\n                this.countyStartSelect.box.val(primaryCounty);\r\n                this.countyEndSelect.box.val(primaryCounty);\r\n                this.highwaySelect.setStartEndCounty(primaryCounty, primaryCounty, primaryRouteId, true);\r\n            }\r\n            this.$btnPickerAdd.show();\r\n            this.$btnPickerModify.hide();\r\n        }\r\n    };\r\n    PickerCollection.prototype.stopPicker = function () {\r\n        this.corridorCollection.showPopups = true;\r\n        this.$btnPickerAdd.show();\r\n        this.$btnPickerModify.hide();\r\n        // this.$btnPickerModify.prop('disabled', true);\r\n        this.$containerEl.hide();\r\n        this.$createCorridorButton.prop('disabled', false);\r\n        // this.countyStartSelect.box.val(1).trigger('change');\r\n        this.corridorCollection.visible = true;\r\n        this._dummyCorridor.layer.clear();\r\n        this._modifyCorridor = undefined;\r\n        this._dummyCorridor.nodeLayer.olLayer.getSource().clear();\r\n        this.addModifyButtonEnabled = false;\r\n        this.corridorCollection.inCreateModifyOperation = false;\r\n        $('.corridor-tr-selected').removeClass('corridor-tr-selected');\r\n        this.segmentPickerFrom.layersVisible = false;\r\n        this.segmentPickerTo.layersVisible = false;\r\n        this._metamanagerSegmentsLayer.visible = false;\r\n        mapPopup_1.default.closePopup();\r\n    };\r\n    Object.defineProperty(PickerCollection.prototype, \"addModifyButtonEnabled\", {\r\n        /**\r\n         * Getter for if an add modify operation is happening {boolean}\r\n         * @returns {boolean} - if the add or modify operation is happening\r\n         */\r\n        get: function () {\r\n            return this._addModifyEnabled;\r\n        },\r\n        /**\r\n         * Setter for if an add modify operation is happening {boolean}\r\n         * @param {boolean} isEnabled - if enabled\r\n         */\r\n        set: function (isEnabled) {\r\n            this._addModifyEnabled = isEnabled;\r\n            // this.$btnPickerAdd.prop('disabled', !this.addModifyButtonEnabled);\r\n            // this.$btnPickerModify.prop('disabled', !this.addModifyButtonEnabled);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PickerCollection.prototype, \"startEndCountySame\", {\r\n        /**\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        get: function () {\r\n            var isSame = this.countyStartSelect.selectedValue == this.countyEndSelect.selectedValue;\r\n            this.segmentPickerFrom.segmentLayer.name = isSame ? 'Start/End Segments' : 'Start Segment';\r\n            return isSame;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return PickerCollection;\r\n}());\r\nnm.PickerCollection = PickerCollection;\r\nexports.default = PickerCollection;\r\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 7/15/2016.\r\n */\r\nvar LayerBaseVectorGeoJson_1 = __webpack_require__(8);\r\nvar SortedFeatures_1 = __webpack_require__(13);\r\nvar constants = __webpack_require__(10);\r\nvar $ = __webpack_require__(1);\r\nvar DeficiencyBase = (function () {\r\n    /**\r\n     *\r\n     * @param {string} layerName - layer name\r\n     * @param {function|object} layerStyle - layer style\r\n     * @param {number} z - z index\r\n     * @param {string} summaryListId - summaryListId\r\n     */\r\n    function DeficiencyBase(layerName, layerStyle, z, summaryListId) {\r\n        this.deficiencyLayer = new LayerBaseVectorGeoJson_1.default('', {\r\n            zIndex: z,\r\n            name: layerName\r\n        });\r\n        this.deficiencyLayer.style = layerStyle;\r\n        this._summaryListItems = [];\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|undefined}\r\n         * @private\r\n         */\r\n        this._sortedFeatures = undefined;\r\n        /**\r\n         *\r\n         * @type {ol.Map|undefined}\r\n         * @private\r\n         */\r\n        this._map = undefined;\r\n        this._summaryListId = summaryListId;\r\n        /**\r\n         *\r\n         * @type {jQuery|undefined}\r\n         * @private\r\n         */\r\n        this.$summaryList = undefined;\r\n    }\r\n    /**\r\n     * initialize with the map\r\n     * @param {ol.Map} m - the ol map\r\n     * @abstract\r\n     */\r\n    DeficiencyBase.prototype.init = function (m) {\r\n        this._map = m;\r\n        m.addLayer(this.deficiencyLayer.olLayer);\r\n        this.$summaryList = $(\"#\" + this._summaryListId);\r\n    };\r\n    /**\r\n     *\r\n     * @param {Corridor} c - the corridor to be added\r\n     * @abstract\r\n     */\r\n    DeficiencyBase.prototype.addCorridor = function (c) {\r\n        // let feats = c.layer.source.getFeatures();\r\n        //\r\n        // let $mmDeficiencyList = $(`#${constants.mmFlagListId}`);\r\n        //\r\n        // for (let f of feats) {\r\n        //     // f.setProperties()\r\n        //     let props = f.getProperties();\r\n        //     let rate = props['rateFlag'];\r\n        //     let kab = props['kabFlag'];\r\n        //\r\n        //     let triggerRateFlag = typeof rate == 'number' && rate > 1;\r\n        //     let triggerKabFlag = typeof kab == 'number' && kab > 1;\r\n        //\r\n        //     if (triggerRateFlag || triggerKabFlag) {\r\n        //         this.deficiencyLayer.source.addFeature(f);\r\n        //         mmFlagIndex++;\r\n        //\r\n        //         f.setProperties({mmId: 'MM' + mmFlagIndex.toFixed()});\r\n        //         let appendHtml = `<b>MM${mmFlagIndex.toFixed()}</b>:&nbsp;`;\r\n        //         let flags = [];\r\n        //         if (triggerRateFlag) {\r\n        //             flags.push('Crash Rate');\r\n        //         }\r\n        //         if (triggerKabFlag) {\r\n        //             flags.push('KAB');\r\n        //         }\r\n        //\r\n        //         appendHtml += flags.join(', ');\r\n        //         $mmDeficiencyList.append(`<li ${constants.pdpDataAttr}=\"${props['pdpId']}\">${appendHtml}</li>`);\r\n        //     }\r\n        // }\r\n    };\r\n    /**\r\n     *\r\n     * @param pdpId\r\n     * @returns {ol.Feature|undefined}\r\n     */\r\n    DeficiencyBase.prototype.getFeatureById = function (pdpId) {\r\n        return this._sortedFeatures.getFeature(pdpId);\r\n    };\r\n    /**\r\n     * @abstract\r\n     */\r\n    DeficiencyBase.prototype.afterLoad = function () {\r\n        this._sortedFeatures = new SortedFeatures_1.default(this.deficiencyLayer.features, 'pdpId');\r\n        var _this = this;\r\n        this._summaryListItems.sort(function (a, b) {\r\n            if (a.pdpId == b.pdpId) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return a.pdpId < b.pdpId ? -1 : 1;\r\n            }\r\n        });\r\n        for (var _i = 0, _a = this._summaryListItems; _i < _a.length; _i++) {\r\n            var i = _a[_i];\r\n            this.$summaryList.append(i.liText);\r\n        }\r\n        this.$summaryList.find('li').click(function () {\r\n            var $this = $(this);\r\n            var theFeature = _this.getFeatureById(parseInt($this.attr(constants.pdpDataAttr)));\r\n            _this._map.getView().fit(theFeature.getGeometry().getExtent(), _this._map.getSize());\r\n            _this._map.getView().setZoom(_this._map.getView().getZoom() - 1);\r\n        });\r\n    };\r\n    return DeficiencyBase;\r\n}());\r\nexports.default = DeficiencyBase;\r\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 7/13/2016.\r\n */\r\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// uncomment this to use the example crash data\r\n// import exampleCrashData from './_exampleCrashData';\r\nvar exampleCrashData = undefined;\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar objHelp = __webpack_require__(21);\r\nvar LayerBaseVectorGeoJson_1 = __webpack_require__(8);\r\nvar filterCrash_1 = __webpack_require__(25);\r\nvar proj = __webpack_require__(5);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar layerStyles_1 = __webpack_require__(7);\r\nvar popup_1 = __webpack_require__(11);\r\nvar popup_2 = __webpack_require__(11);\r\nvar ol = __webpack_require__(2);\r\nvar $ = __webpack_require__(1);\r\nvar CrashData = (function () {\r\n    function CrashData() {\r\n        this._crashHtmlLookup = {};\r\n        this._crashArrayLookup = {};\r\n        this.pointCrashes = new LayerBaseVectorGeoJson_1.default('', {\r\n            name: \"Crash Points\",\r\n            zIndex: 204,\r\n            minZoom: 10,\r\n            renderOrder: function (a, b) {\r\n                var sevOrder = ['P', 'C', 'B', 'A', 'K'];\r\n                var sevA = a.getProperties()['injSvr'];\r\n                var sevB = b.getProperties()['injSvr'];\r\n                var sevAInd = sevOrder.indexOf(sevA);\r\n                var sevBInd = sevOrder.indexOf(sevB);\r\n                if (sevAInd == sevBInd) {\r\n                    return 0;\r\n                }\r\n                return sevAInd > sevBInd ? 1 : -1;\r\n            }\r\n        });\r\n        this.pointCrashes.style = layerStyles_1.crashPointStyle;\r\n    }\r\n    /**\r\n     *\r\n     * @param m\r\n     * @param ssaId\r\n     * @param snapshot\r\n     */\r\n    CrashData.prototype.init = function (m, ssaId, snapshot) {\r\n        var _this = this;\r\n        mapPopup_1.default.addVectorPopup(this.pointCrashes, popup_1.crashPointPopup);\r\n        filterCrash_1.default.addChangeCallback(function () {\r\n            _this.pointCrashes.refresh();\r\n        });\r\n        ajaxGetters_1.default.getCrashes(ssaId, snapshot, function (d) {\r\n            _this._processCrashData(d);\r\n        });\r\n        m.addLayer(this.pointCrashes.olLayer);\r\n    };\r\n    CrashData.prototype._processCrashData = function (d) {\r\n        for (var _i = 0, _a = objHelp.keyValPairs(d); _i < _a.length; _i++) {\r\n            var itm = _a[_i];\r\n            /**\r\n             *\r\n             * @type {Array.<CrashDataObject>}\r\n             */\r\n            var _crashes = itm.value;\r\n            var crashes = [];\r\n            var addedCrashDocNumbers = [];\r\n            for (var _b = 0, _crashes_1 = _crashes; _b < _crashes_1.length; _b++) {\r\n                var c = _crashes_1[_b];\r\n                if (addedCrashDocNumbers.indexOf(c.doctnmbr) > -1) {\r\n                    continue;\r\n                }\r\n                addedCrashDocNumbers.push(c.doctnmbr);\r\n                crashes.push(c);\r\n            }\r\n            this._crashHtmlLookup[itm.key] = popup_2.crashInfoHelper(crashes);\r\n            this._crashArrayLookup[itm.key] = crashes;\r\n            for (var _c = 0, crashes_1 = crashes; _c < crashes_1.length; _c++) {\r\n                var c = crashes_1[_c];\r\n                if (!(c.lon && c.lat)) {\r\n                    continue;\r\n                }\r\n                var geom = new ol.geom.Point([c.lon, c.lat]);\r\n                geom.transform(proj.proj4326, proj.proj3857);\r\n                var p = new ol.Feature(geom);\r\n                c['injSvr'] = c['injSvr'] || 'O';\r\n                p.setProperties(c);\r\n                this.pointCrashes.source.addFeature(p);\r\n            }\r\n        }\r\n        // flash a crashes loaded message\r\n        var $crashesLoadMsg = $('.crashes-loaded-msg');\r\n        if ($crashesLoadMsg) {\r\n            $crashesLoadMsg.fadeIn();\r\n            setTimeout(function () {\r\n                $crashesLoadMsg.fadeOut();\r\n            }, 4000);\r\n        }\r\n        else {\r\n            console.log('get crashes message element not found');\r\n        }\r\n    };\r\n    CrashData.prototype.getCrashSummary = function (pdp) {\r\n        var summ = this._crashHtmlLookup[pdp.toString()];\r\n        return summ || '';\r\n    };\r\n    return CrashData;\r\n}());\r\nexports.CrashData = CrashData;\r\nexports.default = new CrashData();\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 5/17/2016.\r\n */\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('ssa');\r\nexports.countyLookup = {\r\n    \"1\": \"Adams\",\r\n    \"2\": \"Ashland\",\r\n    \"3\": \"Barron\",\r\n    \"4\": \"Bayfield\",\r\n    \"5\": \"Brown\",\r\n    \"6\": \"Buffalo\",\r\n    \"7\": \"Burnett\",\r\n    \"8\": \"Calumet\",\r\n    \"9\": \"Chippewa\",\r\n    \"10\": \"Clark\",\r\n    \"11\": \"Columbia\",\r\n    \"12\": \"Crawford\",\r\n    \"13\": \"Dane\",\r\n    \"14\": \"Dodge\",\r\n    \"15\": \"Door\",\r\n    \"16\": \"Douglas\",\r\n    \"17\": \"Dunn\",\r\n    \"18\": \"Eau Claire\",\r\n    \"19\": \"Florence\",\r\n    \"20\": \"Fond du Lac\",\r\n    \"21\": \"Forest\",\r\n    \"22\": \"Grant\",\r\n    \"23\": \"Green\",\r\n    \"24\": \"Green Lake\",\r\n    \"25\": \"Iowa\",\r\n    \"26\": \"Iron\",\r\n    \"27\": \"Jackson\",\r\n    \"28\": \"Jefferson\",\r\n    \"29\": \"Juneau\",\r\n    \"30\": \"Kenosha\",\r\n    \"31\": \"Kewaunee\",\r\n    \"32\": \"La Crosse\",\r\n    \"33\": \"Lafayette\",\r\n    \"34\": \"Langlade\",\r\n    \"35\": \"Lincoln\",\r\n    \"36\": \"Manitowoc\",\r\n    \"37\": \"Marathon\",\r\n    \"38\": \"Marinette\",\r\n    \"39\": \"Marquette\",\r\n    \"40\": \"Milwaukee\",\r\n    \"41\": \"Monroe\",\r\n    \"42\": \"Oconto\",\r\n    \"43\": \"Oneida\",\r\n    \"44\": \"Outagamie\",\r\n    \"45\": \"Ozaukee\",\r\n    \"46\": \"Pepin\",\r\n    \"47\": \"Pierce\",\r\n    \"48\": \"Polk\",\r\n    \"49\": \"Portage\",\r\n    \"50\": \"Price\",\r\n    \"51\": \"Racine\",\r\n    \"52\": \"Richland\",\r\n    \"53\": \"Rock\",\r\n    \"54\": \"Rusk\",\r\n    \"55\": \"Saint Croix\",\r\n    \"56\": \"Sauk\",\r\n    \"57\": \"Sawyer\",\r\n    \"58\": \"Shawano\",\r\n    \"59\": \"Sheboygan\",\r\n    \"60\": \"Taylor\",\r\n    \"61\": \"Trempealeau\",\r\n    \"62\": \"Vernon\",\r\n    \"63\": \"Vilas\",\r\n    \"64\": \"Walworth\",\r\n    \"65\": \"Washburn\",\r\n    \"66\": \"Washington\",\r\n    \"67\": \"Waukesha\",\r\n    \"68\": \"Waupaca\",\r\n    \"69\": \"Waushara\",\r\n    \"70\": \"Winnebago\",\r\n    \"71\": \"Wood\",\r\n    \"73\": \"Menominee\"\r\n};\r\nnm.countyLookup = exports.countyLookup;\r\n/**\r\n *\r\n * @param {string|number} countyId\r\n * @returns {string}\r\n */\r\nfunction getCountyById(countyId) {\r\n    \"use strict\";\r\n    if (typeof countyId == 'number') {\r\n        countyId = countyId.toFixed();\r\n    }\r\n    return exports.countyLookup[countyId];\r\n}\r\nexports.getCountyById = getCountyById;\r\nnm.getCountyById = getCountyById;\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar provide_1 = __webpack_require__(0);\r\nvar SortedFeatures_1 = __webpack_require__(13);\r\nvar LayerBaseVectorGeoJson_1 = __webpack_require__(8);\r\nvar mapPopup_1 = __webpack_require__(3);\r\nvar SelectBoxBase_1 = __webpack_require__(12);\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar layerStyles = __webpack_require__(7);\r\nvar projections_1 = __webpack_require__(5);\r\nvar $ = __webpack_require__(1);\r\nvar ol = __webpack_require__(2);\r\nvar nm = provide_1.default('ssa.select');\r\nvar SegmentPicker = (function (_super) {\r\n    __extends(SegmentPicker, _super);\r\n    /**\r\n     *\r\n     * @param {PickerCollection} pickerColl - picker collection\r\n     * @param {boolean} isFrom - is this the start (from) picker\r\n     */\r\n    function SegmentPicker(pickerColl, isFrom) {\r\n        var _this = this;\r\n        function contentGen(guid) {\r\n            var outString = '';\r\n            outString += \"<div style=\\\"position: relative;\\\" class=\\\"select-picker-map-container\\\">\";\r\n            outString += \"<select id=\\\"\" + guid + \"\\\"></select>\";\r\n            outString += \"</div>\";\r\n            return outString;\r\n        }\r\n        _this = _super.call(this, pickerColl.$innerContainer, isFrom ? 'Ref. Point #1' : 'Ref. Point #2', contentGen) || this;\r\n        _this._isFrom = isFrom;\r\n        _this._pickerColl = pickerColl;\r\n        /**\r\n         *\r\n         * @type {number|undefined}\r\n         * @private\r\n         */\r\n        _this._selectedPdpId = undefined;\r\n        _this.addChangeListener(function (v) {\r\n            _this.selectedPdpId = parseInt(v);\r\n        });\r\n        _this._box.keyup(function () {\r\n            if (_this.selectedPdpId != parseInt(_this.selectedValue.toString())) {\r\n                _this._box.trigger('change');\r\n            }\r\n        });\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|undefined}\r\n         * @private\r\n         */\r\n        _this._sortedFeatures = undefined;\r\n        /**\r\n         *\r\n         * @type {LayerBaseVectorGeoJson}\r\n         * @protected\r\n         */\r\n        _this._segmentLayer = new LayerBaseVectorGeoJson_1.default('', {\r\n            minZoom: 6,\r\n            name: _this._isFrom ? 'Start Segment' : 'End Segment',\r\n            transform: { dataProjection: projections_1.proj3857, featureProjection: projections_1.proj3857 },\r\n            style: layerStyles.segmentLayer,\r\n            visible: false\r\n        });\r\n        _this._segNodeLayer = new LayerBaseVectorGeoJson_1.default('', {\r\n            style: layerStyles.segNodeStyle,\r\n            minZoom: 11,\r\n            visible: false\r\n        });\r\n        /**\r\n         *\r\n         * @type {LayerBaseVectorGeoJson}\r\n         * @private\r\n         */\r\n        _this._segmentSelectionLayer = new LayerBaseVectorGeoJson_1.default('', {\r\n            style: new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: _this._isFrom ? layerStyles.fromSelectionColor : layerStyles.toSelectionColor,\r\n                    width: 8\r\n                })\r\n            }),\r\n            minZoom: 6,\r\n            visible: false,\r\n            zIndex: _this._isFrom ? 100 : 101\r\n        });\r\n        _this._selectBtnClass = _this._isFrom ? \"select-seg-btn-from\" : \"select-seg-btn-to\";\r\n        _this._selectBtnClassTo = 'select-seg-btn-to';\r\n        mapPopup_1.default.addVectorPopup(_this._segmentLayer, function (props) {\r\n            console.log(props);\r\n            var returnHtml = '<table class=\"mm-popup-table\">';\r\n            returnHtml += \"<tr><td>PdpId</td><td>\" + props['pdpId'] + \"</td>;\";\r\n            returnHtml += \"<td rowspan=\\\"5\\\">\";\r\n            if (_this._pickerColl.startEndCountySame) {\r\n                returnHtml += \"<input type=\\\"button\\\" id='\" + props['pdpId'] + \"' class=\\\"\" + _this._selectBtnClass + \"\\\" value=\\\"Select Start\\\"/>\";\r\n                returnHtml += \"<input type=\\\"button\\\" id='\" + props['pdpId'] + \"' class=\\\"\" + _this._selectBtnClassTo + \"\\\" value=\\\"Select End\\\"/>\";\r\n            }\r\n            else {\r\n                returnHtml += \"<input type=\\\"button\\\" id='\" + props['pdpId'] + \"' class=\\\"\" + _this._selectBtnClass + \"\\\" value=\\\"Select\\\"/>\";\r\n            }\r\n            returnHtml += \"</td></tr>\";\r\n            returnHtml += \"<tr><td>Hwy</td><td>\" + props['stdName'] + \"</td></tr>\";\r\n            returnHtml += \"<tr><td>DivUnd</td><td>\" + props['divUnd'] + \"</td></tr>\";\r\n            returnHtml += \"<tr><td>From</td><td>\" + props['startRp'] + \"</td></tr>\";\r\n            returnHtml += \"<tr><td>To</td><td>\" + props['endRp'] + \"</td></tr>\";\r\n            returnHtml += '</table>';\r\n            return returnHtml;\r\n        });\r\n        // add the popup change function to find the select button\r\n        mapPopup_1.default.addPopupChangedFunction(function () {\r\n            var selectButton = $(\".\" + _this._selectBtnClass);\r\n            if (selectButton.length > 0) {\r\n                var __this_1 = _this;\r\n                selectButton.click(function () {\r\n                    __this_1.selectedPdpId = this['id'];\r\n                });\r\n            }\r\n        });\r\n        _this._enabled = false;\r\n        _this._layersVisible = false;\r\n        _this._box.click(function (evt) {\r\n            evt.stopPropagation();\r\n        });\r\n        _this._box.parent('div').click(function () {\r\n            if (_this._sortedFeatures == null) {\r\n                return;\r\n            }\r\n            var selectedFeature = _this._sortedFeatures.getFeature(_this.selectedPdpId);\r\n            if (selectedFeature == null) {\r\n                return;\r\n            }\r\n            mapPopup_1.default.map.getView().fit(selectedFeature.getGeometry().getExtent(), mapPopup_1.default.map.getSize());\r\n            mapPopup_1.default.map.getView().setZoom(mapPopup_1.default.map.getView().getZoom() - 2);\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * @param {Array<object>} arr - array of returned objects, implementation defined in derived classes\r\n     */\r\n    SegmentPicker.prototype._processAjaxResult = function (arr) {\r\n        var _this = this;\r\n        arr.sort(function (a, b) {\r\n            var c = _this._isFrom ? a['properties']['startRp'] : a['properties']['endRp'];\r\n            var d = _this._isFrom ? b['properties']['startRp'] : b['properties']['endRp'];\r\n            if (c == d) {\r\n                return 0;\r\n            }\r\n            return c < d ? -1 : 1;\r\n        });\r\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\r\n            var feat = arr_1[_i];\r\n            var props = feat['properties'];\r\n            if (this._isFrom) {\r\n                this._box.append(\"<option value=\\\"\" + props['pdpId'] + \"\\\">\" + props['startRp'] + \"</option>\");\r\n            }\r\n            else {\r\n                this._box.append(\"<option value=\\\"\" + props['pdpId'] + \"\\\">\" + props['endRp'] + \"</option>\");\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param {string|number} county - county id as string or number\r\n     * @param {string|number|null} rteId - routeId\r\n     * @param {number|undefined} [pdpId=undefined] - the pdp id to be set on load\r\n     */\r\n    SegmentPicker.prototype.setCountyAndRoute = function (county, rteId, pdpId) {\r\n        var _this = this;\r\n        pdpId = typeof pdpId == 'number' ? pdpId : undefined;\r\n        this.selectedPdpId = undefined;\r\n        this._box.html('');\r\n        this._box.addClass('refresh').removeClass('refresh');\r\n        if (mapPopup_1.default) {\r\n            mapPopup_1.default.closePopup();\r\n        }\r\n        if (typeof county == 'string') {\r\n            county = parseInt(county);\r\n        }\r\n        if (rteId == null) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        if (typeof rteId == 'string') {\r\n            rteId = parseInt(rteId);\r\n        }\r\n        ajaxGetters_1.default.getSegments(county, rteId, function (d) {\r\n            _this._segmentLayer.clear();\r\n            _this._segNodeLayer.clear();\r\n            _this._processAjaxResult(d['features']);\r\n            if (d['features'].length > 0) {\r\n                _this.enabled = true;\r\n                _this._segmentLayer.addFeatures(d);\r\n                var feats = _this._segmentLayer.source.getFeatures();\r\n                _this._sortedFeatures = new SortedFeatures_1.default(feats, 'pdpId');\r\n                _this._setExtent();\r\n                if (typeof pdpId == 'number') {\r\n                    // this._box.val(pdpId.toFixed());\r\n                    _this.selectedPdpId = pdpId;\r\n                }\r\n                else {\r\n                    _this._box.trigger('change');\r\n                }\r\n                for (var i = 0; i < feats.length; i++) {\r\n                    var coords = feats[i].getGeometry()['getCoordinates']();\r\n                    if (coords.length > 0) {\r\n                        var startPoint = new ol.geom.Point(coords[0]);\r\n                        var endPoint = new ol.geom.Point(coords[coords.length - 1]);\r\n                        _this._segNodeLayer.source.addFeature(new ol.Feature(startPoint));\r\n                        _this._segNodeLayer.source.addFeature(new ol.Feature(endPoint));\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                _this.enabled = false;\r\n            }\r\n        });\r\n    };\r\n    SegmentPicker.prototype._setExtent = function () {\r\n    };\r\n    Object.defineProperty(SegmentPicker.prototype, \"enabled\", {\r\n        /**\r\n         * @returns {boolean} if enabled\r\n         */\r\n        get: function () {\r\n            return this._enabled;\r\n        },\r\n        /**\r\n         *\r\n         * @param {boolean} isEnabled - is enabled\r\n         * @private\r\n         */\r\n        set: function (isEnabled) {\r\n            this._enabled = isEnabled;\r\n            this._box.prop('disabled', !isEnabled);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SegmentPicker.prototype, \"layersVisible\", {\r\n        get: function () {\r\n            return this._layersVisible;\r\n        },\r\n        set: function (lyrsVisible) {\r\n            this._layersVisible = lyrsVisible;\r\n            if (this._isFrom) {\r\n                this.segmentLayer.visible = this.layersVisible;\r\n                this._segNodeLayer.visible = this.layersVisible;\r\n            }\r\n            else {\r\n                this.segmentLayer.visible = this.layersVisible && !this._pickerColl.startEndCountySame;\r\n                this._segNodeLayer.visible = this.layersVisible && !this._pickerColl.startEndCountySame;\r\n            }\r\n            this.selectionLayer.visible = this.layersVisible;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SegmentPicker.prototype, \"selectedPdpId\", {\r\n        /**\r\n         *\r\n         * @returns {number|undefined} selected id\r\n         */\r\n        get: function () {\r\n            return this._selectedPdpId;\r\n        },\r\n        /**\r\n         * set the currently selected pdp id\r\n         * @param {number|undefined} newId - new selected id\r\n         */\r\n        set: function (newId) {\r\n            if (mapPopup_1.default) {\r\n                mapPopup_1.default.closePopup();\r\n            }\r\n            if (typeof newId == 'string') {\r\n                newId = parseInt(newId);\r\n            }\r\n            if (newId == this._selectedPdpId) {\r\n                return;\r\n            }\r\n            this._selectedPdpId = newId;\r\n            this.selectionLayer.source.clear();\r\n            if (this._selectedPdpId != undefined) {\r\n                this._box.val(this.selectedPdpId);\r\n                var selectedFeature = this._sortedFeatures.getFeature(this.selectedPdpId);\r\n                this.selectionLayer.source.addFeature(selectedFeature);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SegmentPicker.prototype.clear = function () {\r\n        this._box.html('');\r\n        this.selectedPdpId = undefined;\r\n    };\r\n    Object.defineProperty(SegmentPicker.prototype, \"segmentLayer\", {\r\n        /**\r\n         * get the segment layer with the mm segments in the county and route id\r\n         * @returns {LayerBaseVectorGeoJson} - the segment layer\r\n         */\r\n        get: function () {\r\n            return this._segmentLayer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SegmentPicker.prototype, \"selectionLayer\", {\r\n        /**\r\n         * get the selection hayer\r\n         * @returns {LayerBaseVectorGeoJson} the selection layer for this picker\r\n         */\r\n        get: function () {\r\n            return this._segmentSelectionLayer;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SegmentPicker;\r\n}(SelectBoxBase_1.default));\r\nexports.SegmentPicker = SegmentPicker;\r\nnm.SegmentPicker = SegmentPicker;\r\nexports.default = SegmentPicker;\r\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 6/14/2016.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SelectBoxBase_1 = __webpack_require__(12);\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('ssa.select');\r\nvar SelectCounty = (function (_super) {\r\n    __extends(SelectCounty, _super);\r\n    /**\r\n     *\r\n     * @param {jQuery} parent\r\n     * @param {string} labelContent\r\n     */\r\n    function SelectCounty(parent, labelContent) {\r\n        var _this = _super.call(this, parent, labelContent) || this;\r\n        ajaxGetters_1.default.getAllCounties(function (d) {\r\n            for (var _i = 0, d_1 = d; _i < d_1.length; _i++) {\r\n                var c = d_1[_i];\r\n                _this.box.append(\"<option value=\\\"\" + c['id'] + \"\\\" \" + (c['primary'] ? 'selected' : '') + \">\" + c['name'] + \"</option>\");\r\n            }\r\n            _this.box.trigger('change');\r\n        });\r\n        return _this;\r\n    }\r\n    return SelectCounty;\r\n}(SelectBoxBase_1.default));\r\nexports.SelectCounty = SelectCounty;\r\nnm.SelectStartCounty = SelectCounty;\r\nexports.default = SelectCounty;\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by gavorhes on 5/12/2016.\r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SelectBoxBase_1 = __webpack_require__(12);\r\nvar ajaxGetters_1 = __webpack_require__(6);\r\nvar provide_1 = __webpack_require__(0);\r\nvar nm = provide_1.default('ssa.select');\r\nvar SelectHighway = (function (_super) {\r\n    __extends(SelectHighway, _super);\r\n    /**\r\n     *\r\n     * @param {jQuery} parent - parent element\r\n     */\r\n    function SelectHighway(parent) {\r\n        return _super.call(this, parent, \"Highway\") || this;\r\n    }\r\n    // /**\r\n    //  *\r\n    //  * @param {number} countyId - county id\r\n    //  * @param {string|undefined} [hwy=undefined] - route id for initial selection\r\n    //  */\r\n    // setStartCounty(countyId, hwy) {\r\n    //     hwy = typeof hwy == 'string' ? hwy : undefined;\r\n    //     this.box.html('');\r\n    //     this.box.addClass('refresh').removeClass('refresh');\r\n    //\r\n    //     Ajx.getHighways(countyId, (d) => {\r\n    //         \"use strict\";\r\n    //\r\n    //         for (let h of d) {\r\n    //             this.box.append(`<option>${h['name']}</option>`);\r\n    //         }\r\n    //         if (d) {\r\n    //             if (hwy) {\r\n    //                 this.box.val(hwy);\r\n    //             } else {\r\n    //                 this.box.trigger('change');\r\n    //\r\n    //             }\r\n    //         }\r\n    //     });\r\n    // }\r\n    /**\r\n     *\r\n     * @param {number|string|null} startId - start county id\r\n     * @param {number|string|null} endId - end county id\r\n     * @param {number|string|null} [routeId=undefined] - route id for selection\r\n     * @param {boolean} [forceTrigger=false] - force change trigger to populate the rp pickers\r\n     */\r\n    SelectHighway.prototype.setStartEndCounty = function (startId, endId, routeId, forceTrigger) {\r\n        var _this = this;\r\n        if (forceTrigger === void 0) { forceTrigger = false; }\r\n        forceTrigger = typeof forceTrigger == 'boolean' ? forceTrigger : false;\r\n        if (startId == null || startId == undefined || endId == null) {\r\n            return;\r\n        }\r\n        if (typeof routeId == 'number') {\r\n            routeId = routeId.toFixed();\r\n        }\r\n        this.box.html('');\r\n        this.box.addClass('refresh').removeClass('refresh');\r\n        if (typeof startId == 'string') {\r\n            startId = parseInt(startId);\r\n        }\r\n        if (typeof endId == 'string') {\r\n            endId = parseInt(endId);\r\n        }\r\n        if (typeof routeId == 'string') {\r\n            routeId = parseInt(routeId);\r\n        }\r\n        ajaxGetters_1.default.getHwyByStartEndCounty(startId, endId, function (d) {\r\n            if (d.length > 0) {\r\n                d.sort(function (a, b) {\r\n                    var aName = a['name'];\r\n                    var bName = b['name'];\r\n                    if (aName == bName) {\r\n                        return 0;\r\n                    }\r\n                    else {\r\n                        return aName > bName ? 1 : -1;\r\n                    }\r\n                });\r\n                for (var _i = 0, d_1 = d; _i < d_1.length; _i++) {\r\n                    var c = d_1[_i];\r\n                    _this.box.append(\"<option value=\\\"\" + c['id'] + \"\\\" \" + (c['primary'] ? 'selected' : '') + \">\" + c['name'] + \"</option>\");\r\n                }\r\n                if (routeId) {\r\n                    _this.box.val(routeId.toFixed());\r\n                }\r\n                if (!routeId || forceTrigger) {\r\n                    _this.box.trigger('change');\r\n                }\r\n                _this.box.prop('disabled', false);\r\n            }\r\n            else {\r\n                _this.box.prop('disabled', true);\r\n                _this.box.trigger('change');\r\n            }\r\n        });\r\n    };\r\n    return SelectHighway;\r\n}(SelectBoxBase_1.default));\r\nexports.SelectHighway = SelectHighway;\r\nnm.SelectHighway = SelectHighway;\r\nexports.default = SelectHighway;\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Created by gavorhes on 10/4/2016.\r\n */\r\nvar SsaMapCreate_1 = __webpack_require__(27);\r\nvar SsaMapView_1 = __webpack_require__(28);\r\nwindow['SsaMapCreate'] = SsaMapCreate_1.SsaMapCreate;\r\nwindow['SsaMapView'] = SsaMapView_1.SsaMapView;\r\ntry {\r\n    glob['SsaMapCreate'] = SsaMapCreate_1.SsaMapCreate;\r\n    glob['SsaMapView'] = SsaMapView_1.SsaMapView;\r\n}\r\ncatch (ex) {\r\n    var glob_1 = {};\r\n    glob_1['SsaMapCreate'] = SsaMapCreate_1.SsaMapCreate;\r\n    glob_1['SsaMapView'] = SsaMapView_1.SsaMapView;\r\n}\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// ssaApps.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a021472f691137e5e80e","/**\r\n * Created by gavorhes on 12/10/2015.\r\n */\r\n\r\ndeclare const window: Window;\r\n/**\r\n * create a namespace on the gv object\r\n * @param {string} namespace to create\r\n * @returns {object} object representing the namespace\r\n */\r\nfunction provide(namespace: string){\r\n    \"use strict\";\r\n    if (typeof (<any>window).gv == 'undefined'){\r\n        (<any>window).gv = {};\r\n    }\r\n\r\n    let parts = namespace.split('.');\r\n    let nameSpace = (<any>window).gv;\r\n\r\n    for (let i=0; i< parts.length; i++){\r\n        let newObject = nameSpace[parts[i]];\r\n\r\n        if (typeof newObject == 'undefined'){\r\n            nameSpace[parts[i]] = {};\r\n        }\r\n\r\n        nameSpace = nameSpace[parts[i]];\r\n    }\r\n\r\n    return nameSpace;\r\n}\r\n\r\nprovide('util');\r\n(<any>window).gv.util.provide = provide;\r\n\r\nexport default provide;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/util/provide.ts","module.exports = $;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 1\n// module chunks = 0","module.exports = ol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ol\"\n// module id = 2\n// module chunks = 0","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapPopupCls from './mapPopupCls';\r\n\r\n/**\r\n * The single popup object catch is that it is common to multimap pages\r\n * @type {MapPopupCls}\r\n */\r\nexport const mapPopup = new MapPopupCls() as MapPopupCls;\r\nexport default mapPopup;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapPopup.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport provide from './provide';\r\nlet nm = provide('util');\r\n\r\n\r\n/**\r\n * guids are used to uniquely identify groups and features\r\n * @returns {string} a new guid\r\n */\r\nexport function makeGuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\r\n            .replace(/[xy]/g, function (c) {\r\n                let r = Math.random() * 16 | 0, v = c == 'x' ? r : r & 0x3 | 0x8;\r\n\r\n                return v.toString(16);\r\n            });\r\n\r\n}\r\nnm.makeGuid = makeGuid;\r\nexport default makeGuid;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/util/makeGuid.ts","/**\r\n * Created by gavorhes on 10/3/2016.\r\n */\r\nimport ol = require('custom-ol');\r\n\r\n\r\nexport const proj4326 = new ol.proj.Projection({code: 'EPSG:4326'});\r\nexport const proj3857 = new ol.proj.Projection({code: 'EPSG:3857'});\r\nexport const proj3070 = new ol.proj.Projection({code: 'EPSG:3070'});\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/projections.ts","/**\r\n * Created by gavorhes on 5/12/2016.\r\n */\r\n\r\n\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport $ = require('jquery');\r\n\r\nlet home = $('#site-root').val();\r\n\r\nif (window.location.port == '5001'){\r\n    home ='http://localhost:5004/'\r\n}\r\n\r\nconst getStartCountiesUrl = home + 'getStartCounties';\r\nconst getHighwaysUrl = home + 'getHighways';\r\nconst getEndCountiesUrl = home + 'getEndCounties';\r\nconst getSegmentsUrl = home + 'getSegments';\r\nconst getCorridorUrl = home + 'getCorridor';\r\nconst getCrashesUrl = home + 'getCrashes';\r\nconst getAllCountiesUrl = home + 'getAllCounties';\r\nconst getAllHighwaysForStartEndCountyUrl = home + 'getAllHighwaysForStartEndCounty';\r\nconst getCcGeomUrl = home + 'getCcGeom';\r\nconst nm = provide('ssa');\r\n\r\n\r\nexport interface ajaxCallback{\r\n    (inObject) : any\r\n}\r\n\r\n\r\n/**\r\n * inner function to help ajax\r\n * @param {string} url - resource url\r\n * @param {object} [params={}] - get params\r\n * @param {ajaxCallback} callback - callback function\r\n */\r\nfunction _ajaxInner(url, params, callback) {\r\n    \"use strict\";\r\n    $.get(url, params, callback, 'json').fail(() => {\r\n        let msg = \"error getting: \" + url + JSON.stringify(params);\r\n        console.warn(msg);\r\n    });\r\n}\r\n\r\n/**\r\n * outer function to help ajax\r\n * @param {string} url - resource url\r\n * @param {ajaxCallback} callback - callback function\r\n * @param {object} [params={}] get params\r\n * @param {ajaxCallback} [calbackHelper=undefined] - callback helper\r\n */\r\nfunction _ajaxHelper(url: string, callback: ajaxCallback, params:Object = {}, calbackHelper? : ajaxCallback) {\r\n    \"use strict\";\r\n\r\n    params[(Math.random() * 1000000).toFixed()] = (Math.random() * 1000000).toFixed();\r\n\r\n    if (typeof calbackHelper == 'function') {\r\n        let newCallback = function (d) {\r\n            d = calbackHelper(d);\r\n            callback(d);\r\n        };\r\n        _ajaxInner(url, params, newCallback);\r\n    } else {\r\n        _ajaxInner(url, params, callback);\r\n    }\r\n}\r\n\r\n/**\r\n * sort function for counties\r\n * @param {Array<object>} d - county object\r\n * @returns {Array<object>} sorted array of county key val pair objects\r\n */\r\nlet _countySort = (d) => {\r\n    d.sort((a, b) => {\r\n        if (a['name'] == b['name']) {\r\n            return 0;\r\n        } else {\r\n            return a['name'] < b['name'] ? -1 : 1;\r\n        }\r\n    });\r\n    \r\n    return d;\r\n};\r\n\r\n\r\n\r\n/**\r\n * static methods to make ajax requests\r\n */\r\nexport class AjaxGetters {\r\n\r\n    /**\r\n     * Do not instantiate this class - only static methods\r\n     */\r\n    constructor(){\r\n        throw 'this class should not be instantiated';\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * @static\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getStartCounties(callback: ajaxCallback) {\r\n        \"use strict\";\r\n\r\n        _ajaxHelper(getStartCountiesUrl, callback, {}, _countySort);\r\n    }\r\n\r\n    /**\r\n     * Get the highways based on the start county\r\n     * @param {number} startCountyId - start county id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getHighways(startCountyId: number, callback: ajaxCallback) {\r\n        \"use strict\";\r\n        let params = {\"startCountyId\": startCountyId};\r\n\r\n        _ajaxHelper(getHighwaysUrl, callback, params);\r\n    }\r\n\r\n\r\n    /**\r\n     * Get the highways based on the start county\r\n     * @param {string} highwayName - highway name\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getEndCounties(highwayName: string, callback: ajaxCallback) {\r\n        \"use strict\";\r\n        let params = {\"highwayName\": highwayName};\r\n\r\n        _ajaxHelper(getEndCountiesUrl, callback, params, _countySort);\r\n    }\r\n\r\n\r\n    /**\r\n     * get the segments based on county and route id\r\n     * @param {number} county - county id\r\n     * @param {number} routeId - route id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getSegments(county: number, routeId: string|number, callback: ajaxCallback) {\r\n        \"use strict\";\r\n\r\n        let routeIdNum;\r\n        if (typeof routeId == 'string') {\r\n            routeIdNum = parseInt(routeId as string);\r\n        } else {\r\n            routeIdNum = routeId;\r\n        }\r\n\r\n        let params = {\"routeid\": routeIdNum, \"county\": county};\r\n\r\n        let $mm = $('#hidden-mm-version');\r\n\r\n        if ($mm.length > 0){\r\n            params['mm'] = $mm.val();\r\n        }\r\n\r\n\r\n        _ajaxHelper(getSegmentsUrl, callback, params);\r\n    }\r\n\r\n\r\n    /**\r\n     * get corridor based on start and end pdp id\r\n     * @param {number} startPdp - start pdp id\r\n     * @param {number} endPdp - end pdp id\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getCorridor(startPdp: number, endPdp: number,  callback: ajaxCallback) {\r\n        \"use strict\";\r\n        let params = {\"from\": startPdp, \"to\": endPdp};\r\n\r\n        let $mm = $('#hidden-mm-version');\r\n\r\n        if ($mm.length > 0){\r\n            params['mm'] = $mm.val();\r\n        }\r\n\r\n        _ajaxHelper(getCorridorUrl, callback, params);\r\n    }\r\n\r\n\r\n    /**\r\n     * Get the crash data\r\n     * @param {number} ssaId\r\n     * @param {number} snapshot\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getCrashes(ssaId: number, snapshot: number, callback: ajaxCallback){\r\n        \"use strict\";\r\n\r\n        let params = {\r\n            'ssaId': ssaId,\r\n            'snapshot': snapshot\r\n        };\r\n\r\n        _ajaxHelper(getCrashesUrl, callback, params);\r\n    }\r\n\r\n    /**\r\n     * Get all counties as an array\r\n     * @param {ajaxCallback} callback - callback function\r\n     */\r\n    public static getAllCounties(callback: ajaxCallback) {\r\n        \"use strict\";\r\n        let params = {};\r\n\r\n        _ajaxHelper(getAllCountiesUrl, callback, params);\r\n    }\r\n\r\n\r\n    /**\r\n     * Get highways based on start and end counties\r\n     * @param {number} startCountyId - start county id\r\n     * @param {number} endCountyId - end county id\r\n     * @param {ajaxCallback} callback - callback function\r\n     *\r\n     */\r\n    public static getHwyByStartEndCounty(startCountyId: number, endCountyId: number, callback: ajaxCallback) {\r\n        \"use strict\";\r\n\r\n        let params = {\r\n            'startCountyId': startCountyId,\r\n            'endCountyId': endCountyId\r\n        };\r\n\r\n        _ajaxHelper(getAllHighwaysForStartEndCountyUrl, callback, params);\r\n    }\r\n\r\n    public static getCcGeom(ssaId: number, snapshot: number, callback: ajaxCallback){\r\n        \"use strict\";\r\n\r\n        let params = {\r\n            'ssaId': ssaId,\r\n            'snapshot': snapshot\r\n        };\r\n\r\n        _ajaxHelper(getCcGeomUrl, callback, params);\r\n    }\r\n}\r\n\r\nexport default AjaxGetters;\r\nnm.AjaxGetters = AjaxGetters;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajaxGetters.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport ol = require('custom-ol');\r\n\r\nimport {proj3857} from \"webmapsjs/dist/olHelpers/projections\";\r\nimport {LayerBaseVectorGeoJsonOptions} from 'webmapsjs/dist/layers/LayerBaseVectorGeoJson';\r\nimport filterCrash from './filters/filterCrash';\r\nimport * as colorUtil from 'webmapsjs/dist/util/colors';\r\n// import filterControllingCritera from '../filters/filterContollingCriteria';\r\nimport filterControllingCritera from './filters/filterContollingCriteria';\r\nimport filterMmFlag from './filters/filterMmFlag';\r\nimport * as constants from './constants';\r\n\r\n\r\n\r\n\r\n\r\nexport const segmentLayer = new ol.style.Style({\r\n    stroke: new ol.style.Stroke({color: 'darkblue', width: 5})\r\n});\r\n\r\nexport const fromSelectionColor = '#48FD14';\r\nexport const toSelectionColor = '#EE0071';\r\nexport const corridorPreviewColor = 'black';\r\nexport const mmRateFlagColor = 'yellow';\r\nexport const mmKabFlagColor = 'orange';\r\nexport const mmBothColor = 'red';\r\nexport const controllingCriteriaColor = constants.controllingCriteriaColor;\r\n\r\n/**\r\n *\r\n * @type {Array<string>}\r\n */\r\nlet returnedColors = [];\r\nlet colorOptions = ['#FF00FF', '#7FFF00', '#FA8072',\r\n    '#FF6347', '#40E0D0', '#ADFF2F', '#6495ED',\r\n    '#FF8C00', '#7FFFD4', '#DA70D6'];\r\n\r\n\r\nexport interface mmProps {\r\n    mmId?: string;\r\n    pdpId?: number;\r\n    rateFlag: number;\r\n    kabCrshFlag: number\r\n}\r\n\r\nexport function txtFunc(p: mmProps): ol.style.Text{\r\n    return new ol.style.Text(\r\n        {\r\n            text: p.pdpId.toFixed(),\r\n            scale: 1.5,\r\n            stroke: new ol.style.Stroke({\r\n                color: 'black',\r\n                width: 2\r\n            }),\r\n            fill: new ol.style.Fill({\r\n                color: 'white'\r\n            })\r\n        }\r\n    );\r\n}\r\n\r\n/**\r\n * return a random color for styling\r\n * @returns {string}\r\n */\r\nexport function randomColor(): string {\r\n    \"use strict\";\r\n    if (returnedColors.length == colorOptions.length) {\r\n        returnedColors = [];\r\n    }\r\n    while (true) {\r\n        let c = colorOptions[Math.floor(Math.random() * colorOptions.length)];\r\n        if (returnedColors.indexOf(c) < 0) {\r\n            returnedColors.push(c);\r\n\r\n            return c;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param name\r\n * @param color\r\n * @param visible\r\n * @returns {{minZoom: number, name: *, transform: {dataProjection: string, featureProjection: string}, style: ol.style.Style, visible: *}}\r\n */\r\nexport function layerConfigHelper(name: string, color: string, visible: boolean): LayerBaseVectorGeoJsonOptions{\r\n    \"use strict\";\r\n    return {\r\n        minZoom: 4,\r\n        name: name,\r\n        transform: {dataProjection: proj3857, featureProjection: proj3857},\r\n        style: new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: color,\r\n                width: 6\r\n            })\r\n        }),\r\n        visible: visible\r\n    };\r\n}\r\n\r\n\r\nexport const segNodeStyle = new ol.style.Style({\r\n    image: new ol.style.RegularShape({\r\n        radius: 6,\r\n        points: 4,\r\n        fill: new ol.style.Fill({\r\n            color: 'rgb(0, 0, 0)'\r\n        }),\r\n        stroke: new ol.style.Stroke({color: 'rgb(0, 0, 0', width: 2})\r\n    })\r\n});\r\n\r\n\r\n/**\r\n *\r\n * @param  feature - the input feature\r\n * @returns return style or null\r\n */\r\nexport const crashPointStyle = (feature: ol.Feature): ol.style.Style[] => {\r\n    \"use strict\";\r\n\r\n    let props = feature.getProperties();\r\n\r\n    let crashColor = filterCrash.getCrashColor(props['injSvr']);\r\n    if (!crashColor) {\r\n        return null;\r\n    }\r\n\r\n    let crashColorFill = colorUtil.rgbToRgba(crashColor, 0.9);\r\n\r\n    return [new ol.style.Style({\r\n        image: new ol.style.Circle({\r\n            radius: 6,\r\n            fill: new ol.style.Fill({\r\n                color: crashColorFill\r\n            }),\r\n            stroke: new ol.style.Stroke({color: 'black', width: 1})\r\n        })\r\n    })];\r\n};\r\n\r\nexport function deficiencyStyle(feature: ol.Feature): ol.style.Style[] {\r\n    \"use strict\";\r\n\r\n    let props: mmProps = feature.getProperties() as mmProps;\r\n\r\n    let returnStyles = [];\r\n\r\n\r\n    let showCc = false;\r\n\r\n    for (let cc of filterControllingCritera.allValues) {\r\n        if (props[cc] && filterControllingCritera.valIsOn(cc)) {\r\n            showCc = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (showCc) {\r\n        returnStyles.push(new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: controllingCriteriaColor,\r\n                width: 14\r\n            }),\r\n            text: txtFunc(props as mmProps)\r\n        }));\r\n    }\r\n\r\n    let rateOrKab = (props.rateFlag >= 1 && filterMmFlag.mmRateFlagOn) || (props.kabCrshFlag >= 1 && filterMmFlag.mmKabFlagOn);\r\n    let onlyRate = props.rateFlag >= 1 && filterMmFlag.mmRateFlagOn;\r\n    let onlyKab = props.kabCrshFlag >= 1 && filterMmFlag.mmKabFlagOn;\r\n    let rateAndKab = onlyRate && onlyKab;\r\n\r\n    let color;\r\n\r\n    if (onlyRate) {\r\n        color = mmRateFlagColor;\r\n    }\r\n\r\n    if (onlyKab) {\r\n        color = mmKabFlagColor;\r\n    }\r\n\r\n    if (rateAndKab) {\r\n        color = mmBothColor;\r\n    }\r\n\r\n\r\n    if (rateOrKab) {\r\n\r\n        returnStyles.push(new ol.style.Style({\r\n            stroke: new ol.style.Stroke({\r\n                color: color,\r\n                width: 5\r\n            }),\r\n            text: txtFunc(props as mmProps)\r\n        }));\r\n    }\r\n\r\n    if (returnStyles.length > 0) {\r\n        return returnStyles;\r\n    } else {\r\n        return null\r\n    }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layerStyles.ts","/**\r\n * Created by gavorhes on 11/2/2015.\r\n */\r\n\r\nimport {LayerBaseVector, LayerBaseVectorOptions} from './LayerBaseVector';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nimport {MapMoveCls} from \"../olHelpers/mapMoveCls\";\r\nimport * as proj from '../olHelpers/projections';\r\nimport {proj3857} from \"../olHelpers/projections\";\r\n\r\nlet nm = provide('layers');\r\n\r\nexport interface crsTransform {\r\n    dataProjection?: ol.proj.Projection;\r\n    featureProjection?: ol.proj.Projection;\r\n}\r\n\r\n\r\nexport interface LayerBaseVectorGeoJsonOptions extends LayerBaseVectorOptions {\r\n    transform?: crsTransform;\r\n    mapMoveObj?: MapMoveCls;\r\n}\r\n\r\n/**\r\n * The Vector GeoJson Layer\r\n * @augments LayerBaseVector\r\n */\r\nexport class LayerBaseVectorGeoJson extends LayerBaseVector {\r\n    _geoJsonFormat: ol.format.GeoJSON;\r\n    _transform: crsTransform;\r\n\r\n    /**\r\n     * @param {string|null} url - resource url, set to '' to make blank layer\r\n     * @param {object} options - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     *\r\n     * @param {boolean} [options.autoLoad=false] if the layer should auto load if not visible\r\n     * @param {object} [options.style=undefined] the layer style, use openlayers default style if not defined\r\n     * @param {boolean} [options.onDemand=false] if the layer should be loaded by extent on map move\r\n     * @param {number} [options.onDemandDelay=300] delay before the map move callback should be called\r\n     *\r\n     * @param {object} [options.transform={}] SR transform, set as false for no transform\r\n     * @param {string} options.transform.dataProjection=EPSG:4326 the data CRS\r\n     * @param {string} options.transform.featureProjection=EPSG:3857 the feature/map CRS\r\n     * @param {mapMoveMakeGetParams} [options.mapMoveMakeGetParams=function(lyr, extent, zoomLevel){}] function to create additional map move params\r\n     * @param {MapMoveCls} [options.mapMoveObj=mapMove] alternate map move object for use with multi map pages\r\n     */\r\n    constructor(url?: string, options: LayerBaseVectorGeoJsonOptions = {}) {\r\n        url = typeof url == 'string' ? url : '';\r\n        super(url, options);\r\n\r\n        this._geoJsonFormat = new ol.format.GeoJSON();\r\n\r\n        this._transform = options.transform || {};\r\n        this._transform.dataProjection = this._transform.dataProjection || proj.proj4326;\r\n        this._transform.featureProjection = this._transform.featureProjection || proj3857;\r\n\r\n        if (this.autoLoad || this.visible) {\r\n            this._load();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add feature collection\r\n     * @param {object} featureCollection - as geojson object\r\n     */\r\n    addFeatures(featureCollection: any) {\r\n        this.source.addFeatures(\r\n            this._geoJsonFormat.readFeatures(featureCollection,\r\n                {dataProjection: this._transform.dataProjection,\r\n                    featureProjection: this._transform.featureProjection}\r\n                )\r\n        );\r\n    }\r\n\r\n\r\n    /**\r\n     * trigger load features\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    _load() {\r\n\r\n        if (super._load()) {\r\n            return true;\r\n        }\r\n\r\n        $.get(this._url,\r\n            this._params,\r\n            (d) => {\r\n                this.addFeatures(d);\r\n                this.loadCallback(this);\r\n            }, 'json').fail(\r\n            function () {\r\n                this._loaded = false;\r\n            }\r\n        );\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * callback function on map move\r\n     * @param {object} d the json response\r\n     * @override\r\n     */\r\n    mapMoveCallback(d: Object) {\r\n        super.mapMoveCallback(d);\r\n        this._source.addFeatures(this._geoJsonFormat.readFeatures(d,\r\n            {featureProjection: this._transform.featureProjection, dataProjection: this._transform.dataProjection}));\r\n    }\r\n}\r\n\r\nnm.LayerBaseVectorGeoJson = LayerBaseVectorGeoJson;\r\nexport default LayerBaseVectorGeoJson;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/layers/LayerBaseVectorGeoJson.ts","/**\r\n * Created by gavorhes on 7/18/2016.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport {LayerBaseVector} from \"../layers/LayerBaseVector\";\r\n\r\n\r\nconst nm = provide('util');\r\n\r\n/**\r\n *\r\n * @param {Array<LayerBaseVector>|Array<ol.layer.Vector>|LayerBaseVector|ol.layer.Vector|*} layers - array of layers or single\r\n * @returns {ol.Extent|Array<number>|*} - collective extent\r\n */\r\nexport function calculateExtent(layers: ol.layer.Vector[]|LayerBaseVector[]): ol.Extent|Array<number>| ol.Extent| number[] {\r\n    \"use strict\";\r\n\r\n    let hasExtent = false;\r\n\r\n    let minX = 10E100;\r\n    let minY = 10E100;\r\n    let maxX = -10E100;\r\n    let maxY = -10E100;\r\n\r\n    for (let lyr of layers) {\r\n\r\n        let olLayer: ol.layer.Vector = (lyr as LayerBaseVector).olLayer || lyr as ol.layer.Vector;\r\n        \r\n        \r\n        if (olLayer.getSource().getFeatures().length > 0) {\r\n            hasExtent = true;\r\n            let ext = olLayer.getSource().getExtent();\r\n            minX = ext[0] < minX ? ext[0] : minX;\r\n            minY = ext[1] < minY ? ext[1] : minY;\r\n            maxX = ext[2] > maxX ? ext[2] : maxX;\r\n            maxY = ext[3] > maxY ? ext[3] : maxY;\r\n        }\r\n    }\r\n\r\n    if (hasExtent) {\r\n        return [minX, minY, maxX, maxY];\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nnm.calculateExtent = calculateExtent;\r\n \r\n\r\n/**\r\n * given one or an array of layers, fit to the map\r\n * @param layers - array of layers or single\r\n * @param  mp - the map to fit\r\n * @param [zoomOut=undefined] - levels to zoom out after fit\r\n */\r\nexport function fitToMap(layers: ol.layer.Vector[]|LayerBaseVector[], mp: ol.Map, zoomOut?: number){\r\n    \"use strict\";\r\n\r\n    let ext = calculateExtent(layers);\r\n    \r\n    if (typeof ext == 'undefined'){\r\n        return;\r\n    }\r\n    \r\n    mp.getView().fit(ext as ol.Extent, mp.getSize());\r\n    \r\n    if (typeof zoomOut == 'number'){\r\n        mp.getView().setZoom(mp.getView().getZoom() - zoomOut);\r\n    }\r\n}\r\n\r\nnm.calculateExtent = calculateExtent;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/extentUtil.ts","/**\r\n * Created by gavorhes on 8/17/2016.\r\n */\r\n\r\n\r\nexport const mmFlagListId = 'mm-deficiency-list';\r\nexport const ccListId = 'cc-deficiency-list';\r\nexport const pdpDataAttr = 'data-pdp-id';\r\nexport const mmFlagColor = '#00FF00';\r\nexport const controllingCriteriaColor = '#00FF00';\r\nexport const defListId = 'deficiency-list';\r\nexport const defColor = 'white';\r\n\r\n\r\n// export const contollingCriteriaLookup = {\r\n//     'ccDesignSpeed': 'Design Speed',\r\n//     'Grade': 'Grade',\r\n//     'Lane Width': 'Lane Width',\r\n//     'Stopping Sight Distance': 'Stopping Sight Distance',\r\n//     'Shoulder Width': 'Shoulder Width',\r\n//     'Pavement Cross Slope': 'Pavement Cross Slope',\r\n//     'Horizontal Alignment': 'Horizontal Alignment',\r\n//     'Vertical Clearance': 'Vertical Clearance',\r\n//     'Superelevation': 'Superelevation',\r\n//     'Structural Capacity': 'Structural Capacity'\r\n// };\r\n\r\nexport const propNames = ['ccDesignSpeed', 'ccLaneWidth', 'ccShoulderWidth', 'ccHorizontalCurve', 'ccSuperelevation',\r\n        'ccMaximumGrade', 'ccStoppingSight', 'ccCrossSlope', 'ccVerticalClearance', 'ccDesignLoading'];\r\n\r\nexport const propValues = ['Design Speed', 'Lane Width', 'Shoulder Width', 'Horizontal Alignment', 'Superelevation',\r\n        'Grade', 'Stopping Sight Distance', 'Pavement Cross Slope', 'Vertical Clearance', 'Structural Capacity'];\r\n\r\nexport const controllingCriteriaProps = {};\r\n\r\n\r\nfor (let i = 0; i < propNames.length; i++){\r\n    controllingCriteriaProps[propNames[i]] = propValues[i];\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","/**\r\n * Created by glenn on 6/30/2017.\r\n */\r\nimport iCrashData from './collections/iCrashData';\r\nimport $ = require('jquery');\r\n\r\nconst crashReportURl = 'https://transportal.cee.wisc.edu/applications/crash-reports/retrieveCrashReport.do?doctnmbr=';\r\n\r\nlet $showCrashReport = $('#hidden-show-crash-report');\r\n\r\nlet showCrashReport = false;\r\n\r\n\r\n\r\nif ($showCrashReport){\r\n    let crashReportVal = $showCrashReport.val();\r\n\r\n    if (typeof crashReportVal == 'string' && crashReportVal.toLowerCase().trim() == 'y'){\r\n        showCrashReport = true;\r\n    }\r\n}\r\n\r\n\r\nexport const mmPopupContent = (props: Object) => {\r\n\r\n    let returnHtml = '<table class=\"mm-popup-table\">';\r\n    returnHtml += `<tr><td>PdpId</td><td>${props['pdpId']}</td></tr>`;\r\n    returnHtml += `<tr><td>Highway</td><td>${props['stdName']}</td></tr>`;\r\n    returnHtml += `<tr><td>Description</td><td>${props['rpDesc'] ? props['rpDesc'] : '-'}</td></tr>`;\r\n    returnHtml += `<tr><td>Divided</td><td>${props['divUnd']}</td></tr>`;\r\n    returnHtml += `<tr><td>From RP</td><td>${props['startRp']}</td></tr>`;\r\n    returnHtml += `<tr><td>To RP</td><td>${props['endRp']}</td></tr>`;\r\n    returnHtml += '</table>';\r\n\r\n    return returnHtml;\r\n};\r\n\r\n\r\n\r\nconst crashProps = [\r\n    'doctnmbr',\r\n    // 'multiflag',\r\n    'accDate',\r\n    'ntfyHour',\r\n    'county',\r\n    'municipality',\r\n    'munitype',\r\n    'onHwyRp',\r\n    'onHwyDir',\r\n    'onStr',\r\n    'athHwy',\r\n    'atStr',\r\n    'intDir',\r\n    'intDis',\r\n    'accdSvr',\r\n    'injSvr',\r\n    'totFatl',\r\n    'toInj',\r\n    'accdType',\r\n    'mnrColl',\r\n    'accdLoc',\r\n    'hwyClass',\r\n    'roadCond',\r\n    'wthrCond',\r\n    'consZone',\r\n    'alcFlag',\r\n    'bikeFlag',\r\n    'cyclFlag',\r\n    'pedFlag',\r\n    'totVeh',\r\n    'lon',\r\n    'lat'\r\n];\r\n\r\n\r\n\r\nfunction injColor(inj: string): string {\r\n    \"use strict\";\r\n\r\n    let color = {\r\n        'K': 'rgb(255,0,0)',\r\n        'A': 'rgb(255,165,0)',\r\n        'B': 'rgb(255,255,0)',\r\n        'C': 'rgb(153,255,153)',\r\n        'P': 'rgb(141,227,230)'\r\n    }[inj];\r\n\r\n    return color || 'rgba(255,255,255,0)';\r\n}\r\n\r\n\r\n\r\nfunction processVal(v) {\r\n    if (v == null || typeof v == 'undefined') {\r\n        return '';\r\n    } else {\r\n        return v;\r\n    }\r\n}\r\n\r\nfunction crashReportDownload(docNum: string): string {\r\n    return `<a class=\"crash-map-download\" title=\"Download Crash Report\" target=\"_blank\" href=\"${crashReportURl}${docNum}\"></a>`\r\n}\r\n\r\n\r\nexport const crashPointPopup = (props: { [s: string]: any }): string => {\r\n    let returnHtml = '<table class=\"crash-popup-table\">';\r\n\r\n    for (let i = 0; i < crashProps.length; i++) {\r\n        let p = crashProps[i];\r\n        let v = processVal(props[p]);\r\n\r\n        if (i == 0 && showCrashReport){\r\n            v = `<span style=\"margin-right: 3px\">${v}</span>${crashReportDownload(v)}`;\r\n        }\r\n\r\n        returnHtml += `<tr><td>${p}&nbsp;&nbsp;</td><td>${v}</td></tr>`;\r\n    }\r\n    returnHtml += '</table>';\r\n\r\n    return returnHtml;\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @param {Array<CrashDataObject>} crashData - array of crash data\r\n * @returns {string} crash summary table html\r\n * @private\r\n */\r\nexport function crashInfoHelper(crashData: Array<iCrashData>): string {\r\n    \"use strict\";\r\n    crashData.sort(function (a, b) {\r\n        let dteA = (new Date(a['dte'] + ' ' + a['time'])).getTime();\r\n        let dteB = (new Date(b['dte'] + ' ' + b['time'])).getTime();\r\n\r\n        if (dteA == dteB) {\r\n            return 0;\r\n        } else {\r\n            return dteA > dteB ? -1 : 1;\r\n        }\r\n    });\r\n\r\n    let returnHtml = '';\r\n    returnHtml += '<ul class=\"crash-list\">';\r\n\r\n    let crashSummary = {};\r\n\r\n    for (let c of crashData) {\r\n\r\n        if (typeof crashSummary[c.injSvr] == 'undefined') {\r\n            crashSummary[c.injSvr] = 1;\r\n        } else {\r\n            crashSummary[c.injSvr]++;\r\n        }\r\n\r\n        returnHtml += `<li style=\"background-color: ${injColor(c.injSvr)};\">`;\r\n\r\n        if (showCrashReport){\r\n            returnHtml += crashReportDownload(c.doctnmbr);\r\n        }\r\n\r\n        returnHtml += c.accDate ? c.accDate : '';\r\n\r\n        if (c.mnrColl) {\r\n            returnHtml += ', ' + c.mnrColl;\r\n        }\r\n\r\n        if (c.injSvr) {\r\n            returnHtml += ', ' + c.injSvr;\r\n        }\r\n\r\n        returnHtml += '</li>';\r\n    }\r\n    returnHtml += '</ul>';\r\n\r\n    let crashType = {\r\n        'K': 'Fatal',\r\n        'A': 'Incapacitating',\r\n        'B': 'Non-incapacitating',\r\n        'C': 'Possible Injury',\r\n        'P': 'Property Damage'\r\n    };\r\n\r\n    let tableContent = '<table class=\"crash-summary-table\">';\r\n    tableContent += `<tr><th colspan=\"2\">Crash Summary</th></tr>`;\r\n    tableContent += `<tr><td>Total</td><td>${crashData.length}</td></tr>`;\r\n\r\n    if (crashData.length > 0) {\r\n        for (let k of ['K', 'A', 'B', 'C', 'P']) {\r\n            if (typeof crashSummary[k] != 'undefined') {\r\n                tableContent += `<tr><td>${crashType[k]}</td><td>${crashSummary[k]}</td></tr>`;\r\n            }\r\n        }\r\n    }\r\n\r\n    tableContent += '</table>';\r\n    returnHtml = tableContent + returnHtml;\r\n\r\n    return returnHtml;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/popup.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport makeGuid from '../util/makeGuid';\r\nimport provide from '../util/provide';\r\nconst nm = provide('domUtil');\r\n\r\nexport interface selectChangeCallback{\r\n    /**\r\n     *\r\n     * @param theValue the current select value of the select box\r\n     */\r\n    (theValue: string) : void\r\n}\r\n\r\n/**\r\n * must return in the contents <select id=\"${guid}\"></select> among other things\r\n */\r\nexport interface contentGenerator{\r\n    /**\r\n     * @param aGuid\r\n     */\r\n    (aGuid: string): string\r\n}\r\n\r\n\r\nexport class SelectBoxBase{\r\n    _$container: JQuery;\r\n    $label: JQuery;\r\n    _box: JQuery;\r\n    _changeListeners: Array<selectChangeCallback>;\r\n    /**\r\n     *\r\n     * @param {jQuery} parent - parent container\r\n     * @param {string} labelContent\r\n     * @param {contentGenerator} [contentGen=undefined]\r\n     */\r\n    constructor(parent: JQuery, labelContent: string, contentGen?: contentGenerator){\r\n        let guidTop = makeGuid();\r\n        let guid = makeGuid();\r\n\r\n        let htmlString = `<div id=\"${guidTop}\">`;\r\n        htmlString += `<label for=\"${guid}\">${labelContent}</label>`;\r\n\r\n        if (contentGen){\r\n            htmlString += contentGen(guid);\r\n        } else {\r\n            htmlString += `<select id=\"${guid}\"></select>`;\r\n        }\r\n        htmlString += '</div>';\r\n\r\n        parent.append(htmlString);\r\n\r\n        this._$container = parent.find('#' + guidTop);\r\n\r\n        this.$label = this._$container.find('label');\r\n\r\n        /**\r\n         *\r\n         * @type {Array<selectChangeCallback>}\r\n         * @private\r\n         */\r\n        this._changeListeners = [];\r\n\r\n        this._box = parent.find(`#${guid}`);\r\n        \r\n        if (!this._box){\r\n            throw 'the select box was not found';\r\n        }\r\n\r\n        this._box.change(() => {\r\n            this.changed();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {jQuery}\r\n     */\r\n    get box(){\r\n        return this._box;\r\n    }\r\n\r\n    changed(){\r\n        let v = this._box.val();\r\n        \r\n        for (let f of this._changeListeners){\r\n            f(v);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {selectChangeCallback} func\r\n     */\r\n    addChangeListener(func: selectChangeCallback){\r\n        this._changeListeners.push(func);\r\n    }\r\n\r\n\r\n    get selectedValue(): string|number{\r\n        let theVal = this.box.val();\r\n\r\n        if (theVal == null || typeof theVal == 'undefined'){\r\n            return null;\r\n        } else if (isNaN(theVal)){\r\n            return theVal\r\n        } else {\r\n            if (theVal.indexOf('.') > -1){\r\n                return parseFloat(theVal)\r\n            } else {\r\n                return parseInt(theVal);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {string|number} v\r\n     */\r\n    set selectedValue(v: string|number){\r\n        this.box.val(v);\r\n    }\r\n    \r\n    get selectedText(){\r\n        return this.box.find('option:selected').text();\r\n    }\r\n\r\n}\r\n\r\nnm.SelectBoxBase = SelectBoxBase;\r\n\r\nexport default SelectBoxBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/domUtil/SelectBoxBase.ts","/**\r\n * Created by gavorhes on 12/23/2015.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nlet nm = provide('olHelpers');\r\n\r\n/**\r\n * take an array of features and sort by a given property name\r\n */\r\nexport class SortedFeatures {\r\n    sortedFeatures: Array<ol.Feature>;\r\n    propertyName: string;\r\n    _propertyType: string;\r\n\r\n    /**\r\n     *\r\n     * @param {Array<ol.Feature>} features array of ol features\r\n     * @param {string} propertyName - the property name to use for lookup\r\n     */\r\n    constructor(features: ol.Feature[], propertyName: string) {\r\n        this.sortedFeatures = features;\r\n        this.propertyName = propertyName;\r\n\r\n        if (this.sortedFeatures.length > 0) {\r\n            this._propertyType = typeof this.sortedFeatures[0].getProperties()[this.propertyName];\r\n\r\n            let __this = this;\r\n            this.sortedFeatures.sort(function (a, b) : number {\r\n                if (__this._propertyType == 'number'){\r\n                    let aMinusB = a['getProperties']()[__this.propertyName] - b['getProperties']()[__this.propertyName];\r\n                    if (aMinusB == 0){\r\n                        return 0;\r\n                    } else {\r\n                        return aMinusB > 0 ? 1 : -1;\r\n                    }\r\n                } else if (__this._propertyType == 'string'){\r\n                    let propA = a['getProperties']()[__this.propertyName] || '';\r\n                    let propB = b['getProperties']()[__this.propertyName] || '';\r\n                    propA = propA.toString().trim();\r\n                    propB = propB.toString().trim();\r\n\r\n                    if (propA == propB){\r\n                        return 0;\r\n                    } else {\r\n                        return propA > propB ? 1 : 0;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * recursive search to find the value\r\n     * @param {number|string} propertyValue - the property value to search for\r\n     * @param {boolean} [exactMatch=false] if only an exact match should be returned\r\n     * @param {Array} [sortedFeatures=this.sortedFeatures] - the candidate features\r\n     * @returns {ol.Feature|undefined} the feature matching the lookup\r\n     */\r\n    getFeature(propertyValue: number|string, exactMatch: boolean = false, sortedFeatures? :Array<ol.Feature>): ol.Feature {\r\n        if (typeof sortedFeatures == 'undefined'){\r\n            sortedFeatures = this.sortedFeatures;\r\n        }\r\n\r\n\r\n        if (sortedFeatures.length == 0){\r\n            return undefined;\r\n        }\r\n\r\n        if (sortedFeatures.length == 1){\r\n            if (exactMatch){\r\n                if (sortedFeatures[0].getProperties()[this.propertyName] == propertyValue){\r\n                    return sortedFeatures[0];\r\n                } else {\r\n                    return undefined;\r\n                }\r\n            } else {\r\n                return sortedFeatures[0];\r\n            }\r\n        }\r\n\r\n        let lowProp = sortedFeatures[0].getProperties()[this.propertyName];\r\n        let highProp = sortedFeatures[sortedFeatures.length - 1].getProperties()[this.propertyName];\r\n\r\n        if (exactMatch){\r\n            if (lowProp == propertyValue){\r\n                return sortedFeatures[0];\r\n            } else if (propertyValue < lowProp){\r\n                return undefined;\r\n            } else if (highProp == propertyValue){\r\n                return sortedFeatures[sortedFeatures.length - 1];\r\n            } else if (propertyValue >  highProp){\r\n                return undefined;\r\n            }\r\n        } else {\r\n            if (propertyValue <= lowProp){\r\n                return sortedFeatures[0];\r\n            } else if (propertyValue >= highProp){\r\n                return sortedFeatures[sortedFeatures.length - 1];\r\n            }\r\n        }\r\n\r\n        let midIndex = Math.floor(sortedFeatures.length / 2);\r\n        let midFeature = sortedFeatures[midIndex];\r\n        let midProperty = midFeature.getProperties()[this.propertyName];\r\n\r\n        if (midProperty ===  propertyValue){\r\n            return midFeature;\r\n        }\r\n\r\n        if (propertyValue < midProperty){\r\n            return this.getFeature(propertyValue, exactMatch, sortedFeatures.slice(0, midIndex));\r\n        } else {\r\n            return this.getFeature(propertyValue, exactMatch, sortedFeatures.slice(midIndex));\r\n        }\r\n    }\r\n}\r\n\r\nnm.SortedFeatures = SortedFeatures;\r\nexport default SortedFeatures;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/SortedFeatures.ts","/**\r\n * Created by gavorhes on 5/11/2016.\r\n */\r\n\r\nimport {LayerBaseVectorGeoJson} from \"webmapsjs/dist/layers/LayerBaseVectorGeoJson\";\r\n\r\nimport makeGuid from 'webmapsjs/dist/util/makeGuid';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport {layerConfigHelper, randomColor} from '../layerStyles';\r\nimport Ajx  from '../ajaxGetters';\r\nimport SortedFeatures from 'webmapsjs/dist/olHelpers/SortedFeatures';\r\nimport * as layerStyles from '../layerStyles';\r\nimport * as ext from 'webmapsjs/dist/olHelpers/extentUtil';\r\nimport ol = require('custom-ol');\r\nimport CorridorConfig from \"./CorridorConfig\";\r\n\r\n\r\nconst nm = provide('ssa');\r\n\r\n\r\nfunction escapeHtml(string) {\r\n    return String(string).replace(/[&<>\"'\\/]/g, function (s) {\r\n        return {\r\n            \"&\": \"&amp;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            '\"': '&quot;',\r\n            \"'\": '&#39;',\r\n            \"/\": '&#x2F;'\r\n        }[s];\r\n    });\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} fromRp - from reference point\r\n * @param {string} toRp - to reference point\r\n * @returns {string} string with abbreviated reference point identifiers separated by a hyphen\r\n * @private\r\n */\r\nfunction corridorName(fromRp, toRp) {\r\n    \"use strict\";\r\n\r\n    return fromRp.substring(0, 7) + ' - ' + toRp.substring(0, 7);\r\n}\r\n\r\nclass Corridor {\r\n    _valid: boolean;\r\n    _error: string;\r\n    _loaded: boolean;\r\n    clientId: string;\r\n    _color: string;\r\n    _corridorLayer: LayerBaseVectorGeoJson;\r\n    nodeLayer: LayerBaseVectorGeoJson;\r\n\r\n    sortedFeatures: SortedFeatures;\r\n\r\n    databaseId: string|number;\r\n    pdpFrom: number;\r\n    pdpTo: number;\r\n    rpFrom: string;\r\n    rpTo: string;\r\n    countyStart: number;\r\n    countyEnd: number;\r\n    highway: string;\r\n    routeId: number;\r\n    ssaId: number = -1;\r\n    snapshotVersion: number = -1;\r\n    corridorId: number = -1;\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {number} pdpFrom - from segment id\r\n     * @param {number} pdpTo - to segment id\r\n     * @param {string} rpFrom - from reference point\r\n     * @param {string} rpTo - to reference point\r\n     * @param {number|string} countyStart - start county\r\n     * @param {number} countyEnd - end county\r\n     * @param {string} highway - highway text\r\n     * @param {number} routeId - route Id\r\n     * @param {object} [options={}] options\r\n     * @param {corridorLoaded} [options.loadedCallback=function(c){}] function to call on load\r\n     * @param {number|string|undefined|*} [options.databaseId=undefined] - id in the database\r\n     * @param {string} [options.color=randomColor()] - color for this corridor\r\n     * @param {Array<ol.Feature>|undefined} [options.features=undefined] - pre existing features\r\n     * @param {boolean} [options.cancelLoad=false] - don't load in init\r\n     */\r\n    constructor(pdpFrom: number, pdpTo: number,\r\n                rpFrom: string, rpTo: string,\r\n                countyStart: number|string, countyEnd: number|string,\r\n                highway: string, routeId: number|string,\r\n                options: {\r\n                    idx?: number,\r\n                    loadedCallback?: (c: Corridor) => any,\r\n                    databaseId?: number|string,\r\n                    color?: string,\r\n                    features?: Array<ol.Feature>,\r\n                    cancelLoad?: boolean,\r\n                    jsonFeatures?: JSON,\r\n                } = {}) {\r\n\r\n\r\n        options.features = options.features ? options.features : undefined;\r\n\r\n        options.cancelLoad = typeof options.cancelLoad == 'boolean' ? options.cancelLoad : false;\r\n\r\n        this.clientId = makeGuid();\r\n        if (options.color) {\r\n            this._color = options.color;\r\n        } else {\r\n            this._color = randomColor();\r\n        }\r\n\r\n        this.databaseId = options.databaseId || undefined;\r\n\r\n        this._valid = false;\r\n        this._error = '';\r\n        this._loaded = false;\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|null}\r\n         */\r\n        this.sortedFeatures = null;\r\n\r\n        this.pdpFrom = pdpFrom;\r\n        this.pdpTo = pdpTo;\r\n\r\n        if (typeof countyStart == 'string') {\r\n            this.countyStart = parseInt(countyStart as string);\r\n        } else {\r\n            this.countyStart = countyStart as number;\r\n        }\r\n\r\n        if (typeof countyEnd == 'string') {\r\n            this.countyEnd = parseInt(countyEnd as string);\r\n        } else {\r\n            this.countyEnd = countyEnd as number;\r\n        }\r\n\r\n        if (typeof routeId == 'string') {\r\n            this.routeId = parseInt(routeId as string);\r\n        } else {\r\n            this.routeId = routeId as number;\r\n        }\r\n\r\n        this.highway = highway;\r\n        this.rpFrom = rpFrom;\r\n        this.rpTo = rpTo;\r\n        if (typeof  routeId != 'number') {\r\n            throw 'route id is not number';\r\n        }\r\n\r\n        let corName = corridorName(this.rpFrom, this.rpTo);\r\n        if (typeof options.idx === 'number'){\r\n            corName = `Corridor #${options.idx}`;\r\n        }\r\n\r\n        this._corridorLayer = new LayerBaseVectorGeoJson('',\r\n            layerConfigHelper(corName, this._color, true)\r\n        );\r\n\r\n        this.nodeLayer = new LayerBaseVectorGeoJson('', {\r\n            style: layerStyles.segNodeStyle,\r\n            minZoom: 11,\r\n            zIndex: 3\r\n        });\r\n\r\n        if (options.features) {\r\n            this._corridorLayer.source.addFeatures(options.features);\r\n        } else if (options.jsonFeatures) {\r\n            this._corridorLayer.addFeatures(options.jsonFeatures);\r\n            this._loaded = true;\r\n            this.sortedFeatures = new SortedFeatures(this.olLayer.getSource().getFeatures(), 'pdpId');\r\n\r\n            this.buildNodes();\r\n        } else if (!options.cancelLoad) {\r\n            this.load(options.loadedCallback);\r\n        }\r\n    }\r\n\r\n    setDbValues(corConfig: CorridorConfig){\r\n        this.ssaId = corConfig.ssaId;\r\n        this.snapshotVersion = corConfig.snapshotVersion;\r\n        this.corridorId = corConfig.corridorId;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {corridorLoaded} [loadedCallback=function(c){}] - function to call on load\r\n     */\r\n    load(loadedCallback) {\r\n        loadedCallback = typeof loadedCallback == 'function' ? loadedCallback : function () {\r\n        };\r\n\r\n        this._valid = false;\r\n        this._error = '';\r\n\r\n        Ajx.getCorridor(this.pdpFrom, this.pdpTo, (d) => {\r\n            this._corridorLayer.addFeatures(d as JSON);\r\n\r\n            if (typeof d['error'] == 'undefined') {\r\n                this._valid = true;\r\n            } else {\r\n                this._error = d['error'];\r\n            }\r\n            this._loaded = true;\r\n            this.sortedFeatures = new SortedFeatures(this.olLayer.getSource().getFeatures(), 'pdpId');\r\n\r\n            this.buildNodes();\r\n            loadedCallback(this);\r\n        });\r\n    }\r\n\r\n    buildNodes() {\r\n        this.nodeLayer.clear();\r\n        let features = this._corridorLayer.olLayer.getSource().getFeatures();\r\n        for (let i = 0; i < features.length; i++) {\r\n            let coords = features[i].getGeometry()['getCoordinates']();\r\n            if (coords && coords.length > 0) {\r\n                let startPoint = new ol.geom.Point(coords[0]);\r\n                let endPoint = new ol.geom.Point(coords[coords.length - 1]);\r\n                this.nodeLayer.olLayer.getSource().addFeature(new ol.Feature(startPoint));\r\n                this.nodeLayer.olLayer.getSource().addFeature(new ol.Feature(endPoint));\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {Corridor} a copy of the corridor\r\n     */\r\n    clone() {\r\n        let c = new Corridor(this.pdpFrom, this.pdpTo, this.rpFrom, this.rpTo,\r\n            this.countyStart, this.countyEnd, this.highway, this.routeId, {features: this.features});\r\n        c.buildNodes();\r\n\r\n        return c;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Corridor} corridor -  the corridor used for updating\r\n     */\r\n    updateCorridor(corridor) {\r\n\r\n        this.pdpFrom = corridor.pdpFrom;\r\n        this.pdpTo = corridor.pdpTo;\r\n        this.countyStart = corridor.countyStart;\r\n        this.countyEnd = corridor.countyEnd;\r\n        this.highway = corridor.highway;\r\n        this.rpFrom = corridor.rpFrom;\r\n        this.rpTo = corridor.rpTo;\r\n        this.routeId = corridor.routeId;\r\n\r\n        this.layer.name = corridorName(this.rpFrom, this.rpTo);\r\n\r\n        this.layer.clear();\r\n        this.layer.olLayer.getSource().addFeatures(corridor.features);\r\n        this.buildNodes();\r\n    }\r\n\r\n    get color() {\r\n        return this._color;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {boolean} if the corridor is loaded, no error on ajax\r\n     */\r\n    get valid() {\r\n        return this._valid;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {string|*} - error message\r\n     */\r\n    get error() {\r\n        return this._error;\r\n    }\r\n\r\n    /**\r\n     * get the html string to build the corridor table row with zoom, edit, and delete buttons\r\n     * @returns {string} - html for the corridor zoom, edit, and delete buttons\r\n     */\r\n    get tableHtmlCreate() {\r\n        let outString = `<tr class=\"corridor-tr\">`;\r\n        outString += `<td style=\"background-color: ${this._color}\"></td>`;\r\n        outString += `<td>${corridorName(this.rpFrom, this.rpTo)}</td>`;\r\n        outString += `<td>`;\r\n        outString += `<span title=\"Zoom To\" class=\"corridor-zoom\" data-corridor=\"${this.clientId}\"></span>`;\r\n        outString += `<span title=\"Edit Corridor\"  class=\"corridor-edit\" data-corridor=\"${this.clientId}\"></span>`;\r\n        outString += `<span title=\"Remove Corridor\"  class=\"corridor-delete\" data-corridor=\"${this.clientId}\"></span>`;\r\n        outString += `</td>`;\r\n        outString += '</tr>';\r\n\r\n        return outString;\r\n    }\r\n\r\n    getDataHtml(i) {\r\n        let outString = '<div class=\"corridor-data\">';\r\n        outString += `<label>Ssa Id</label>`;\r\n        outString += `<input type=\"text\" readonly class=\"corridor-data-ssa-id\" name=\"corridors[${i}].id.ssaId\" value=\"${this.ssaId }\"><br>`;\r\n        outString += `<label>Snapshot version</label>`;\r\n        outString += `<input type=\"text\" readonly class=\"corridor-data-snapshot\" name=\"corridors[${i}].id.snapshotVersion\" value=\"${this.snapshotVersion }\"><br>`;\r\n        outString += `<label>Corridor Id</label>`;\r\n        outString += `<input type=\"text\" readonly class=\"corridor-data-corridor-id\" name=\"corridors[${i}].id.corridorId\" value=\"${this.corridorId }\"><br>`;\r\n        outString += `<label>Start County</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-start-county\" readonly name=\"corridors[${i}].startCounty\" value=\"${this.countyStart}\"/><br>`;\r\n        outString += `<label>End County</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-end-county\" readonly name=\"corridors[${i}].endCounty\" value=\"${this.countyEnd}\"/><br>`;\r\n        outString += `<label>Highway</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-highway\" readonly name=\"corridors[${i}].stdhighway\" value=\"${this.highway}\"/><br>`;\r\n        outString += `<label>Start Rp</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-from-rp\" readonly name=\"corridors[${i}].startRp\" value=\"${this.rpFrom}\"/><br>`;\r\n        outString += `<label>End Rp</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-to-rp\" readonly name=\"corridors[${i}].endRp\" value=\"${this.rpTo}\"/><br>`;\r\n        outString += `<label>Route Id</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-route-id\" readonly name=\"corridors[${i}].rdwyRteId\" value=\"${this.routeId}\"/><br>`;\r\n        outString += `<label>Start Pdp</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-from-pdp\" readonly value=\"${this.pdpFrom}\"/><br>`;\r\n        outString += `<label>End Pdp</label>`;\r\n        outString += `<input type=\"text\" class=\"corridor-data-to-pdp\" readonly value=\"${this.pdpTo}\"/><br>`;\r\n\r\n        outString += `</div>`;\r\n\r\n        return outString;\r\n    }\r\n\r\n    getDataHtmlDisp(i) {\r\n        let returnString = this.getDataHtml(i);\r\n        returnString = escapeHtml(returnString);\r\n        returnString = returnString.replace(/&quot;&#x2F;&gt;/g, '&quot;&#x2F;&gt;<br>');\r\n        returnString = returnString.replace(/corridor-data&quot;&gt;/g, 'corridor-data&quot;&gt;<br>');\r\n\r\n        return returnString + '<br>';\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ol.layer.Vector|ol.layer.Base} - the OL Vector Layer\r\n     */\r\n    get olLayer(): ol.layer.Vector {\r\n        return this._corridorLayer.olLayer;\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @returns {LayerBaseVectorGeoJson} geojson layer\r\n     */\r\n    get layer(): LayerBaseVectorGeoJson {\r\n        return this._corridorLayer;\r\n    }\r\n\r\n\r\n    /**\r\n     * Getter\r\n     * @returns {boolean} if corridor layer is visible\r\n     */\r\n    get visible(): boolean {\r\n        return this._corridorLayer.visible;\r\n    }\r\n\r\n    /**\r\n     * Setter\r\n     * @param {boolean} vis if corridor layer is visible\r\n     *\r\n     */\r\n    set visible(vis: boolean) {\r\n        this._corridorLayer.visible = vis;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {Array.<ol.Feature>} an array of ol features\r\n     */\r\n    get features(): Array<ol.Feature> {\r\n        return this._corridorLayer.features;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ol.Extent|undefined} layer extent\r\n     */\r\n    get extent(): ol.Extent|Array<number> {\r\n        return ext.calculateExtent([this.layer]);\r\n    }\r\n\r\n    get loaded(): boolean {\r\n        return this._loaded;\r\n    }\r\n}\r\n\r\nnm.Corridor = Corridor;\r\n\r\nexport default Corridor;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/corridor/Corridor.ts","/**\r\n * Created by gavorhes on 7/13/2016.\r\n */\r\n\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport $ = require('jquery');\r\nconst nm = provide('ssa');\r\n\r\nclass FilterBase {\r\n    _topCheck: JQuery;\r\n    _subChecks: JQuery;\r\n    _changeCallbacks: Array<Function>;\r\n    _onValues: Array<string>;\r\n    _allValues: Array<string>;\r\n\r\n    /**\r\n     * \r\n     * @param {string} topCheckId - top checkbox id\r\n     * @param {string} otherChecksClass - other checkbox class identifier\r\n     * @param {boolean} defaultOn - is on by default\r\n     */\r\n    constructor(topCheckId: string, otherChecksClass: string, defaultOn: boolean) {\r\n        this._topCheck = $('#' + topCheckId);\r\n\r\n        this._subChecks = $('.' + otherChecksClass);\r\n\r\n        /**\r\n         *\r\n         * @type {Array<function>}\r\n         * @private\r\n         */\r\n        this._changeCallbacks = [];\r\n\r\n        /**\r\n         *\r\n         * @type {Array<string>}\r\n         */\r\n        this._onValues = [];\r\n\r\n        /**\r\n         *\r\n         * @type {Array<string>}\r\n         */\r\n        this._allValues = [];\r\n\r\n        this._subChecks.each((ix, /** @type {HTMLElement} */ el) => {\r\n            this._allValues.push($(el).val());\r\n        });\r\n\r\n        this._topCheck.prop('checked', defaultOn);\r\n        this._setAllOnOff(defaultOn);\r\n\r\n        this._topCheck.change(() => {\r\n            this._setAllOnOff(this._topCheck.prop('checked'));\r\n        });\r\n\r\n        let __this = this;\r\n        this._subChecks.change(function () {\r\n            let $el = $(this);\r\n            let theVal = $el.val();\r\n            let isChecked = $el.prop('checked');\r\n            let ix = __this._onValues.indexOf(theVal);\r\n\r\n            if (isChecked && ix == -1){\r\n                __this._onValues.push(theVal);\r\n            } else if (!isChecked && ix != -1){\r\n                __this._onValues.splice(ix, 1);\r\n            }\r\n\r\n            __this._topCheck.prop('checked', __this._onValues.length == __this._allValues.length);\r\n\r\n            __this._fireCallbacks();\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {function} f - function to call on change\r\n     */\r\n    addChangeCallback(f) {\r\n        this._changeCallbacks.push(f);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {string} val - the value to check\r\n     * @returns {boolean} - if the property is on\r\n     */\r\n    valIsOn(val){\r\n        return this._onValues.indexOf(val) > -1;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} isOn - if all are on of off\r\n     * @param {boolean} [fire=true] - if the callbacks should be fired\r\n     * @private\r\n     */\r\n    _setAllOnOff(isOn, fire = true) {\r\n\r\n        this._subChecks.prop('checked', isOn);\r\n        this._onValues = [];\r\n\r\n        if (isOn) {\r\n            for (let v of this._allValues) {\r\n                this._onValues.push(v);\r\n            }\r\n        }\r\n\r\n        if (fire) {\r\n            this._fireCallbacks();\r\n        }\r\n\r\n    }\r\n\r\n    _fireCallbacks() {\r\n        for (let f of this._changeCallbacks) {\r\n            f();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * array of all values\r\n     * @returns {Array<string>} all values available in the filter\r\n     */\r\n    get allValues(): Array<string>{\r\n        let outArray = [];\r\n        for (let v of this._allValues){\r\n            outArray.push(v);\r\n        }\r\n        return outArray;\r\n    }\r\n}\r\n\r\nnm.FilterBase = FilterBase;\r\nexport default FilterBase;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/FilterBase.ts","import * as zoomResolutionConvert from '../olHelpers/zoomResolutionConvert';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport makeGuid from '../util/makeGuid';\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\nexport interface LayerBaseOptions{\r\n    id?: string;\r\n    name?: string;\r\n    opacity?: number;\r\n    visible?: boolean;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    params?: any;\r\n    zIndex?: number;\r\n    loadCallback?: Function;\r\n    legendCollapse?: boolean;\r\n    legendCheckbox?: boolean;\r\n    legendContent?: string;\r\n}\r\n\r\n\r\n/**\r\n * The base layer class\r\n * @abstract\r\n */\r\nexport abstract class LayerBase {\r\n\r\n    protected _legendCheckbox: boolean;\r\n    protected _url: string;\r\n    protected _opacity: number;\r\n    protected _minZoom: number;\r\n    protected _maxZoom: number;\r\n    protected _visible: boolean;\r\n    protected _loaded: boolean;\r\n    protected _zIndex: number;\r\n    protected _legendContent: string;\r\n    protected _params: any;\r\n    protected _id: string;\r\n    protected _name: string;\r\n    protected _source: ol.source.Source;\r\n    protected _animate: boolean;\r\n    protected _legendCollapse: boolean;\r\n    protected _maxResolution: number;\r\n    protected _minResolution: number;\r\n    protected  _$legendDiv: JQuery;\r\n    loadCallback: Function;\r\n    protected _olLayer: ol.layer.Layer;\r\n    protected _applyCollapseCalled: boolean;\r\n\r\n\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - url for source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id=makeGuid()] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] - the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] - the z index for the layer\r\n     * @param {function} [options.loadCallback] - function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] - if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] - if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent=undefined] - additional content to add to the legend\r\n     */\r\n    constructor(url: string, options: LayerBaseOptions = {}) {\r\n        options = options || {} as LayerBaseOptions;\r\n\r\n        if (typeof url !== 'string') {\r\n            throw 'Invalid URL';\r\n        }\r\n        this._url = url;\r\n\r\n\r\n        this._params = typeof options.params == 'object' ? options.params : {};\r\n        this._legendCollapse = typeof options.legendCollapse == 'boolean' ? options.legendCollapse : false;\r\n        this._legendCheckbox = typeof options.legendCheckbox == 'boolean' ? options.legendCheckbox : true;\r\n\r\n        this.id = options.id || makeGuid();\r\n        this._name = options.name || 'Unnamed Layer';\r\n        this.animate = false;\r\n        this._opacity = typeof options.opacity == 'number' ? options.opacity : 1;\r\n\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1;\r\n        } else if (this._opacity < 0) {\r\n            this._opacity = 0;\r\n        }\r\n\r\n        this._visible = typeof options.visible === 'boolean' ? options.visible : true;\r\n\r\n        this._source = undefined;\r\n\r\n        /**\r\n         *\r\n         * @protected\r\n         */\r\n        this._olLayer = undefined;\r\n        this._loaded = false;\r\n\r\n        this._maxResolution = zoomResolutionConvert.zoomToResolution(options.minZoom);\r\n        if (typeof this._maxResolution !== 'undefined') {\r\n            this._maxResolution += 0.00001;\r\n        }\r\n        this._minResolution = zoomResolutionConvert.zoomToResolution(options.maxZoom);\r\n\r\n        this._minZoom = typeof options.minZoom == 'number' ? options.minZoom : undefined;\r\n        this._maxZoom = typeof options.maxZoom == 'number' ? options.maxZoom : undefined;\r\n        this._zIndex = typeof options.zIndex == 'number' ? options.zIndex : 0;\r\n\r\n        this.loadCallback = typeof options.loadCallback == 'function' ? options.loadCallback : function () {\r\n        };\r\n\r\n\r\n        this._legendContent = '';\r\n\r\n        if (this._legendCheckbox) {\r\n            this._legendContent += `<input type=\"checkbox\" ${this.visible ? 'checked' : ''} ` +\r\n                `class=\"legend-check\" id=\"${this.id}-legend-layer-check\"><span></span>`;\r\n            this._legendContent += `<label for=\"${this.id}-legend-layer-check\" class=\"legend-layer-name\">${this.name}</label>`;\r\n        } else {\r\n            this._legendContent += `<label class=\"legend-layer-name\">${this.name}</label>`;\r\n        }\r\n\r\n        this._$legendDiv = null;\r\n        this._applyCollapseCalled = false;\r\n        this._addLegendContent(typeof options.legendContent === 'string' ? options.legendContent : undefined);\r\n    }\r\n\r\n    /**\r\n     * base load function, sets _loaded = true if it is not already\r\n     * @protected\r\n     * @returns {boolean} if already loaded\r\n     */\r\n    _load() {\r\n        if (this.loaded == true) {\r\n            return true;\r\n        } else {\r\n            this._loaded = true;\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the legend html, be sure to only add to the DOM once\r\n     * @returns {string} html for layer wrapped in a div\r\n     */\r\n    getLegendDiv() {\r\n        return `<div class=\"legend-layer-div\" id=\"${this.id}-legend-layer-div\">${this._legendContent}</div>`;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param additionalContent - additional content to add to legend\r\n     * @private\r\n     */\r\n    _addLegendContent(additionalContent='') {\r\n\r\n        let addCollapse = additionalContent.indexOf('<ul>') > -1;\r\n\r\n        if (addCollapse) {\r\n            additionalContent = '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>' + additionalContent;\r\n        }\r\n\r\n        this._legendContent += additionalContent;\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n            this._$legendDiv.append(additionalContent);\r\n            this.applyCollapse();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=] - additonal content to add\r\n     */\r\n    addLegendContent(additionalContent: string) {\r\n        this._addLegendContent(additionalContent);\r\n    }\r\n\r\n    applyCollapse(): void {\r\n        if (this._applyCollapseCalled) {\r\n            console.log('collapse already applied');\r\n\r\n            return undefined;\r\n        }\r\n\r\n        this._$legendDiv = $(`#${this.id}-legend-layer-div`);\r\n\r\n        if (this._$legendDiv.length > 0) {\r\n\r\n            let $expander = this._$legendDiv.find('.legend-items-expander');\r\n\r\n            if ($expander.length > 0) {\r\n                this._applyCollapseCalled = true;\r\n\r\n                $expander.click(function () {\r\n                    let $this = $(this);\r\n\r\n                    $this.siblings('ul').slideToggle();\r\n\r\n                    if ($this.hasClass('legend-layer-group-collapsed')) {\r\n                        $this.removeClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9660;');\r\n                    } else {\r\n                        $this.addClass('legend-layer-group-collapsed');\r\n                        $this.html('&#9654;');\r\n                    }\r\n                });\r\n\r\n                if (this._legendCollapse) {\r\n                    $expander.trigger('click');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * trick to refresh the layer\r\n     */\r\n    refresh() {\r\n        if (this.source) {\r\n            this.source.refresh();\r\n        }\r\n    }\r\n\r\n    get id(): string{\r\n        return this._id;\r\n    }\r\n\r\n    set id(newId: string){\r\n        this._id = newId;\r\n    }\r\n\r\n    get animate(): boolean{\r\n        return this._animate;\r\n    }\r\n\r\n    set animate(animate: boolean){\r\n        this._animate = animate;\r\n    }\r\n\r\n    /**\r\n     * get the legend content\r\n     * @type {string}\r\n     */\r\n    get legendContent(): string {\r\n        return this._legendContent;\r\n    }\r\n\r\n    /**\r\n     * set the legend content directly\r\n     * @param {string} newVal - new content\r\n     * @protected\r\n     */\r\n    set legendContent(newVal: string) {\r\n        this._legendContent = newVal;\r\n    }\r\n\r\n    /**\r\n     * get the map get params\r\n     * @type {object}\r\n     */\r\n    get params(): {[s: string]: any} {\r\n        return this._params;\r\n    }\r\n\r\n    /**\r\n     * set the map get params\r\n     * @param {object} newParams - new get params\r\n     * @protected\r\n     */\r\n    set params(newParams: {[s: string]: any}) {\r\n        this._params = newParams;\r\n    }\r\n\r\n    /**\r\n     * get the minimum resolution\r\n     * @type {number|*}\r\n     */\r\n    get minResolution(): number {\r\n        return this._minResolution;\r\n    }\r\n\r\n    /**\r\n     * get the maximum resolution\r\n     * @type {number|*}\r\n     */\r\n    get maxResolution(): number {\r\n        return this._maxResolution;\r\n    }\r\n\r\n    /**\r\n     * get min zoom\r\n     * @type {number|*}\r\n     */\r\n    get minZoom(): number {\r\n        return this._minZoom;\r\n    }\r\n\r\n    /**\r\n     * get max zoom\r\n     * @type {number|*}\r\n     */\r\n    get maxZoom(): number {\r\n        return this._maxZoom;\r\n    }\r\n\r\n    /**\r\n     * get the url\r\n     * @type {string}\r\n     */\r\n    get url(): string {\r\n        return this._url;\r\n    }\r\n\r\n    /**\r\n     * Get the layer visibility\r\n     * @type {boolean}\r\n     */\r\n    get visible(): boolean {\r\n        return this._visible;\r\n    }\r\n\r\n    /**\r\n     * set the visibility\r\n     * @param visibility\r\n     */\r\n    set visible(visibility: boolean) {\r\n        this.setVisible(visibility);\r\n    }\r\n\r\n    protected setVisible(visibility: boolean) {\r\n        this._visible = visibility;\r\n        if (this.olLayer) {\r\n            this.olLayer.setVisible(this._visible);\r\n            if (visibility && !this._loaded) {\r\n                this._load();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Get the layer opacity\r\n     * @type {number}\r\n     */\r\n    get opacity(): number {\r\n        return this._opacity;\r\n    }\r\n\r\n    /**\r\n     * Set the layer opacity\r\n     * @param {number} opacity - layer opacity\r\n     */\r\n    set opacity(opacity: number) {\r\n        this._opacity = opacity;\r\n        if (this.olLayer) {\r\n            this.olLayer.setOpacity(this._opacity);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the layer name\r\n     * @type {string}\r\n     */\r\n    get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    /**\r\n     * set the layer name\r\n     * @param {string} newName - the new name\r\n     */\r\n    set name(newName: string) {\r\n        this._name = newName;\r\n    }\r\n\r\n    /**\r\n     * Check if the layer is loaded\r\n     * @type {boolean}\r\n     */\r\n    get loaded():boolean {\r\n        return this._loaded;\r\n    }\r\n\r\n    /**\r\n     * get the layer source\r\n     * @type {*}\r\n     */\r\n    get source(): ol.source.Source {\r\n        return this.getSource();\r\n    }\r\n\r\n\r\n    protected getSource(): ol.source.Source{\r\n        return this._source;\r\n    }\r\n\r\n    /**\r\n     * get the z index\r\n     */\r\n    get zIndex(): number {\r\n        return this._zIndex;\r\n    }\r\n\r\n    /**\r\n     * set the z index\r\n     */\r\n    set zIndex(newZ: number) {\r\n        this._zIndex = newZ;\r\n    }\r\n\r\n    protected setZIndex(newZ: number){\r\n\r\n    }\r\n\r\n    /**\r\n     * the the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Layer {\r\n        return this.getOlLayer();\r\n    }\r\n\r\n    protected getOlLayer(): ol.layer.Layer{\r\n        return this._olLayer;\r\n    }\r\n}\r\n\r\nnm.LayerBase = LayerBase;\r\nexport default LayerBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/layers/LayerBase.ts","/**\r\n * Created by gavorhes on 12/8/2015.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\n\r\n/**\r\n * base interaction\r\n */\r\nexport class MapInteractionBase {\r\n    _map: ol.Map;\r\n    _initialized: boolean;\r\n    _subtype: string;\r\n\r\n    /**\r\n     * map interaction base\r\n     * @param subtype - the interaction subtype\r\n     */\r\n    constructor(subtype: string) {\r\n        this._map = null;\r\n        this._initialized = false;\r\n        this._subtype = subtype;\r\n    }\r\n\r\n    /**\r\n     * base initializer, returns true for already initialized\r\n     * @param theMap - the ol Map\r\n     * @returns true for already initialized\r\n     */\r\n    init(theMap: ol.Map){\r\n        if (!this._initialized){\r\n            this._map = theMap;\r\n            this._initialized = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get reference to the ol map object\r\n     * @returns {ol.Map} the map object\r\n     */\r\n    get map() {\r\n        return this._map;\r\n    }\r\n\r\n    /**\r\n     * get if is initialized\r\n     * @returns {boolean} is initialized\r\n     */\r\n    get initialized() {\r\n        return this._initialized;\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     * @protected\r\n     */\r\n    _checkInit() {\r\n        if (!this.initialized) {\r\n            let msg = `${this._subtype} object not initialized`;\r\n            alert(msg);\r\n            console.log(msg);\r\n            throw msg;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check the initialization status and throw exception if not valid yet\r\n     */\r\n    checkInit(){\r\n        this._checkInit();\r\n    }\r\n}\r\n\r\nnm.MapInteractionBase = MapInteractionBase;\r\nexport default MapInteractionBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapInteractionBase.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapMoveCls from './mapMoveCls';\r\n\r\n/**\r\n * The single map move object catch is that it is common to multimap pages\r\n * @type {MapMoveCls}\r\n */\r\n\r\nexport const mapMove = new MapMoveCls();\r\nexport default mapMove;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapMove.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport {quickMapOptions, quickMapBase} from './quickMapBase';\r\nimport provide from '../util/provide';\r\nimport mapMove from './mapMove';\r\nimport mapPopup from './mapPopup';\r\nimport ol = require('custom-ol');\r\nlet nm = provide('olHelpers');\r\n\r\nexport {quickMapOptions} from './quickMapBase';\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param {object} [options={}] config options\r\n * @param {string} [options.divId=map] map div id\r\n * @param {object} [options.center={}] center config object\r\n * @param {number} [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param {number} [options.center.y=5574910] center y, web mercator y or lat\r\n * @param {number} [options.zoom=7] zoom level\r\n * @param {number} [options.minZoom=undefined] min zoom\r\n * @param {number} [options.maxZoom=undefined] max zoom\r\n * @param {boolean} [options.baseSwitcher=true] if add base map switcher\r\n * @param {boolean} [options.fullScreen=false] if add base map switcher\r\n * @returns {ol.Map} the ol map\r\n */\r\nexport function quickMap(options : quickMapOptions = {}): ol.Map {\r\n    let m = quickMapBase(options);\r\n    mapMove.init(m);\r\n    mapPopup.init(m);\r\n    return m;\r\n}\r\n\r\n\r\nnm.quickMap = quickMap;\r\nexport default quickMap;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/quickMap.ts","import provide from './provide';\r\nlet nm = provide('util.checkDefined');\r\n\r\n/**\r\n * check if the input is undefined or null\r\n * @param input - input pointer\r\n * @returns true undefined or null\r\n */\r\nexport function undefinedOrNull (input: any): boolean{\r\n    \"use strict\";\r\n\r\n    return (typeof input === 'undefined' || input === null);\r\n}\r\n\r\nnm.undefinedOrNull = undefinedOrNull;\r\n\r\n\r\n/**\r\n * check if the input is defined and not null\r\n * @param input - input pointer\r\n * @returns true defined and not null\r\n */\r\nexport function definedAndNotNull (input: any): boolean{\r\n    \"use strict\";\r\n\r\n    return !(undefinedOrNull(input));\r\n}\r\n\r\nnm.definedAndNotNull = definedAndNotNull;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/util/checkDefined.ts","/**\r\n * Created by gavorhes on 6/7/2016.\r\n */\r\n\r\nimport provide from './provide';\r\nlet nm = provide('util');\r\n\r\n\r\nexport interface keyVals {\r\n    key: string;\r\n    value: Object\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * iterate over the key value pairs of an object\r\n * @example for (let x:KeyValuePair of keyValPairs(object)){..}\r\n * @param {object} obj - the input object\r\n * @returns {Array<keyVals>} - array of key value pairs\r\n */\r\nexport function keyValPairs(obj: {[s: string]: any}): Array<keyVals> {\r\n    let outArray: Array<keyVals> = [];\r\n    for (let key of Object.keys(obj)) {\r\n        outArray.push({'key': key, 'value': obj[key]});\r\n\r\n    }\r\n    outArray.sort(function (a, b) {\r\n        \"use strict\";\r\n\r\n        return a > b ? 1 : -1;\r\n    });\r\n\r\n    return outArray;\r\n}\r\n\r\nnm.keyValPairs = keyValPairs;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/util/objectHelpers.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport makeGuid from 'webmapsjs/dist/util/makeGuid';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport {MapPopupCls} from \"webmapsjs/dist/olHelpers/mapPopupCls\";\r\nimport {MapMoveCls} from \"webmapsjs/dist/olHelpers/mapMoveCls\";\r\nimport $ = require('jquery');\r\nconst nm = provide('ssa');\r\nimport ol = require('custom-ol');\r\n\r\n\r\nexport class SsaMapBase {\r\n    $mainContainer: JQuery;\r\n    _mapId: string;\r\n    mainMapMove: MapMoveCls;\r\n    mainMapPopup: MapPopupCls;\r\n    mainMap: ol.Map;\r\n\r\n    constructor(divId: string) {\r\n\r\n        /**\r\n         * @type {JQuery|*|jQuery|HTMLElement}\r\n         */\r\n        this.$mainContainer = $('#' + divId);\r\n        this.$mainContainer.addClass('ssa-map-container');\r\n\r\n        /**\r\n         * \r\n         * @type {string}\r\n         * @protected\r\n         */\r\n        this._mapId = makeGuid();\r\n        \r\n        this.$mainContainer.append(`<div id=\"${this._mapId}\" class=\"ssa-main-map\"></div>`);\r\n        \r\n        $('.ol-zoom-out').html('&#8211;');\r\n\r\n        /**\r\n         * \r\n         * @type {MapPopupCls|undefined}\r\n         */\r\n        this.mainMapMove = undefined;\r\n\r\n        /**\r\n         * \r\n         * @type {MapPopupCls|undefined}\r\n         */\r\n        this.mainMapPopup = undefined;\r\n\r\n        \r\n    }\r\n    \r\n    get mapId(): string{\r\n        return this._mapId;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns {JQuery|jQuery|HTMLElement}\r\n     * @protected\r\n     */\r\n    get $mapDiv(): JQuery{\r\n       return $(`#${this.mapId}`); \r\n    }\r\n}\r\n\r\nnm.SsaMapBase = SsaMapBase;\r\nexport default SsaMapBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/SsaMapBase.ts","/**\r\n * Created by gavorhes on 5/17/2016.\r\n */\r\n\r\n\r\n\r\nimport {getCountyById} from '../countyLookup';\r\n\r\nimport $ = require('jquery');\r\n\r\n\r\n\r\nfunction labelValueHelper(label, val){\r\n    \"use strict\";\r\n    let outHtml = '<div class=\"col-xs-2\">';\r\n    outHtml += `<label>${label}</label>`;\r\n    outHtml += `<input class=\"form-control\" type=\"text\" readonly=\"\" value=\"${val}\">`;\r\n    outHtml += `</div>`;\r\n    return outHtml;\r\n}\r\n\r\n\r\nclass CorridorConfig {\r\n    startCounty: number;\r\n    endCounty: number;\r\n    hgwy: string;\r\n    startRp: string;\r\n    endRp: string;\r\n    startPdp: number;\r\n    endPdp: number;\r\n    routeId: number;\r\n    ssaId: number;\r\n    snapshotVersion: number;\r\n    corridorId: number;\r\n\r\n    /**\r\n     *\r\n     * @param {jQuery|HTMLDivElement|*} inputElement\r\n     */\r\n    constructor(inputElement) {\r\n\r\n        if (!inputElement.val) {\r\n            inputElement = $(inputElement);\r\n        }\r\n\r\n\r\n        this.ssaId = parseInt(inputElement.find('.corridor-data-ssa-id').val());\r\n\r\n        this.snapshotVersion = parseInt(inputElement.find('.corridor-data-snapshot').val());\r\n\r\n        this.corridorId = parseInt(inputElement.find('.corridor-data-corridor-id').val());\r\n\r\n        this.startCounty = parseInt(inputElement.find('.corridor-data-start-county').val());\r\n\r\n        this.endCounty = parseInt(inputElement.find('.corridor-data-end-county').val());\r\n\r\n        this.hgwy = inputElement.find('.corridor-data-highway').val();\r\n\r\n        this.startRp = inputElement.find('.corridor-data-from-rp').val();\r\n\r\n        this.endRp = inputElement.find('.corridor-data-to-rp').val();\r\n\r\n        this.startPdp = parseInt(inputElement.find('.corridor-data-from-pdp').val());\r\n\r\n        this.endPdp = parseInt(inputElement.find('.corridor-data-to-pdp').val());\r\n\r\n        this.routeId =  parseInt(inputElement.find('.corridor-data-route-id').val());\r\n    }\r\n\r\n    \r\n    /**\r\n     * @returns {string} bootstrap formatted corridor description\r\n     */\r\n    bootstrapHtml(index){\r\n        index++;\r\n        let outHtml = '<div class=\"row ssa-corridor-info-row\">';\r\n        outHtml += '<div class=\"col-xs-2\">';\r\n        outHtml += `<label>Corridor #${index}</label>`;\r\n        outHtml += '</div>';\r\n        outHtml += labelValueHelper('Highway', this.hgwy);\r\n        outHtml += labelValueHelper('Start County', getCountyById(this.startCounty));\r\n        outHtml += labelValueHelper('End County', getCountyById(this.endCounty));\r\n        outHtml += labelValueHelper('Start RP', this.startRp);\r\n        outHtml += labelValueHelper('End RP', this.endRp);\r\n        outHtml += '</div>';\r\n        return outHtml;\r\n    }\r\n\r\n    public toString(): string{\r\n        return `CorId ${this.corridorId} ${this.startRp} - ${this.endRp}`;\r\n    }\r\n}\r\n\r\nexport default CorridorConfig;\n\n\n// WEBPACK FOOTER //\n// ./src/corridor/CorridorConfig.ts","/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nimport FilterBase from './FilterBase';\r\n\r\nexport class FilterControllingCriteria extends FilterBase {\r\n\r\n    constructor() {\r\n        super('filter-controlling-criteria', 'filter-controlling-criteria-sub', true);\r\n    }\r\n\r\n\r\n    get ccDesignSpeedOn(): boolean {\r\n        return this.valIsOn('ccDesignSpeed');\r\n    }\r\n\r\n    get ccLaneWidthOn(): boolean {\r\n        return this.valIsOn('ccLaneWidth');\r\n    }\r\n\r\n    get ccShoulderWidthOn(): boolean {\r\n        return this.valIsOn('ccShoulderWidth');\r\n    }\r\n\r\n    get ccHorizontalCurveOn(): boolean {\r\n        return this.valIsOn('ccHorizontalCurve');\r\n    }\r\n\r\n    get ccSuperelevationOn(): boolean {\r\n        return this.valIsOn('ccSuperelevation');\r\n    }\r\n\r\n    get ccMaximumGradeOn(): boolean {\r\n        return this.valIsOn('ccMaximumGrade');\r\n    }\r\n\r\n    get ccStoppingSightOn(): boolean {\r\n        return this.valIsOn('ccStoppingSight');\r\n    }\r\n\r\n    get ccCrossSlopeOn(): boolean {\r\n        return this.valIsOn('ccCrossSlope');\r\n    }\r\n\r\n    get ccVerticalClearanceOn(): boolean {\r\n        return this.valIsOn('ccVerticalClearance');\r\n    }\r\n\r\n    get ccDesignLoadingOn(): boolean {\r\n        return this.valIsOn('ccDesignLoading');\r\n    }\r\n}\r\n\r\nexport default new FilterControllingCriteria();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/filterContollingCriteria.ts","/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nimport FilterBase from './FilterBase';\r\n\r\nexport let kColor = 'rgb(255,0,0)';\r\nexport let aColor = 'rgb(255,165,0)';\r\nexport let bColor = 'rgb(255,255,0)';\r\nexport let cColor = 'rgb(153,255,153)';\r\nexport let oColor = 'rgb(0,0,255)';\r\n\r\nexport class FilterCrash extends FilterBase {\r\n\r\n    constructor() {\r\n        super('filter-crash', 'filter-crash-sub', false);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {string} val - the lookup value\r\n     * @returns {string|null} crash color or null if the crash type should be suppressed\r\n     */\r\n    getCrashColor(val) {\r\n        let isActive = super.valIsOn(val);\r\n\r\n        if (!isActive) {\r\n            return null;\r\n        }\r\n\r\n        let color = {\r\n            'K': kColor,\r\n            'A': aColor,\r\n            'B': bColor,\r\n            'C': cColor,\r\n            'P': oColor\r\n        }[val];\r\n\r\n        return color || 'rgb(128,128,128)';\r\n    }\r\n}\r\n\r\nexport default new FilterCrash();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/filterCrash.ts","/**\r\n * Created by gavorhes on 7/14/2016.\r\n */\r\nimport FilterBase from './FilterBase';\r\n\r\nexport class FilterMmFlag extends FilterBase {\r\n\r\n    constructor() {\r\n        super('mm-flags', 'mm-flags-sub', true);\r\n    }\r\n\r\n    get mmRateFlagOn(): boolean {\r\n        return this.valIsOn('rateFlag');\r\n    }\r\n\r\n    get mmKabFlagOn(): boolean {\r\n        return this.valIsOn('kabCrshFlag');\r\n    }\r\n\r\n}\r\n\r\nexport default new FilterMmFlag();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/filters/filterMmFlag.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport SsaMapBase from './SsaMapBase';\r\nimport * as calcExtent from 'webmapsjs/dist/olHelpers/extentUtil';\r\nimport quickMap from 'webmapsjs/dist/olHelpers/quickMap';\r\nimport {mapPopup} from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport makeGuid from 'webmapsjs/dist/util/makeGuid';\r\n\r\nimport provide from 'webmapsjs/dist/util/provide';\r\n\r\nimport PickerCollection from '../collections/PickerCollection';\r\nimport CorridorCollection from '../collections/CorridorCollection';\r\nimport ol = require('custom-ol');\r\n\r\nimport $ = require('jquery');\r\nimport 'jquery-ui';\r\n\r\nconst nm = provide('ssa');\r\n\r\n\r\nexport class SsaMapCreate extends SsaMapBase {\r\n    $sideBar: JQuery;\r\n    corridorCollection: CorridorCollection;\r\n    pickerCollection: PickerCollection;\r\n\r\n    /**\r\n     *\r\n     * @param {string} divId\r\n     * @param {string} corridorDataContainer\r\n     * @param {string} [dataClass=corridor-data] - class selector for the corridor data elements\r\n     */\r\n    constructor(divId, corridorDataContainer, dataClass) {\r\n        super(divId);\r\n\r\n\r\n        this.$mainContainer.prepend(`<div class=\"ssa-map-sidebar\"></div>`);\r\n\r\n        this.mainMap = quickMap({\r\n            divId: this.mapId,\r\n            minZoom: 6,\r\n            zoom: 6,\r\n            fullScreen: true,\r\n            addGeocode: true\r\n        });\r\n\r\n\r\n        this.mainMapPopup = mapPopup;\r\n\r\n\r\n        this.$sideBar = this.$mainContainer.find('.ssa-map-sidebar');\r\n\r\n        let afterChange = () => {\r\n            this._afterChange();\r\n        };\r\n\r\n        this.pickerCollection = new PickerCollection(this.$sideBar, this.mainMap);\r\n\r\n        let corridorsGuid = makeGuid();\r\n        this.$sideBar.append(`<div id=\"${corridorsGuid}\"></div>`);\r\n        this.corridorCollection = new CorridorCollection(this.$sideBar, this.mainMap, corridorDataContainer, afterChange, dataClass);\r\n        this.pickerCollection.corridorCollection = this.corridorCollection;\r\n\r\n        this.corridorCollection.loadExistingCorridors();\r\n    }\r\n\r\n    _afterChange() {\r\n        let __this = this;\r\n        \r\n        this.corridorCollection.$innerContainer.find('.corridor-zoom').click(function () {\r\n\r\n            let corridorId = $(this).attr('data-corridor');\r\n            let cor = __this.corridorCollection.getCorridorById(corridorId);\r\n            __this.mainMap.getView().fit(cor.extent as ol.Extent, __this.mainMap.getSize());\r\n        });\r\n\r\n        this.corridorCollection.$innerContainer.find('.corridor-delete').click(function () {\r\n            let corridorId = $(this).attr('data-corridor');\r\n            __this.corridorCollection.removeCorridor(corridorId);\r\n        });\r\n\r\n        this.corridorCollection.$innerContainer.find('.corridor-edit').click(function () {\r\n            __this.pickerCollection.$createCorridorButton.prop('disabled', true);\r\n            let corridorId = $(this).attr('data-corridor');\r\n            let cor = __this.corridorCollection.getCorridorById(corridorId);\r\n            __this.pickerCollection.startPicker(cor);\r\n            $(this).closest('.corridor-tr').addClass('corridor-tr-selected');\r\n        });\r\n    }\r\n}\r\n\r\nnm.SsaMapCreate = SsaMapCreate;\r\nwindow['SsaMapCreate'] = SsaMapCreate;\r\nexport default SsaMapCreate;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/SsaMapCreate.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport SsaMapBase from './SsaMapBase';\r\nimport quickMap from 'webmapsjs/dist/olHelpers/quickMap';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport mapMove from 'webmapsjs/dist/olHelpers/mapMove';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport CorridorConfig from '../corridor/CorridorConfig';\r\nimport Corridor from '../corridor/Corridor';\r\nimport * as styles from '../layerStyles';\r\nimport * as calcExtent from 'webmapsjs/dist/olHelpers/extentUtil';\r\nimport crashData from '../collections/crashData';\r\nimport {mapToBase64, iMapToBase64Options} from 'webmapsjs/dist/olHelpers/mapToBase64';\r\n\r\n\r\nimport deficiency from '../collections/Deficiency';\r\nimport * as constants from '../constants';\r\nimport ol = require('custom-ol');\r\nimport ajx from '../ajaxGetters';\r\nimport $ = require('jquery');\r\nimport {LayerBaseVector} from \"webmapsjs/dist/layers/LayerBaseVector\";\r\nimport {mmPopupContent} from '../popup';\r\nimport {get_browser} from 'webmapsjs/dist/util/get_browser';\r\n\r\n// import controllingCriteria from '../collections/controllingCriteria';\r\n// import mmFlags from '../collections/mmFlags';\r\n\r\nconst nm = provide('ssa');\r\n\r\nconst mmPopupContentWithCrash = (props) => {\r\n    \"use strict\";\r\n\r\n    let returnHtml = '';\r\n    returnHtml += crashData.getCrashSummary(props['pdpId']);\r\n    returnHtml += mmPopupContent(props);\r\n    return returnHtml;\r\n};\r\n\r\n\r\nexport class SsaMapView extends SsaMapBase {\r\n    createdCorridorsLength: number;\r\n    _corridorArray: Corridor[];\r\n    loadedCorridorsLength: number;\r\n    // private $getMapButton: JQuery;\r\n    private getMapLinkId: string;\r\n    private _ssaId: number;\r\n    private _snap: number;\r\n    private mapImageName: string;\r\n\r\n    /**\r\n     *\r\n     * @param {string} divId - container for the map\r\n     * @param {string} [dataClass=corridor-data] - class selector for the corridor data elements\r\n     * @param {string} [infoAnchorId=ssa-corridor-info-anchor] - id of element after which to insert the info rows\r\n     */\r\n    constructor(divId, dataClass, infoAnchorId) {\r\n        super(divId);\r\n        this._ssaId = parseInt($('#hidden-ssa-id').val());\r\n        this._snap = parseInt($('#hidden-snapshot-id').val());\r\n\r\n        this.getMapLinkId = 'get-map-link';\r\n        this.mapImageName = `map-image-id-${this._ssaId}-ver-${this._snap}.png`;\r\n\r\n        let linkHtml = `<a id=\"${this.getMapLinkId}\" href=\"#\" ` +\r\n            `download=\"${this.mapImageName}\" ` +\r\n            `style=\"display: none\"></a>`;\r\n\r\n        $('#' + this.mapId).append(linkHtml);\r\n\r\n        this.mainMap = quickMap({\r\n            divId: this.mapId,\r\n            minZoom: 6,\r\n            zoom: 6,\r\n            fullScreen: true,\r\n            addGeocode: true\r\n        });\r\n\r\n\r\n        let summaryListHtml = '<div class=\"segment-index-summary\">';\r\n        summaryListHtml += '<div class=\"segment-index-summary-toggles\">';\r\n        summaryListHtml += `<span class=\"segment-index-summary-toggle segment-index-summary-zoom\" title=\"Zoom To Initial Extent\">&#8634;</span>`;\r\n        summaryListHtml += `<span class=\"segment-index-summary-toggle segment-index-summary-close\" title=\"Hide Legend\">&#8598;</span>`;\r\n        summaryListHtml += `<span class=\"segment-index-summary-toggle segment-index-summary-open\" title=\"Show Legend\">&#8600;</span>`;\r\n        summaryListHtml += '</div>';\r\n\r\n        // summaryListHtml += `<h4 style=\"color: ${constants.mmFlagColor}\">Metamanager Flags</h4>`;\r\n        // summaryListHtml += `<ul id=\"${constants.mmFlagListId}\"></ul>`;\r\n        // summaryListHtml += `<h4 style=\"color: ${constants.controllingCriteriaColor}\">Controlling Criteria</h4>`;\r\n        // summaryListHtml += `<ul id=\"${constants.ccListId}\"></ul>`;\r\n\r\n        summaryListHtml += `<h4 style=\"color: ${constants.defColor}; font-size: large\">Flags and Deficiencies</h4>`;\r\n        summaryListHtml += `<ul id=\"${constants.defListId}\"></ul>`;\r\n\r\n        summaryListHtml += '</div>';\r\n        this.$mapDiv.append(summaryListHtml);\r\n\r\n        let $legendDiv = this.$mapDiv.find('.segment-index-summary');\r\n        let $closeButton = $legendDiv.find('.segment-index-summary-close');\r\n        let $openButton = $legendDiv.find('.segment-index-summary-open');\r\n        let $zoomExtent = $legendDiv.find('.segment-index-summary-zoom');\r\n\r\n        $openButton.hide();\r\n\r\n        let hideShowWorking = false;\r\n        let originalWidth = $legendDiv.width();\r\n        let originalMinHeight = $legendDiv.css('min-height') as string;\r\n        let originalPadding = $legendDiv.css('padding') as string;\r\n\r\n        $closeButton.click(() => {\r\n            if (hideShowWorking) {\r\n                return;\r\n            }\r\n            hideShowWorking = true;\r\n\r\n            $legendDiv.find('ul, h3, h4, h5').fadeOut(100, () => {\r\n                $legendDiv.css('padding', '2px');\r\n                $legendDiv.width('auto');\r\n                $legendDiv.css('min-height', 'auto');\r\n\r\n                $closeButton.hide();\r\n                $openButton.show();\r\n                hideShowWorking = false;\r\n            });\r\n        });\r\n\r\n        $openButton.click(() => {\r\n            if (hideShowWorking) {\r\n                return;\r\n            }\r\n            hideShowWorking = true;\r\n\r\n            $legendDiv.css('padding', originalPadding);\r\n            $legendDiv.width(originalWidth);\r\n            $legendDiv.css('min-height', originalMinHeight);\r\n\r\n            $legendDiv.find('ul, h3, h4, h5').fadeIn(100, () => {\r\n                $closeButton.show();\r\n                $openButton.hide();\r\n                hideShowWorking = false;\r\n            });\r\n        });\r\n\r\n        $zoomExtent.click(() => {\r\n            this._fitExtent();\r\n        });\r\n\r\n\r\n        this.mainMapPopup = mapPopup;\r\n\r\n        dataClass = typeof dataClass == 'string' ? dataClass : 'corridor-data';\r\n        infoAnchorId = typeof infoAnchorId == 'string' ? infoAnchorId : 'ssa-corridor-info-anchor';\r\n        dataClass = '.' + dataClass;\r\n\r\n        $(this.mainMap.getTargetElement()).append('<div class=\"crashes-loaded-msg\">Crashes Loaded</div>');\r\n\r\n        /**\r\n         *\r\n         * @type {Array<CorridorConfig>}\r\n         */\r\n        let corridorConfigs = [];\r\n\r\n        /**\r\n         *\r\n         * @type {Array<Corridor>}\r\n         */\r\n        this._corridorArray = [];\r\n\r\n        // parse the data from the hidden input elements\r\n        $(dataClass).each((n, el) => {\r\n            corridorConfigs.push(new CorridorConfig(el));\r\n        });\r\n\r\n        this.createdCorridorsLength = corridorConfigs.length;\r\n        this.loadedCorridorsLength = 0;\r\n\r\n        let returnLookup = {};\r\n        let returnArr = [];\r\n\r\n        ajx.getCcGeom(this._ssaId, this._snap, (d) => {\r\n            for (let f of d['features']) {\r\n                let corId = f['properties']['corridorId'].toFixed();\r\n\r\n                if (!returnLookup[corId]) {\r\n                    returnArr.push(corId);\r\n                    returnLookup[corId] = {crs: d['crs'], type: d['type'], features: []};\r\n                }\r\n\r\n                returnLookup[corId].features.push(f);\r\n            }\r\n\r\n            let outHtml = '';\r\n\r\n            for (let i = 0; i < returnArr.length; i++) {\r\n                let conf = corridorConfigs[i];\r\n                outHtml += conf.bootstrapHtml(i);\r\n\r\n                let corridor = new Corridor(\r\n                    conf.startPdp, conf.endPdp, conf.startRp, conf.endRp,\r\n                    conf.startCounty, conf.endCounty, conf.hgwy, conf.routeId,\r\n                    {\r\n                        color: 'black',\r\n                        jsonFeatures: returnLookup[i.toFixed()],\r\n                        idx: i + 1\r\n                    }\r\n                );\r\n\r\n                // mmFlags.addCorridor(corridor);\r\n                // controllingCriteria.addCorridor(corridor);\r\n\r\n                deficiency.addCorridor(corridor);\r\n\r\n                this._corridorArray.push(corridor);\r\n\r\n                this.mainMap.addLayer(corridor.olLayer);\r\n                this.mainMap.addLayer(corridor.nodeLayer.olLayer);\r\n\r\n                this.mainMapPopup.addVectorPopup(corridor.layer, mmPopupContentWithCrash);\r\n            }\r\n\r\n            this._afterCorridorLoad();\r\n\r\n            $('#' + infoAnchorId).after(outHtml);\r\n        });\r\n\r\n\r\n        // mmFlags.init(this.mainMap);\r\n        // controllingCriteria.init(this.mainMap);\r\n\r\n        deficiency.init(this.mainMap);\r\n    }\r\n\r\n    public getMapData(callback: (imgData: string) => any, options: iMapToBase64Options) {\r\n        options = options || {};\r\n        options.delay = typeof options.delay === 'number'? options.delay: 2000;\r\n        options.layers = this._fitExtent();\r\n        mapToBase64(this.mainMap, callback, options);\r\n    }\r\n\r\n    _afterCorridorLoad() {\r\n\r\n        this._fitExtent();\r\n\r\n        crashData.init(this.mainMap, this._ssaId, this._snap);\r\n\r\n        // mmFlags.afterLoad();\r\n        // controllingCriteria.afterLoad();\r\n\r\n        deficiency.afterLoad()\r\n    }\r\n\r\n    private _fitExtent(): LayerBaseVector[] {\r\n\r\n        let lyrs: LayerBaseVector[] = [];\r\n\r\n        for (let c of this._corridorArray) {\r\n            lyrs.push(c.layer);\r\n        }\r\n\r\n        if (lyrs.length > 0) {\r\n            calcExtent.fitToMap(lyrs, this.mainMap);\r\n        }\r\n\r\n        return lyrs;\r\n    }\r\n}\r\n\r\nnm.SsaMapView = SsaMapView;\r\nwindow['SsaMapView'] = SsaMapView;\r\nexport default SsaMapView;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/SsaMapView.ts","import {LayerBase, LayerBaseOptions} from './LayerBase';\r\nimport mapMove from '../olHelpers/mapMove';\r\nimport MapMoveCls from '../olHelpers/mapMoveCls'\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\nexport interface makeMapMoveParams {\r\n    /**\r\n     *\r\n     * @param lyr\r\n     * @param extent\r\n     * @param zoomLevel\r\n     */\r\n    (lyr: LayerBaseVector, extent: {minX: number, minY: number, maxX: number, maxY: number}, zoomLevel?: number): any\r\n}\r\n\r\n\r\n\r\nexport interface LayerBaseVectorOptions extends LayerBaseOptions{\r\n    autoLoad?: boolean;\r\n    style?: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction;\r\n    onDemand?: boolean;\r\n    onDemandDelay?: number;\r\n    mapMoveMakeGetParams?: makeMapMoveParams;\r\n    mapMoveObj?: MapMoveCls;\r\n    renderOrder?: (a: ol.Feature, b: ol.Feature) => number;\r\n\r\n}\r\n\r\n\r\n\r\n/**\r\n * The Vector layer base\r\n * @augments LayerBase\r\n * @abstract\r\n */\r\nexport class LayerBaseVector extends LayerBase {\r\n    _olLayer: ol.layer.Vector;\r\n    _source: ol.source.Vector;\r\n    _style: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction;\r\n    _autoLoad: boolean;\r\n    _onDemand: boolean;\r\n    _onDemandDelay: number;\r\n    _mapMoveMakeGetParams: makeMapMoveParams;\r\n    _mapMoveParams: any;\r\n    _mapMove: MapMoveCls;\r\n    _projectionMap: ol.proj.Projection;\r\n    _projection4326: ol.proj.Projection;\r\n\r\n\r\n\r\n    /**\r\n     * The base vector layer\r\n     * @param {string} url - pass an empty string to prevent default load and add from a json source\r\n     * @param {object} options - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     *\r\n     * @param {boolean} [options.autoLoad=false] if the layer should auto load if not visible\r\n     * @param {object} [options.style=undefined] the layer style, use openlayers default style if not defined\r\n     * @param {boolean} [options.onDemand=false] if the layer should be loaded by extent on map move\r\n     * @param {number} [options.onDemandDelay=300] delay before the map move callback should be called\r\n     * @param {mapMoveMakeGetParams} [options.mapMoveMakeGetParams=function(lyr, extent, zoomLevel){}] function to create additional map move params\r\n     * @param {MapMoveCls} [options.mapMoveObj=mapMove] alternate map move object for use with multi map pages\r\n     *\r\n     */\r\n    constructor(url: string, options: LayerBaseVectorOptions = {}) {\r\n        super(url, options);\r\n\r\n        options = options as LayerBaseVectorOptions;\r\n\r\n        //prevent regular load if no url has been provided\r\n        if (this.url.trim() == '') {\r\n            this._loaded = true;\r\n        }\r\n\r\n        this._style = typeof options.style == 'undefined' ? undefined : options.style;\r\n\r\n        if (this.visible) {\r\n            this._autoLoad = true;\r\n        } else {\r\n            this._autoLoad = (typeof options['autoLoad'] == 'boolean' ? options['autoLoad'] : false);\r\n        }\r\n\r\n        this._onDemand = typeof options.onDemand == 'boolean' ? options.onDemand : false;\r\n        this._onDemandDelay = typeof options.onDemandDelay == 'number' ? options.onDemandDelay : 300;\r\n\r\n        if (options.mapMoveObj) {\r\n            this._mapMove = options.mapMoveObj;\r\n        } else {\r\n            this._mapMove = this._onDemand ? mapMove : undefined;\r\n        }\r\n\r\n\r\n        this._mapMoveMakeGetParams = typeof options.mapMoveMakeGetParams == 'function' ? options.mapMoveMakeGetParams :\r\n            function () {return {};};\r\n\r\n        if (this._onDemand) {\r\n            this._loaded = true;\r\n            this._mapMoveParams = {};\r\n            this._mapMove.checkInit();\r\n            this._mapMove.addVectorLayer(this);\r\n        }\r\n\r\n        this._source = new ol.source.Vector();\r\n\r\n\r\n        this._olLayer = new ol.layer.Vector(\r\n            {\r\n                source: this._source,\r\n                visible: this.visible,\r\n                style: this.style,\r\n                minResolution: this._minResolution,\r\n                maxResolution: this._maxResolution,\r\n                renderOrder: options.renderOrder\r\n            }\r\n        );\r\n\r\n        this.olLayer.setZIndex(this._zIndex);\r\n\r\n        this._projectionMap = null;\r\n        this._projection4326 = new ol.proj.Projection({code: \"EPSG:4326\"});\r\n        this._olLayer.setOpacity(this.opacity)\r\n    }\r\n\r\n    /**\r\n     * dummy to be overridden\r\n     * @param {object} featureCollection - geojson or esrijson object\r\n     */\r\n    addFeatures(featureCollection: Object) {\r\n        console.log('Layer vector base addFeatures is a placeholder and does nothing');\r\n    }\r\n\r\n    /**\r\n     * Before call to map move callback, can prevent call by returning false\r\n     * @param {number} zoom - zoom level\r\n     * @param {string} [evtType=undefined] undefined for initial load, otherwise one of 'change:center', 'change:resolution'\r\n     * @returns {boolean} if the call should proceed\r\n     */\r\n    mapMoveBefore(zoom: number, evtType: string) {\r\n        if (this.minZoom !== undefined) {\r\n            if (zoom < this.minZoom) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (this.maxZoom !== undefined) {\r\n            if (zoom > this.maxZoom) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return this.visible;\r\n    }\r\n\r\n    /**\r\n     * callback to generate the parameters passed in the get request\r\n     * @param {object} extent - extent object\r\n     * @param {number} extent.minX - minX\r\n     * @param {number} extent.minY - minY\r\n     * @param {number} extent.maxX - maxX\r\n     * @param {number} extent.maxY - maxY\r\n     * @param {number} zoomLevel - zoom level\r\n     */\r\n    mapMoveMakeGetParams(extent: {minX: number, minY: number, maxX: number, maxY: number}, zoomLevel: number) {\r\n        this._mapMoveParams = {};\r\n        $.extend(this._mapMoveParams, this.params);\r\n        $.extend(this._mapMoveParams, this._mapMoveMakeGetParams(this, extent, zoomLevel));\r\n    }\r\n\r\n    /**\r\n     * callback function on map move\r\n     * @param {object} d - the json response\r\n     */\r\n    mapMoveCallback(d: Object) {\r\n        if (this.source) {\r\n            this._source.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * clear features in the layer\r\n     */\r\n    clear() {\r\n        if (this._source) {\r\n            this._source.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get on demand delay in miliseconds\r\n     */\r\n    get onDemandDelay(): number {\r\n        return this._onDemandDelay;\r\n    }\r\n\r\n    /**\r\n     * get if the layer is autoloaded\r\n     */\r\n    get autoLoad(): boolean {\r\n        return this._autoLoad;\r\n    }\r\n\r\n    /**\r\n     * get the style definition\r\n     */\r\n    get style(): ol.StyleFunction|Array<ol.style.Style>|ol.style.Style {\r\n        return this._style;\r\n    }\r\n\r\n    /**\r\n     * set the style\r\n     * @param style - the style or function\r\n     */\r\n    set style(style: ol.StyleFunction|Array<ol.style.Style>|ol.style.Style) {\r\n        this._style = style;\r\n        this.olLayer.setStyle(this._style as ol.style.Style);\r\n    }\r\n\r\n    /**\r\n     * get the map CRS if it is defined by the map move object\r\n     */\r\n    get mapCrs(): string {\r\n        return this.mapProj == null ? null : this.mapProj.getCode();\r\n    }\r\n\r\n    get mapProj(): ol.proj.Projection{\r\n        if (this._projectionMap != null){\r\n            return this._projectionMap;\r\n        }\r\n\r\n        if (this._mapMove) {\r\n            this._projectionMap = this._mapMove.map.getView().getProjection();\r\n            return this._projectionMap;\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * get the map move object\r\n     * @type {MapMoveCls|*}\r\n     */\r\n    get mapMove(): MapMoveCls {\r\n        return this._mapMove;\r\n    }\r\n\r\n    /**\r\n     * map move params\r\n     * @type {object}\r\n     */\r\n    get mapMoveParams() {\r\n        return this._mapMoveParams;\r\n    }\r\n\r\n    get visible(): boolean{\r\n        return this._visible;\r\n    }\r\n\r\n    /**\r\n     * Set the layer visibility\r\n     * @type {boolean}\r\n     * @override\r\n     */\r\n    set visible(visibility) {\r\n        super.setVisible(visibility);\r\n\r\n        if (this._onDemand) {\r\n            this.mapMove.triggerLyrLoad(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get the layer vector source\r\n     * @override\r\n     */\r\n    get source(): ol.source.Vector {\r\n        return this.getSource() as ol.source.Vector;\r\n    }\r\n\r\n    /**\r\n     * array of ol features\r\n     */\r\n    get features(): Array<ol.Feature> {\r\n        return this.source.getFeatures();\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    get olLayer(): ol.layer.Vector {\r\n        return super.getOlLayer() as ol.layer.Vector;\r\n    }\r\n\r\n    protected setZIndex(newZ: number) {\r\n        this.olLayer.setZIndex(newZ);\r\n    }\r\n}\r\n\r\nnm.LayerBaseVector = LayerBaseVector;\r\nexport default LayerBaseVector;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/layers/LayerBaseVector.ts","/**\r\n * Created by gavorhes on 12/7/2015.\r\n */\r\nimport {LayerBase, LayerBaseOptions} from './LayerBase';\r\nimport * as esriToOl from '../olHelpers/esriToOlStyle';\r\nimport mapPopup from '../olHelpers/mapPopup';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('layers');\r\n\r\n\r\n\r\n/**\r\n * Helper to return the url to the service on the production server\r\n * @param {string} folder\r\n * @param {string} service\r\n * @returns {string}\r\n */\r\nexport function makeServiceUrl(folder: string, service: string): string{\r\n    return `https://transportal.cee.wisc.edu/applications/arcgis2/rest/services/${folder}/${service}/MapServer`\r\n}\r\n\r\nexport function localCacheUrl(folder: string, service: string): string{\r\n    let loc = window.location.href;\r\n\r\n    let url = `/mapserver/${folder}/${service}`;\r\n\r\n    if (loc.indexOf('transportal.cee.wisc.edu') > -1){\r\n        if (loc.toLowerCase().indexOf('webmapsstage') > -1){\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmapsstage' + url;\r\n        } else {\r\n            url = 'https://transportal.cee.wisc.edu/gis/webmaps' + url\r\n        }\r\n    }\r\n\r\n\r\n    return url;\r\n}\r\n\r\n\r\n\r\n\r\nexport interface LayerEsriMapServerOptions extends LayerBaseOptions {\r\n    addPopup?: boolean;\r\n    showLayers?: Array<number>;\r\n    getLegend?: boolean;\r\n}\r\n\r\n/**\r\n * esri mapserver layer\r\n * @augments LayerBase\r\n */\r\nexport class LayerEsriMapServer extends LayerBase {\r\n    _esriFormat: ol.format.EsriJSON;\r\n    _popupRequest: JQueryXHR;\r\n    _showLayers: number[];\r\n\r\n    /**\r\n     * The base layer for all others\r\n     * @param {string} url - resource url\r\n     * @param {object} [options] - config\r\n     * @param {string} [options.id] - layer id\r\n     * @param {string} [options.name=Unnamed Layer] - layer name\r\n     * @param {number} [options.opacity=1] - opacity\r\n     * @param {boolean} [options.visible=true] - default visible\r\n     * @param {number} [options.minZoom=undefined] - min zoom level, 0 - 28\r\n     * @param {number} [options.maxZoom=undefined] - max zoom level, 0 - 28\r\n     * @param {object} [options.params={}] the get parameters to include to retrieve the layer\r\n     * @param {number} [options.zIndex=0] the z index for the layer\r\n     * @param {function} [options.loadCallback] function to call on load, context this is the layer object\r\n     * @param {boolean} [options.legendCollapse=false] if the legend item should be initially collapsed\r\n     * @param {boolean} [options.legendCheckbox=true] if the legend item should have a checkbox for visibility\r\n     * @param {boolean} [options.legendContent] additional content to add to the legend\r\n     * @param {boolean} [options.addPopup=false] if a popup should be added\r\n     * @param {undefined|Array<number>} [options.showLayers=undefined] if a popup should be added\r\n     */\r\n    constructor(url: string, options: LayerEsriMapServerOptions = {}) {\r\n\r\n        super(url, options);\r\n        this._source = new ol.source.TileArcGISRest(\r\n            {\r\n                url: this.url == '' ? undefined : this.url,\r\n                params: typeof options.showLayers == 'undefined' ? undefined : {layers: 'show:' + options.showLayers.join(',')}\r\n            }\r\n        );\r\n\r\n        this._showLayers = options.showLayers || [];\r\n\r\n        this._olLayer = new ol.layer.Tile({\r\n            source: this._source as ol.source.Tile,\r\n            visible: this.visible,\r\n            opacity: this.opacity,\r\n            minResolution: this._minResolution,\r\n            maxResolution: this._maxResolution\r\n        });\r\n\r\n\r\n        this._olLayer.setZIndex(this._zIndex);\r\n\r\n        options.addPopup = typeof options.addPopup == 'boolean' ? options.addPopup : false;\r\n\r\n        this._esriFormat = new ol.format.EsriJSON();\r\n        this._popupRequest = null;\r\n\r\n        options.getLegend = typeof options.getLegend === 'boolean' ? options.getLegend : true;\r\n\r\n        if (options.getLegend){\r\n            this.addLegendContent();\r\n        }\r\n\r\n        if (options.addPopup) {\r\n            mapPopup.addMapServicePopup(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add additional content to the legend\r\n     * @param {string} [additionalContent=''] additional content for legend\r\n     */\r\n    addLegendContent(additionalContent?: string) {\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] !== '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'legend?f=pjson&callback=?';\r\n\r\n        $.get(urlCopy, {}, (d) => {\r\n            let newHtml = esriToOl.makeMapServiceLegend(d, this._showLayers);\r\n            super.addLegendContent(newHtml);\r\n        }, 'json');\r\n    }\r\n\r\n\r\n    getPopupInfo(queryParams: {[s: string]: any}) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n\r\n        let urlCopy = this.url;\r\n\r\n        if (urlCopy[urlCopy.length - 1] != '/') {\r\n            urlCopy += '/';\r\n        }\r\n\r\n        urlCopy += 'identify?callback=?';\r\n\r\n        let __this = this;\r\n\r\n        if (this._popupRequest != null) {\r\n            this._popupRequest.abort();\r\n        }\r\n\r\n\r\n        this._popupRequest = $.get(urlCopy, queryParams, function (d) {\r\n            for (let r of d['results']) {\r\n\r\n                let popupHtml = '<table class=\"esri-popup-table\">';\r\n\r\n                for (let a in r['attributes']) {\r\n                    if (r['attributes'].hasOwnProperty(a)) {\r\n                        let attrVal = r['attributes'][a];\r\n\r\n                        if (attrVal == null || attrVal.toString().toLowerCase() == 'null') {\r\n                            continue;\r\n                        }\r\n\r\n                        let attr = a;\r\n                        if (attr.length > 14) {\r\n                            attr = attr.slice(0, 11) + '...';\r\n                        }\r\n\r\n                        popupHtml += `<tr><td>${attr}</td><td>${attrVal}</td></tr>`;\r\n                    }\r\n                }\r\n\r\n                popupHtml += '</table>';\r\n\r\n                mapPopup.addMapServicePopupContent(__this._esriFormat.readFeature(r), __this, popupHtml, r['layerName']);\r\n            }\r\n        }, 'json');\r\n\r\n        this._popupRequest.always(function () {\r\n            __this._popupRequest = null;\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {ol.source.TileArcGISRest} the vector source\r\n     */\r\n    get source(): ol.source.TileArcGISRest {\r\n        return super.getSource() as ol.source.TileArcGISRest;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns the ol layer\r\n     */\r\n    get olLayer(): ol.layer.Tile {\r\n        return super.getOlLayer() as ol.layer.Tile;\r\n    }\r\n}\r\nnm.LayerEsriMapServer = LayerEsriMapServer;\r\nexport default LayerEsriMapServer;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/layers/LayerEsriMapServer.ts","/**\r\n * Created by gavorhes on 1/4/2016.\r\n */\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nconst nm = provide('olHelpers.esriToOlStyle');\r\n\r\n\r\n/**\r\n *\r\n * @param {Array<number>} colorArray - input color array\r\n * @param {number} opacity - the opacity 0 to 1\r\n * @returns {string} rgba string\r\n * @private\r\n */\r\nfunction _colorArrayToRgba(colorArray: [number, number, number], opacity: number): string {\r\n    \"use strict\";\r\n\r\n    return `rgba(${colorArray[0]},${colorArray[1]},${colorArray[2]},${opacity})`;\r\n}\r\n\r\n/**\r\n * escape html charcters\r\n * @param {string} str - input string\r\n * @returns {string} escaped string\r\n */\r\nfunction htmlEscape(str: string): string {\r\n    return String(str)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&#39;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;');\r\n}\r\n\r\nnm.htmlEscape = htmlEscape;\r\n\r\n\r\nexport interface iEsriResponse{\r\n    drawingInfo: {\r\n        renderer: iEsriRenderer;\r\n        transparency: number\r\n    },\r\n    geometryType: string\r\n}\r\n\r\n\r\nexport interface iEsriRenderer{\r\n    type: string;\r\n    symbol: iEsriSymbol;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: iEsriSymbol}>;\r\n    field1: string;\r\n    defaultSymbol: iEsriSymbol;\r\n    defaultLabel: string;\r\n}\r\n\r\nexport interface iEsriSymbol{\r\n    size: number;\r\n    type: string;\r\n    outline:{\r\n        color: [number, number, number];\r\n        width: number;\r\n    },\r\n    color: [number, number, number];\r\n    width: number;\r\n    imageData: string\r\n}\r\n\r\n\r\nclass CommonSymbol {\r\n    legendHtml: string;\r\n    opacity: number;\r\n    symbolObj: iEsriSymbol;\r\n    olStyle: ol.style.Style;\r\n\r\n    /**\r\n     *\r\n     * @param symbolObj\r\n     * @param {number} opacity\r\n     */\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        this.symbolObj = symbolObj;\r\n        this.opacity = opacity;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\ninterface ICommonSymbol{\r\n    new (symbolObj: iEsriSymbol, opacity: number): CommonSymbol\r\n}\r\n\r\n\r\nclass PointSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSMS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n                let radius = this.symbolObj.size;\r\n\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        fill: new ol.style.Fill({\r\n                            color: innerColor\r\n                        }),\r\n                        stroke: new ol.style.Stroke({color: outerColor, width: outlineWidth})\r\n                    })\r\n                });\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" style=\"color: ${innerColor}\">&#9679;</span>`;\r\n                break;\r\n            case 'esriPMS':\r\n                this.olStyle = new ol.style.Style({\r\n                    image: new ol.style.Icon({src: `data:image/png;base64,${this.symbolObj['imageData']}`})\r\n                });\r\n                this.legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${this.symbolObj['imageData']}\">`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Point symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass LineSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj.type) {\r\n            case 'esriSLS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let lineWidth = this.symbolObj.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: innerColor,\r\n                        //lineDash: [4],\r\n                        width: lineWidth\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 4px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: -1px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Line symbol does not handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nclass PolygonSymbol extends CommonSymbol {\r\n    constructor(symbolObj: iEsriSymbol, opacity: number) {\r\n        super(symbolObj, opacity);\r\n        switch (this.symbolObj['type']) {\r\n            case 'esriSFS':\r\n                let innerColor = _colorArrayToRgba(this.symbolObj.color, this.opacity);\r\n                let outerColor = _colorArrayToRgba(this.symbolObj.outline.color, this.opacity);\r\n                let outlineWidth = this.symbolObj.outline.width;\r\n\r\n                this.olStyle = new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: outerColor,\r\n                        //lineDash: [4],\r\n                        width: outlineWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: innerColor\r\n                    })\r\n                });\r\n\r\n                this.legendHtml = `<span class=\"legend-layer-icon\" `;\r\n                this.legendHtml += `style=\"`;\r\n                this.legendHtml += `background-color: ${innerColor};`;\r\n                this.legendHtml += `border: solid ${outerColor} 1px;`;\r\n                this.legendHtml += `width: 40px;`;\r\n                this.legendHtml += `height: 9px;`;\r\n                this.legendHtml += `position: relative;`;\r\n                this.legendHtml += `display: inline-block;`;\r\n                this.legendHtml += `top: 2px;`;\r\n                this.legendHtml += `\"></span>`;\r\n                break;\r\n\r\n            default:\r\n                console.log(this.symbolObj);\r\n                alert('Polygon symbol does handle symbol type: ' + this.symbolObj['type']);\r\n        }\r\n    }\r\n}\r\n\r\nexport interface iStyleFunc{\r\n    (f: ol.Feature): ol.style.Style| ol.style.Style[]\r\n}\r\n\r\nclass SymbolGenerator {\r\n    opacity: number;\r\n    renderer: iEsriRenderer;\r\n    legendHtml: string;\r\n    olStyle: iStyleFunc | ol.style.Style;\r\n\r\n    constructor(esriResponse: iEsriResponse) {\r\n        this.opacity = (100 - (esriResponse['drawingInfo']['transparency'] || 0)) / 100;\r\n        this.renderer = esriResponse.drawingInfo.renderer;\r\n        this.olStyle = undefined;\r\n        this.legendHtml = '';\r\n    }\r\n}\r\n\r\nclass SingleSymbol extends SymbolGenerator {\r\n    symbol: iEsriSymbol;\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the symbol class to use\r\n     */\r\n    constructor(esriResponse: iEsriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.symbol = this.renderer.symbol;\r\n        let symbolObj = new SymbolClass(this.symbol, this.opacity);\r\n        this.olStyle = symbolObj.olStyle;\r\n        this.legendHtml = symbolObj.legendHtml;\r\n    }\r\n}\r\n\r\nclass UniqueValueSymbol extends SymbolGenerator {\r\n\r\n    propertyName: string;\r\n    defaultSymbol: iEsriSymbol;\r\n    defaultStyle: ol.style.Style;\r\n    defaultLabelHtml: string;\r\n    labelArray: Array<string>;\r\n    legendArray: Array<string>;\r\n    propertyStyleLookup: {[s: string]: ol.style.Style};\r\n    valueArray: Array<any>;\r\n    uniqueValueInfos: Array<{label: string, value: any, symbol: iEsriSymbol}>;\r\n\r\n    /**\r\n     *\r\n     * @param {object} esriResponse - layer info\r\n     * @param SymbolClass - the Symbol class definition\r\n     */\r\n    constructor(esriResponse: iEsriResponse, SymbolClass: ICommonSymbol) {\r\n        super(esriResponse);\r\n        this.uniqueValueInfos = this.renderer.uniqueValueInfos;\r\n        this.propertyName = this.renderer.field1;\r\n        this.defaultSymbol = this.renderer.defaultSymbol;\r\n\r\n\r\n        if (this.defaultSymbol) {\r\n            let symbolObj = new SymbolClass(this.defaultSymbol, this.opacity);\r\n            this.defaultStyle = symbolObj.olStyle;\r\n            this.defaultLabelHtml = `<span class=\"legend-layer-subitem\">${htmlEscape(this.renderer['defaultLabel'])}</span>` + symbolObj.legendHtml;\r\n        } else {\r\n            this.defaultStyle = undefined;\r\n            this.defaultLabelHtml = 'other';\r\n        }\r\n\r\n        this.valueArray = [];\r\n        this.labelArray = [];\r\n        this.legendArray = [];\r\n        this.propertyStyleLookup = {};\r\n\r\n        for (let uniqueVal of this.uniqueValueInfos) {\r\n            this.labelArray.push(uniqueVal['label']);\r\n            this.valueArray.push(uniqueVal['value']);\r\n            let uniqueSym = new SymbolClass(uniqueVal.symbol, this.opacity);\r\n            this.legendArray.push(`<span class=\"legend-layer-subitem\">${htmlEscape(uniqueVal['label'])}</span>` + uniqueSym.legendHtml);\r\n            this.propertyStyleLookup[uniqueVal['value']] = uniqueSym.olStyle;\r\n        }\r\n\r\n        this.olStyle = (feature: ol.Feature): ol.style.Style[] => {\r\n            let checkProperties = feature.getProperties();\r\n            let checkProperty = checkProperties[this.propertyName];\r\n\r\n            if (this.propertyStyleLookup[checkProperty] !== undefined) {\r\n                return [this.propertyStyleLookup[checkProperty]];\r\n            } else {\r\n               return [this.defaultStyle];\r\n            }\r\n        };\r\n\r\n        if (this.defaultLabelHtml !== null) {\r\n            this.legendArray.push(this.defaultLabelHtml);\r\n        }\r\n\r\n        this.legendHtml = '<ul>';\r\n        for (let h of this.legendArray) {\r\n            this.legendHtml += `<li>${h}</li>`;\r\n        }\r\n        this.legendHtml += '</ul>';\r\n    }\r\n}\r\n\r\nexport function makeFeatureServiceLegendAndSymbol(esriResponse: iEsriResponse): {style: iStyleFunc | ol.style.Style, legend: string} {\r\n    \"use strict\";\r\n    let renderer = esriResponse.drawingInfo.renderer;\r\n    let symbolLegendOut: SymbolGenerator = null;\r\n\r\n    switch (renderer.type) {\r\n        case 'simple':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new SingleSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse.geometryType + ' not handled');\r\n            }\r\n            break;\r\n        case 'uniqueValue':\r\n            switch (esriResponse.geometryType) {\r\n                case 'esriGeometryPoint':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PointSymbol);\r\n                    break;\r\n                case 'esriGeometryPolyline':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, LineSymbol);\r\n                    break;\r\n                case 'esriGeometryPolygon':\r\n                    symbolLegendOut = new UniqueValueSymbol(esriResponse, PolygonSymbol);\r\n                    break;\r\n                default:\r\n                    console.log(esriResponse);\r\n                    alert(esriResponse['geometryType'] + ' not handled');\r\n            }\r\n            break;\r\n        default:\r\n            alert('not handled renderer type: ' + renderer['type']);\r\n    }\r\n\r\n    if (symbolLegendOut == null) {\r\n        return {style: undefined, legend: ''};\r\n    } else {\r\n        return {style: symbolLegendOut.olStyle, legend: symbolLegendOut.legendHtml};\r\n    }\r\n}\r\n\r\nnm.makeFeatureServiceLegendAndSymbol = makeFeatureServiceLegendAndSymbol;\r\n\r\n\r\nexport interface iMapServiceLegend{\r\n    layerName: string;\r\n    legend: {label: string, imageData: string}[]\r\n}\r\n\r\n/**\r\n *\r\n * @param {object} lyrObject - the layer as defined in the response\r\n * @param {boolean} [skipLayerNameAndExpander=false] use only icons\r\n * @returns {string} legend html\r\n */\r\nfunction mapServiceLegendItem(lyrObject: iMapServiceLegend, skipLayerNameAndExpander: boolean = false) {\r\n\r\n\r\n    skipLayerNameAndExpander = typeof skipLayerNameAndExpander == 'boolean' ? skipLayerNameAndExpander : false;\r\n    let layerName = lyrObject['layerName'];\r\n    let legendItems = lyrObject['legend'];\r\n    let legendHtml = '';\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml += `<span class=\"legend-layer-subitem\">${layerName}</span>`;\r\n    }\r\n\r\n    if (legendItems.length == 1) {\r\n        legendHtml = `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[0]['imageData']}\">`;\r\n    } else {\r\n        if (!skipLayerNameAndExpander) {\r\n            legendHtml += '<span class=\"legend-items-expander\" title=\"Expand/Collapse\">&#9660;</span>';\r\n        }\r\n        legendHtml += '<ul>';\r\n        for (let i = 0; i < legendItems.length; i++) {\r\n            legendHtml += `<li>`;\r\n            legendHtml += `<span class=\"legend-layer-subitem\">${htmlEscape(legendItems[i]['label'])}</span>`;\r\n            legendHtml += `<img class=\"legend-layer-icon\" height=\"17\" src=\"data:image/png;base64,${legendItems[i]['imageData']}\">`;\r\n            legendHtml += `</li>`;\r\n        }\r\n        legendHtml += '</ul>';\r\n    }\r\n\r\n    if (!skipLayerNameAndExpander) {\r\n        legendHtml = `<span class=\"legend-layer-subitem\">${layerName}</span>` + legendHtml;\r\n    }\r\n\r\n    return legendHtml;\r\n}\r\n\r\n/**\r\n * make map service legent\r\n * @param {object} esriResponse - layer info\r\n * @param  showLayers - limited number of layers to show in map service\r\n * @returns {string} legend content\r\n */\r\nexport function makeMapServiceLegend(esriResponse: {layers: iMapServiceLegend[]}, showLayers: number[] = []) {\r\n    \"use strict\";\r\n\r\n    let newLegendHtml = '';\r\n\r\n    let layers = esriResponse['layers'];\r\n\r\n    if (layers.length == 1) {\r\n        newLegendHtml += mapServiceLegendItem(layers[0], true);\r\n    } else {\r\n        newLegendHtml += '<ul>';\r\n        for (let i = 0; i < layers.length; i++) {\r\n            if (showLayers.length > 0 && showLayers.indexOf(i) < 0){\r\n                continue;\r\n            }\r\n            newLegendHtml += '<li>' + mapServiceLegendItem(layers[i]) + '</li>';\r\n        }\r\n        newLegendHtml += '</ul>';\r\n    }\r\n\r\n    return newLegendHtml;\r\n}\r\n\r\nnm.makeMapServiceLegend = makeMapServiceLegend;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/esriToOlStyle.ts","import $ = require('jquery')\r\nimport {makeGuid} from '../util/makeGuid';\r\nimport ol = require('custom-ol');\r\nimport {proj3857, proj4326} from './projections';\r\n\r\n\r\nlet invalidClass = 'geocoder-invalid';\r\nlet geocoderLoadingClass = 'geocoder-loading';\r\n\r\n// let testAddress = '65 7th Street, Prairie du Sac, WI';\r\n\r\n\r\nexport class Geocode {\r\n    private theButton: HTMLButtonElement;\r\n    private theInput: HTMLInputElement;\r\n    private map: ol.Map;\r\n    private indicationLayer;\r\n\r\n    constructor(mapDiv: HTMLDivElement, map: ol.Map) {\r\n        let inputGuid = makeGuid();\r\n        let buttonGuid = makeGuid();\r\n\r\n        this.map = map;\r\n        this.indicationLayer = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            style: new ol.style.Style({\r\n                image: new ol.style.Circle({\r\n                    radius: 12,\r\n                    fill: new ol.style.Fill({color: 'rgba(255,0,0,0.5)'}),\r\n                    stroke: new ol.style.Stroke({color: 'red', width: 1})\r\n                })\r\n            })\r\n        });\r\n        this.map.addLayer(this.indicationLayer);\r\n\r\n        $(mapDiv).append('<div class=\"geocoder-el\">' +\r\n            `<input type=\"text\" id=\"${inputGuid}\">` +\r\n            `<button id=\"${buttonGuid}\">Search</button>` +\r\n            '</div>');\r\n\r\n        this.theButton = document.getElementById(buttonGuid) as HTMLButtonElement;\r\n        this.theInput = document.getElementById(inputGuid) as HTMLInputElement;\r\n\r\n        this.reset();\r\n\r\n        let $theButton = $(this.theButton);\r\n        let $theInput = $(this.theInput);\r\n\r\n        $theButton.click((evt) => {\r\n\r\n            evt.preventDefault();\r\n\r\n            $theButton.addClass(geocoderLoadingClass);\r\n            this.theButton.disabled = true;\r\n            this.indicationLayer.getSource().clear();\r\n\r\n            $.get(\r\n                `https://geocode.xyz/${this.theInput.value}?geoit=json`,\r\n                {},\r\n                (d) => {\r\n                    let lat = parseFloat(d['latt']);\r\n                    let lon = parseFloat(d['longt']);\r\n\r\n                    if ((lat == 0 && lon == 0) || d['error']) {\r\n                        $theInput.addClass(invalidClass);\r\n                        this.theInput.title = 'Specified Location Invalid';\r\n                        this.theButton.title = 'Specified Location Invalid';\r\n\r\n                    } else {\r\n                        let v = this.map.getView();\r\n                        let p = new ol.geom.Point([lon, lat]);\r\n                        let feat = new ol.Feature(p);\r\n                        this.indicationLayer.getSource().addFeature(feat);\r\n                        p.transform(proj4326, proj3857);\r\n\r\n                        v.setCenter(p.getCoordinates());\r\n                        v.setZoom(13);\r\n                    }\r\n\r\n                    $theButton.removeClass(geocoderLoadingClass);\r\n                    this.theButton.disabled = false;\r\n                },\r\n                'json');\r\n        });\r\n\r\n        $(this.theInput).keyup((evt) => {\r\n            evt.preventDefault();\r\n            this.theButton.disabled = this.theInput.value.length == 0;\r\n            $theInput.removeClass(invalidClass);\r\n            this.theInput.title = '';\r\n            this.theButton.title = '';\r\n\r\n            if (!this.theButton.disabled && evt.keyCode == 13) {\r\n                $theButton.click();\r\n            }\r\n        })\r\n    }\r\n\r\n    private reset() {\r\n        this.theButton.disabled = true;\r\n        this.theInput.value = '';\r\n    }\r\n\r\n\r\n// https://geocode.xyz/65%2075h%20street%20prairie%20du%20sac%20wi?geoit=json\r\n\r\n// error\r\n// geocoder-invalid\r\n\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/geocode.ts","import LayerBaseVector from \"../layers/LayerBaseVector\";\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport * as checkDefined from '../util/checkDefined';\r\nimport provide from '../util/provide';\r\nimport makeGuid from '../util/makeGuid';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nconst nm = provide('olHelpers');\r\n\r\n\r\nexport interface extentObject{\r\n    minX: number;\r\n    minY: number;\r\n    maxX: number;\r\n    maxY: number;\r\n}\r\n\r\nexport interface mapMoveCallbackFunction{\r\n    /**\r\n     *\r\n     * @param extent extent as predefined object minX, minX, maxX, maxY\r\n     * @param zoomLevel current zoom level\r\n     * @param evtType the event type 'change:center', 'change:resolution'\r\n     */\r\n    (extent: extentObject, zoomLevel: number, evtType?: string): any\r\n}\r\n\r\n\r\n/**\r\n * assists with map move interactions, trigger callback functions\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapMoveCls extends MapInteractionBase {\r\n    _mapExtent: extentObject;\r\n    _zoomLevel: number;\r\n    _lookupLayer: {[s: string]: LayerBaseVector};\r\n    _arrLayer: Array<LayerBaseVector>;\r\n    _arrLyrTimeout: Array<number>;\r\n    _mapMoveCallbackTimeout: Array<number>;\r\n    _mapMoveCallbackDelays: Array<number>;\r\n    _mapMoveCallbacksLookup: {[s: string]: mapMoveCallbackFunction};\r\n    _mapMoveCallbackContext: Array<Object>;\r\n    _mapMoveCallbacks: Array<mapMoveCallbackFunction>;\r\n    _arrLyrRequest: Array<any>;\r\n\r\n    /**\r\n     * constructor called implicitly\r\n     */\r\n    constructor() {\r\n        super('map move');\r\n        this._arrLyrRequest = [];\r\n        this._arrLyrTimeout = [];\r\n        this._arrLayer = [];\r\n        this._lookupLayer = {};\r\n\r\n        this._mapMoveCallbacks = [];\r\n        this._mapMoveCallbacksLookup = {};\r\n        this._mapMoveCallbackDelays = [];\r\n        this._mapMoveCallbackContext = [];\r\n        this._mapMoveCallbackTimeout = [];\r\n\r\n        this._mapExtent = undefined;\r\n        this._zoomLevel = undefined;\r\n\r\n    }\r\n\r\n    /**\r\n     * initialize the map move object\r\n     * @param theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map){\r\n        super.init(theMap);\r\n\r\n        this.map.getView().on(['change:center', 'change:resolution'], (e: {type: string}) =>{\r\n\r\n           this._updateMapExtent();\r\n\r\n            // trigger the layer updates\r\n            for (let i = 0; i < this._arrLayer.length; i++) {\r\n                this.triggerLyrLoad(this._arrLayer[i], i, e.type);\r\n            }\r\n\r\n            // trigger the map callbacks\r\n            for (let i = 0; i < this._mapMoveCallbacks.length; i++) {\r\n                this.triggerMoveCallback(i, e.type);\r\n            }\r\n        });\r\n    }\r\n\r\n    _updateMapExtent() {\r\n        let theView = this.map.getView();\r\n        this._zoomLevel = theView.getZoom();\r\n\r\n        let extentArray = theView.calculateExtent(this.map.getSize());\r\n\r\n        this._mapExtent = {\r\n            minX: extentArray[0],\r\n            minY: extentArray[1],\r\n            maxX: extentArray[2],\r\n            maxY: extentArray[3]\r\n        };\r\n    }\r\n\r\n    /**\r\n     * return the map extent\r\n     */\r\n    get mapExtent() {\r\n        if (!this._mapExtent) {\r\n            this._updateMapExtent();\r\n        }\r\n\r\n        return this._mapExtent;\r\n    }\r\n\r\n    /**\r\n     * Trigger the layer load\r\n     * @param lyr the layer being acted on\r\n     * @param index index of the layer\r\n     * @param eventType the event triggering the load, as 'change:center' or 'change:resolution'\r\n     */\r\n    triggerLyrLoad(lyr: LayerBaseVector, index?: number, eventType?: string) {\r\n\r\n        if (checkDefined.undefinedOrNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            throw 'need to define lyr or index';\r\n        } else if (checkDefined.definedAndNotNull(lyr) && checkDefined.undefinedOrNull(index)) {\r\n            index = this._arrLayer.indexOf(lyr);\r\n        } else if (checkDefined.undefinedOrNull(lyr) && checkDefined.definedAndNotNull(index)) {\r\n            lyr = this._arrLayer[index];\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._arrLyrTimeout[index] != null) {\r\n            clearTimeout(this._arrLyrTimeout[index]);\r\n            this._arrLyrTimeout[index] = null;\r\n        }\r\n\r\n        // abort if necessary and clear the request\r\n        if (this._arrLyrRequest[index] != null && this._arrLyrRequest[index] != 4) {\r\n            this._arrLyrRequest[index].abort();\r\n            this._arrLyrRequest[index] = null;\r\n        }\r\n\r\n        // dummy callback used if before load returns false\r\n        let callbackFunc = function () {};\r\n\r\n        if (lyr.mapMoveBefore(this._zoomLevel, eventType)) {\r\n            lyr.mapMoveMakeGetParams(this._mapExtent, this._zoomLevel);\r\n\r\n            let __this = this;\r\n\r\n            callbackFunc = function () {\r\n                function innerFunction(theLayer: LayerBaseVector, theIndex: number) {\r\n                    let _innerThis = this;\r\n                    this._arrLyrRequest[theIndex] = $.get(\r\n                        theLayer.url,\r\n                        theLayer.mapMoveParams,\r\n                        function (d) {\r\n                            /**\r\n                             * @type {LayerBaseVector}\r\n                             */\r\n                            theLayer.mapMoveCallback(d);\r\n                            theLayer.loadCallback();\r\n                        }, 'json').fail(\r\n                        function (jqXHR) {\r\n                            if (jqXHR.statusText != 'abort') {\r\n                                console.log('failed');\r\n                                console.log(theLayer.url);\r\n                                console.log(theLayer.mapMoveParams);\r\n                            }\r\n                        }).always(\r\n                        function () {\r\n                            _innerThis._arrLyrTimeout[theIndex] = null;\r\n                            _innerThis._arrLyrRequest[theIndex] = null;\r\n                        });\r\n                }\r\n                innerFunction.call(__this, lyr, index);\r\n            };\r\n        } else {\r\n            lyr.clear();\r\n        }\r\n        this._arrLyrTimeout[index] = setTimeout(callbackFunc, lyr.onDemandDelay);\r\n    }\r\n\r\n    /**\r\n     * trigger the map move call back at the given index\r\n     * @param ind - the index of the layer\r\n     * @param eventType=undefined the event triggering the load as 'change:center' or 'change:resolution'\r\n     * @param functionId=undefined the function id used to reference the added callback function\r\n     */\r\n    triggerMoveCallback(ind: number, eventType?: string, functionId?: string) {\r\n\r\n        if (typeof ind == 'undefined' && typeof functionId == 'undefined'){\r\n            throw 'either the function index or the id must be defined';\r\n        }\r\n\r\n        if (typeof ind !== 'number'){\r\n            ind = this._mapMoveCallbacks.indexOf(this._mapMoveCallbacksLookup[functionId]);\r\n        }\r\n\r\n        if (ind < 0){\r\n            console.log('function not found');\r\n\r\n            return;\r\n        }\r\n\r\n        // clear the timeout\r\n        if (this._mapMoveCallbackTimeout[ind] != null) {\r\n            clearTimeout(this._mapMoveCallbackTimeout[ind]);\r\n            this._mapMoveCallbackTimeout[ind] = null;\r\n        }\r\n\r\n        let ctx = this._mapMoveCallbackContext[ind];\r\n        let theFunc = this._mapMoveCallbacks[ind];\r\n\r\n        let __this = this;\r\n\r\n        let f = function () {\r\n            if (ctx !== null) {\r\n                theFunc.call(ctx, __this._mapExtent, __this._zoomLevel, eventType);\r\n            } else {\r\n                theFunc(__this._mapExtent, __this._zoomLevel, eventType);\r\n            }\r\n        };\r\n\r\n        this._mapMoveCallbackTimeout[ind] = setTimeout(f, this._mapMoveCallbackDelays[ind]);\r\n    }\r\n\r\n    /**\r\n     * Add a layer to the interaction\r\n     * @param  lyr - layer to add\r\n     * @param triggerOnAdd - if the layer should be loaded on add\r\n     */\r\n    addVectorLayer(lyr: LayerBaseVector, triggerOnAdd: boolean = true) {\r\n        if (this._arrLayer.indexOf(lyr) > -1) {\r\n            console.log('already added ' + lyr.name + ' to map move');\r\n\r\n            return;\r\n        }\r\n        this._checkInit();\r\n\r\n        this._arrLyrRequest.push(null);\r\n        this._arrLyrTimeout.push(null);\r\n        this._arrLayer.push(lyr);\r\n        this._lookupLayer[lyr.id] = lyr;\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerLyrLoad(lyr, this._arrLayer.length - 1);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * add a callback to the map move event\r\n     * @param func - callback function\r\n     * @param context - the context to use for this function\r\n     * @param delay=50 the delay before call load\r\n     * @param triggerOnAdd if the layer should be loaded on add to mapMove\r\n     * @param functionId optional id to reference the function later for outside triggering\r\n     */\r\n    addCallback(func: mapMoveCallbackFunction, context?: any, delay?: number, triggerOnAdd? : boolean, functionId?: string) {\r\n\r\n        if (this._mapMoveCallbacks.indexOf(func) > -1) {\r\n            console.log('this function already added to map move');\r\n            return;\r\n        }\r\n        this._checkInit();\r\n        if (!functionId){\r\n            functionId = makeGuid();\r\n        }\r\n\r\n        this._mapMoveCallbacks.push(func);\r\n        this._mapMoveCallbacksLookup[functionId] = func;\r\n        this._mapMoveCallbackDelays.push(typeof delay == 'number' ? delay : 50);\r\n        this._mapMoveCallbackContext.push(checkDefined.definedAndNotNull(context) ? context : null);\r\n        this._mapMoveCallbackTimeout.push(null);\r\n\r\n        triggerOnAdd = typeof triggerOnAdd == 'boolean' ? triggerOnAdd : true;\r\n\r\n        if (triggerOnAdd) {\r\n            if (this._mapExtent === undefined) {\r\n                this._updateMapExtent();\r\n            }\r\n            this.triggerMoveCallback(this._mapMoveCallbacks.length - 1);\r\n        }\r\n    }\r\n}\r\n\r\nnm.MapMoveCls = MapMoveCls;\r\nexport default MapMoveCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapMoveCls.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\n\r\nimport MapInteractionBase from './mapInteractionBase';\r\nimport propertiesZoomStyle from '../olHelpers/propertiesZoomStyle';\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport {LayerBaseVector} from \"../layers/LayerBaseVector\";\r\nimport {LayerBase} from \"../layers/LayerBase\";\r\nimport LayerEsriMapServer from \"../layers/LayerEsriMapServer\";\r\nimport $ = require('jquery');\r\n\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface popupChangedFunction {\r\n    ($popContent: JQuery): any;\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport interface popupCallback {\r\n    /**\r\n     * Callback function for the popup\r\n     * @param featureProperties\r\n     * @param jqRef\r\n     */\r\n    (featureProperties: Object, jqRef?: JQuery): string | boolean;\r\n}\r\n\r\ninterface mapEvent {\r\n    coordinate: ol.Coordinate;\r\n    pixel: ol.Pixel;\r\n    dragging: boolean|any;\r\n    originalEvent: Event;\r\n}\r\n\r\n\r\nexport class FeatureLayerProperties {\r\n\r\n    feature: ol.Feature;\r\n    layer: LayerBaseVector|LayerEsriMapServer;\r\n    layerIndex: number;\r\n    selectionLayer: ol.layer.Vector;\r\n    popupContent: string;\r\n    esriLayerName: string;\r\n\r\n    /**\r\n     *\r\n     * @param feature the feature\r\n     * @param layer - the layer in the popup\r\n     * @param layerIndex - index of the layer\r\n     * @param selectionLayer - the ol selection layer\r\n     * @param [esriLayerName=undefined] - esri layer name\r\n     */\r\n    constructor(feature: ol.Feature, layer: LayerBaseVector|LayerEsriMapServer, layerIndex: number, selectionLayer: ol.layer.Vector, esriLayerName?: string) {\r\n        this.feature = feature;\r\n        this.layer = layer;\r\n        this.layerIndex = layerIndex;\r\n        this.selectionLayer = selectionLayer;\r\n        this.popupContent = '';\r\n        this.esriLayerName = typeof esriLayerName == 'string' ? esriLayerName : undefined;\r\n    }\r\n\r\n    get layerName() {\r\n        if (typeof this.esriLayerName == 'string') {\r\n            return this.esriLayerName;\r\n        } else {\r\n            return this.layer.name;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * map popup class\r\n * @augments MapInteractionBase\r\n */\r\nexport class MapPopupCls extends MapInteractionBase {\r\n    private _popupOpen: boolean;\r\n    private _passThroughLayerFeatureArray: Array<FeatureLayerProperties>;\r\n    private _currentPopupIndex: number;\r\n    private _popupContentLength: number;\r\n    private _esriMapServiceLayers: Array<LayerEsriMapServer>;\r\n    private _$popupCloser: JQuery;\r\n    private _$popupContent: JQuery;\r\n    private _$popupContainer: JQuery;\r\n    private _popupOverlay: ol.Overlay;\r\n    private _arrPopupLayers: Array<LayerBaseVector>;\r\n    private _popupCoordinate: ol.Coordinate;\r\n    private _popupChangedFunctions: Array<popupChangedFunction>;\r\n    private _mapClickFunctions: Array<Function>;\r\n    private _selectionLayerLookup: {[s: string]: ol.layer.Vector};\r\n    private _arrPopupLayerIds: Array<string>;\r\n    private _arrPopupLayerNames: Array<string>;\r\n    private _arrPopupOlLayers: Array<ol.layer.Vector>;\r\n    private _arrPopupContentFunction: Array<popupCallback>;\r\n    private _selectionLayers: Array<ol.layer.Vector>;\r\n\r\n    /**\r\n     * Definition for openlayers style function\r\n     * @callback olStyleFunction\r\n     * &param feature the openlayers vector feature\r\n     * $param\r\n     */\r\n\r\n\r\n    /**\r\n     * map popup constructor\r\n     */\r\n    constructor() {\r\n        super('map popup');\r\n        this._arrPopupLayerIds = [];\r\n        this._arrPopupLayerNames = [];\r\n        this._arrPopupLayers = [];\r\n        this._arrPopupOlLayers = [];\r\n        this._arrPopupContentFunction = [];\r\n        this._$popupContainer = undefined;\r\n        this._$popupContent = undefined;\r\n        this._$popupCloser = undefined;\r\n        this._popupOverlay = undefined;\r\n        this._selectionLayers = [];\r\n        this._selectionLayerLookup = {};\r\n        this._mapClickFunctions = [];\r\n\r\n        //let a = function($jqueryContent){console.log($jqueryContent)};\r\n        //this._popupChangedLookup = {'a': a};\r\n        this._popupChangedFunctions = [];\r\n        this._esriMapServiceLayers = [];\r\n\r\n        this._popupOpen = false;\r\n        this._popupCoordinate = null;\r\n\r\n        this._passThroughLayerFeatureArray = [];\r\n\r\n        this._currentPopupIndex = -1;\r\n        this._popupContentLength = 0;\r\n\r\n    }\r\n\r\n    /**\r\n     * map popup initialization\r\n     * @param {ol.Map} theMap - the ol map\r\n     */\r\n    init(theMap: ol.Map) {\r\n        super.init(theMap);\r\n\r\n        let $map;\r\n        let target = this.map.getTarget();\r\n\r\n        if (typeof target == 'string') {\r\n            $map = $('#' + target);\r\n        }\r\n        else {\r\n            $map = $(target);\r\n        }\r\n\r\n        $map.append(\r\n            '<div class=\"ol-popup\">' +\r\n            '<span class=\"ol-popup-closer\">X</span>' +\r\n            '<div class=\"popup-content\"></div>' +\r\n            '</div>'\r\n        );\r\n\r\n        this._$popupContainer = $map.find('.ol-popup');\r\n        this._$popupContent = $map.find('.popup-content');\r\n        this._$popupCloser = $map.find('.ol-popup-closer');\r\n\r\n        let _ease = (n: number): number => {\r\n            return ol.easing.inAndOut(n);\r\n        };\r\n\r\n\r\n        this._popupOverlay = new ol.Overlay({\r\n            element: this._$popupContainer[0],\r\n            autoPan: true,\r\n            autoPanAnimation: {\r\n                duration: 250,\r\n                source: theMap.getView().getCenter(),\r\n                easing: _ease\r\n            }\r\n        });\r\n\r\n        this._map.addOverlay(this._popupOverlay);\r\n\r\n        this._$popupCloser.click((evt) => {\r\n            this.closePopup();\r\n        });\r\n\r\n        // display popup on click\r\n        this._map.on('singleclick', (evt: {coordinate: [number, number], pixel: ol.Pixel}) => {\r\n\r\n            this.closePopup();\r\n            this._popupCoordinate = evt['coordinate'];\r\n\r\n            // esri map service layers\r\n            if (this._esriMapServiceLayers.length > 0) {\r\n\r\n                let queryParams = {\r\n                    geometry: evt['coordinate'].join(','),\r\n                    geometryType: 'esriGeometryPoint',\r\n                    layers: 'all',\r\n                    sr: this._map.getView().getProjection().getCode().split(':')[1],\r\n                    mapExtent: (this._map.getView().calculateExtent(this._map.getSize()) as number[]).join(','),\r\n                    imageDisplay: (this._map.getSize() as number[]).join(',') + ',96',\r\n                    returnGeometry: true,\r\n                    tolerance: 15,\r\n                    f: 'pjson'\r\n                };\r\n\r\n                for (let l of this._esriMapServiceLayers) {\r\n                    l.getPopupInfo(queryParams);\r\n                }\r\n            }\r\n\r\n            let layerFeatureObjectArray = this._featuresAtPixel(evt['pixel']);\r\n\r\n            this._passThroughLayerFeatureArray = [];\r\n            this._currentPopupIndex = -1;\r\n\r\n            for (let i = 0; i < layerFeatureObjectArray.length; i++) {\r\n                let featObj = layerFeatureObjectArray[i];\r\n\r\n                let props = featObj.feature.getProperties();\r\n\r\n                let popupContentResponse = this._arrPopupContentFunction[featObj.layerIndex](props, this._$popupContent);\r\n\r\n                //skip if return was false\r\n                if (popupContentResponse === false) {\r\n                    //continue;\r\n                } else if (typeof popupContentResponse == 'string') {\r\n                    featObj.popupContent = popupContentResponse as string;\r\n                    this._passThroughLayerFeatureArray.push(featObj);\r\n                } else {\r\n                    featObj.selectionLayer.getSource().addFeature(featObj.feature);\r\n                }\r\n            }\r\n\r\n            this._popupContentLength = this._passThroughLayerFeatureArray.length;\r\n\r\n            this._currentPopupIndex = -1;\r\n\r\n            let popupHtml = '<div class=\"ol-popup-nav\">';\r\n            popupHtml += '<span class=\"previous-popup ol-popup-nav-arrow\">&#9664;</span>';\r\n            popupHtml += '<span class=\"next-popup ol-popup-nav-arrow\">&#9654;</span>';\r\n            popupHtml += `<span class=\"current-popup-item-number\" style=\"font-weight: bold;\"></span>`;\r\n            popupHtml += `<span>&nbsp;of&nbsp;</span>`;\r\n            popupHtml += `<span class=\"popup-content-length\" style=\"font-weight: bold;\">${this._popupContentLength}</span>`;\r\n            popupHtml += `<span>&nbsp;&nbsp;-&nbsp;&nbsp;</span>`;\r\n            popupHtml += `<span class=\"current-popup-layer-name\"></span>`;\r\n            popupHtml += '</div>';\r\n            popupHtml += '<div class=\"ol-popup-inner\">';\r\n\r\n            popupHtml += '</div>';\r\n\r\n            this._$popupContent.html(popupHtml);\r\n\r\n            this._$popupContent.find('.previous-popup').click(() => {\r\n                if (this._popupContentLength == 1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == 0) {\r\n                    this._currentPopupIndex = this._popupContentLength - 1;\r\n                } else {\r\n                    this._currentPopupIndex--;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n            let nextPopup = this._$popupContent.find('.next-popup');\r\n\r\n            nextPopup.click(() => {\r\n                if (this._popupContentLength == 1 && this._currentPopupIndex > -1) {\r\n                    return;\r\n                }\r\n\r\n                if (this._currentPopupIndex == this._popupContentLength - 1) {\r\n                    this._currentPopupIndex = 0;\r\n                } else {\r\n                    this._currentPopupIndex++;\r\n                }\r\n                this._triggerFeatSelect();\r\n            });\r\n\r\n\r\n            if (this._popupContentLength > 0) {\r\n                nextPopup.trigger('click');\r\n                this._popupOverlay.setPosition(this._popupCoordinate);\r\n                this._$popupContent.scrollTop(0);\r\n                this._popupOpen = true;\r\n            }\r\n        });\r\n\r\n        //change mouse cursor when over marker\r\n        this._map.on('pointermove', (evt: {dragging: boolean, originalEvent: Event}) => {\r\n            if (evt['dragging']) {\r\n                return;\r\n            }\r\n            let pixel = this.map.getEventPixel(evt['originalEvent']);\r\n            let hit = this.map.hasFeatureAtPixel(pixel, (lyrCandidate) => {\r\n                for (let olLayer of this._arrPopupOlLayers) {\r\n                    if (lyrCandidate == olLayer) {\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            });\r\n            let mapElement = this.map.getTargetElement() as HTMLElement;\r\n            mapElement.style.cursor = hit ? 'pointer' : '';\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * helper to select features\r\n     * @private\r\n     */\r\n    _triggerFeatSelect() {\r\n        let $currentPopupItemNumber = this._$popupContent.find('.current-popup-item-number');\r\n        let $innerPopup = this._$popupContent.find('.ol-popup-inner');\r\n        let $layerNameSpan = this._$popupContent.find('.current-popup-layer-name');\r\n        this.clearSelection();\r\n        let lyrFeatObj = this._passThroughLayerFeatureArray[this._currentPopupIndex];\r\n        $currentPopupItemNumber.html((this._currentPopupIndex + 1).toFixed());\r\n        $layerNameSpan.html(lyrFeatObj.layerName);\r\n        $innerPopup.html(lyrFeatObj.popupContent);\r\n        lyrFeatObj.selectionLayer.getSource().addFeature(lyrFeatObj.feature);\r\n        for (let f of this._popupChangedFunctions) {\r\n            f(this._$popupContent);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param feature - the ol feature\r\n     * @param {LayerEsriMapServer} lyr - the map server layer\r\n     * @param {string} popupContent - popup content\r\n     * @param {string} esriName - esri layer name\r\n     */\r\n    addMapServicePopupContent(feature: ol.Feature, lyr: LayerEsriMapServer, popupContent: string, esriName: string) {\r\n\r\n        let featLayerObject = new FeatureLayerProperties(\r\n            feature, lyr, this._popupContentLength, this._selectionLayerLookup[lyr.id], esriName\r\n        );\r\n        featLayerObject.popupContent = popupContent;\r\n\r\n        this._passThroughLayerFeatureArray.push(featLayerObject);\r\n        this._popupContentLength++;\r\n\r\n        $('.popup-content-length').html(this._popupContentLength.toFixed());\r\n\r\n        if (!this._popupOpen) {\r\n            this._$popupContent.find('.next-popup').trigger('click');\r\n\r\n            this._popupOverlay.setPosition(this._popupCoordinate);\r\n            this._$popupContent.scrollTop(0);\r\n            this._popupOpen = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param  pixel - the ol pixel\r\n     * @returns  feature layer properties\r\n     * @private\r\n     */\r\n    _featuresAtPixel(pixel: ol.Pixel): Array<FeatureLayerProperties> {\r\n        let layerFeatureObjectArray: FeatureLayerProperties[] = [];\r\n\r\n        this.map.forEachFeatureAtPixel(pixel, (feature: ol.Feature, layer: ol.layer.Vector) => {\r\n            let lyrIndex = this._arrPopupOlLayers.indexOf(layer);\r\n\r\n            if (lyrIndex > -1) {\r\n                layerFeatureObjectArray.push(\r\n                    new FeatureLayerProperties(\r\n                        feature, this._arrPopupLayers[lyrIndex], lyrIndex, this._selectionLayers[lyrIndex]));\r\n            }\r\n        });\r\n\r\n        return layerFeatureObjectArray;\r\n    }\r\n\r\n    closePopup() {\r\n        this._checkInit();\r\n        this._popupOpen = false;\r\n        this._popupOverlay.setPosition(undefined);\r\n        this._$popupCloser[0].blur();\r\n        this.clearSelection();\r\n        this._$popupContent.html('');\r\n\r\n        return false;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param chgFunction - popup change function\r\n     */\r\n    addPopupChangedFunction(chgFunction: popupChangedFunction) {\r\n        this._popupChangedFunctions.push(chgFunction);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase|*} lyr - the layer being acted on\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns  the new selection layer\r\n     * @private\r\n     */\r\n    _addPopupLayer(lyr: LayerBaseVector|LayerEsriMapServer, selectionStyle: {color?: string, width?: number, olStyle?: ol.style.Style}): ol.layer.Vector {\r\n        this._checkInit();\r\n\r\n        selectionStyle = selectionStyle || {};\r\n        selectionStyle.color = selectionStyle.color || 'rgba(255,170,0,0.5)';\r\n        selectionStyle.width = selectionStyle.width || 10;\r\n\r\n        let theStyle;\r\n\r\n        if (selectionStyle.olStyle) {\r\n            theStyle = selectionStyle.olStyle;\r\n        } else {\r\n            theStyle = new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: selectionStyle.color,\r\n                    width: selectionStyle.width\r\n                }),\r\n                image: new ol.style.Circle({\r\n                    radius: 7,\r\n                    fill: new ol.style.Fill({color: selectionStyle.color}),\r\n                    stroke: new ol.style.Stroke({color: selectionStyle.color, width: 1})\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: selectionStyle.color\r\n                })\r\n            });\r\n        }\r\n\r\n        let selectionLayer = new ol.layer.Vector(\r\n            {\r\n                source: new ol.source.Vector(),\r\n                style: theStyle\r\n            }\r\n        );\r\n\r\n        selectionLayer.setZIndex(100);\r\n\r\n        this._selectionLayers.push(selectionLayer);\r\n        this._selectionLayerLookup[lyr.id] = selectionLayer;\r\n        this.map.addLayer(selectionLayer);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add popup to the map\r\n     * @param {LayerBase|*} lyr The layer that the popup with act on\r\n     * @param {popupCallback} popupContentFunction - popup content function that makes popup info\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addVectorPopup(lyr: LayerBaseVector, popupContentFunction: popupCallback,\r\n                   selectionStyle?: {color?: string, width?: number, olStyle?: ol.style.Style}) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._arrPopupLayerIds.push(lyr.id);\r\n        this._arrPopupLayerNames.push(lyr.name);\r\n        this._arrPopupLayers.push(lyr);\r\n        this._arrPopupOlLayers.push(lyr.olLayer);\r\n        this._arrPopupContentFunction.push(popupContentFunction);\r\n\r\n        return selectionLayer;\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @param {LayerBase} lyr - layer\r\n     */\r\n    removeVectorPopup(lyr: LayerBase) {\r\n        let idx = this._arrPopupLayerIds.indexOf(lyr.id);\r\n\r\n        if (idx > -1) {\r\n            this._arrPopupLayerIds.splice(idx, 1);\r\n            this._arrPopupLayerNames.splice(idx, 1);\r\n            this._arrPopupLayers.splice(idx, 1);\r\n            this._arrPopupOlLayers.splice(idx, 1);\r\n            this._arrPopupContentFunction.splice(idx, 1);\r\n            this._selectionLayers.splice(idx, 1);\r\n            delete this._selectionLayerLookup[lyr.id];\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {LayerEsriMapServer} lyr - map server layer\r\n     * @param {object} [selectionStyle={}] the selection style configuration\r\n     * @param {string} [selectionStyle.color=rgba(255,170,0,0.5)] the selection color\r\n     * @param {number} [selectionStyle.width=10] the selection width for linear features\r\n     * @param {object|function} [selectionStyle.olStyle=undefined] an openlayers style object or function\r\n     * @returns {object} a reference to the ol selection layer\r\n     */\r\n    addMapServicePopup(lyr: LayerEsriMapServer, selectionStyle?: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction) {\r\n        let selectionLayer = this._addPopupLayer(lyr, selectionStyle);\r\n        this._esriMapServiceLayers.push(lyr);\r\n\r\n        return selectionLayer;\r\n    }\r\n\r\n    clearSelection() {\r\n        this._checkInit();\r\n        for (let i = 0; i < this._selectionLayers.length; i++) {\r\n            this._selectionLayers[i].getSource().clear();\r\n        }\r\n        for (let f of this._mapClickFunctions) {\r\n            f();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add a function to be called when the map is clicked but before any popups are implemented\r\n     * @param {function} func - the map click function\r\n     */\r\n    addMapClickFunction(func: Function) {\r\n        this._mapClickFunctions.push(func);\r\n    }\r\n}\r\nnm.MapPopupCls = MapPopupCls;\r\nexport default MapPopupCls;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapPopupCls.ts","import ol = require('custom-ol');\r\nimport {LayerBaseVector} from \"../layers/LayerBaseVector\";\r\nimport {fitToMap} from '../olHelpers/extentUtil';\r\nimport {layers} from \"../\";\r\n\r\ndeclare const glob: Object;\r\n\r\nexport interface iMapToBase64Options {\r\n    resize?: { width: number, height: number };\r\n    layers?: LayerBaseVector[] | LayerBaseVector[];\r\n    delay?: number;\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param {ol.Map} map\r\n * @param {(imgData) => string} callback\r\n * @param {iMapToBase64Options} options\r\n * @returns {any}\r\n */\r\nexport function mapToBase64(map: ol.Map, callback: (imgData: string) => any, options?: iMapToBase64Options): any {\r\n    options = options || {};\r\n\r\n    if (typeof options.delay === 'number') {\r\n        //pass\r\n    } else if (options.layers || options.resize) {\r\n        options.delay = 2000;\r\n    } else {\r\n        options.delay = 1;\r\n    }\r\n\r\n    let mapTarget: HTMLDivElement = map.getTargetElement() as HTMLDivElement;\r\n\r\n    let originalHeight = mapTarget.style.height;\r\n    let originalWidth = mapTarget.style.width;\r\n    let originalPosition = mapTarget.style.position;\r\n    let originalCenter = map.getView().getCenter();\r\n    let originalZoom = map.getView().getZoom();\r\n\r\n    // let mapTimeout = 1;\r\n\r\n    if (options.resize) {\r\n        mapTarget.style.height = `${options.resize.height}px`;\r\n        mapTarget.style.width = `${options.resize.width}px`;\r\n        mapTarget.style.position = 'absolute';\r\n        map.updateSize();\r\n    }\r\n\r\n    map.once('postrender', () => {\r\n\r\n        if (options.layers) {\r\n            fitToMap(options.layers, map);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            map.once('postcompose', (event) => {\r\n                try {\r\n                    let canvas: HTMLCanvasElement = event['context'].canvas;\r\n                    let imgData = canvas.toDataURL('image/png');\r\n                    callback(imgData);\r\n                }\r\n                catch (ex) {\r\n                    // reportParams['imgData'] = null;\r\n                } finally {\r\n                    if (options.resize) {\r\n                        mapTarget.style.height = originalHeight;\r\n                        mapTarget.style.width = originalWidth;\r\n                        mapTarget.style.position = originalPosition;\r\n\r\n                        map.updateSize();\r\n                        map.getView().setCenter(originalCenter);\r\n                        map.getView().setZoom(originalZoom);\r\n                    }\r\n\r\n                    if (options.layers) {\r\n                        fitToMap(options.layers, map);\r\n                    }\r\n                }\r\n            });\r\n            map.renderSync();\r\n        }, options.delay);\r\n    });\r\n\r\n    map.updateSize();\r\n\r\n}\r\n\r\nexport default mapToBase64;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/mapToBase64.ts","/**\r\n * Created by gavorhes on 12/15/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\nimport {Geocode} from './geocode';\r\nconst nm = provide('olHelpers');\r\n\r\nexport interface quickMapOptions {\r\n    divId?: string;\r\n    center?: {x: number, y: number};\r\n    zoom?: number;\r\n    minZoom?: number;\r\n    maxZoom?: number;\r\n    baseSwitcher?: boolean;\r\n    fullScreen?: boolean;\r\n    addGeocode?: boolean;\r\n}\r\n\r\n/**\r\n * Sets up a map with some default parameters and initializes\r\n * mapMove and mapPopup\r\n *\r\n * @param [options={}] config options\r\n * @param [options.divId=map] map div id\r\n * @param [options.center={}] center config object\r\n * @param [options.center.x=-10018378] center x, web mercator x or lon\r\n * @param [options.center.y=5574910] center y, web mercator y or lat\r\n * @param [options.zoom=7] zoom level\r\n * @param [options.minZoom=undefined] min zoom\r\n * @param [options.maxZoom=undefined] max zoom\r\n * @param [options.baseSwitcher=true] if add base map switcher\r\n * @param [options.fullScreen=false] if add base map switcher\r\n * @returns the ol map\r\n */\r\nexport function quickMapBase(options: quickMapOptions = {}): ol.Map {\r\n    options.divId = options.divId || 'map';\r\n    options.center = options.center || {x: -10018378, y: 5574910};\r\n    options.zoom = typeof options.zoom == 'number' ? options.zoom : 7;\r\n    options.baseSwitcher = typeof options.baseSwitcher == 'boolean' ? options.baseSwitcher : true;\r\n    options.fullScreen = typeof options.fullScreen == 'boolean' ? options.fullScreen : false;\r\n    options.addGeocode = options.addGeocode || false;\r\n\r\n\r\n    let $mapDiv = $('#' + options.divId);\r\n    $mapDiv.css('position', 'relative');\r\n\r\n    let osmLayer = new ol.layer.Tile({source: new ol.source.OSM()});\r\n    // let satLayer = new ol.layer.Tile({visible: false, source: new ol.source.MapQuest({layer: 'sat'})});\r\n\r\n    let osmCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAADQ1NDk5OURFREtLS1FHSFlZWGJRVGJiYWdmZWxsbHRmaXBpanN0c3V0dHp5eX5+fIVzd4F3eeV0jud5juZ8k4aHhomHhoyGh5eGj5OVlJiVlZiYl5qZmJydnKOTlaKZmqKdnaOioaqqqKuzsbOvrrSysLa3tbW4uLm6ub27ub+/vbGXwbCZwbCgxLKlxrOqyLStybO3yrSxyrWzzbW2y7a1zbK4y7W6zbW8y760yrTAzbTFzrPKzrLOzrTJzrTOzr7CwbXC0LXK0LTO0L3I0bPQz7TQz7PS0bXQ0LnR0brW1bzT0r7U077V1Lzc2dqNqteUsdyXscaquuOHneaGmueHnOeJnuiBleiKn+eNoOiOoOWUpOiRo+iSpeiUpeqYpumaqOmdrPSynemgruSqtOmisOmlsuuqtequuOW1vOuxu+uxvOq1ve+xvPK0pvW3o/W5pfO5qvS7qfCwvMOuwc2/wNenxNyyzNe/0Nq31Nq51dy72Oy3wOu4wOu+xey4wO+6xO2+xfTAr/TCsvfFtPHLvvTJuMPDwMfHxcXKyc3DxMvFyMvLyM3PzcDV08DV1MTX1cbY1s7X1sjZ1sra2Mnd3M7b2c7c2tfH1tnB1t7F2d7M29fX1tLY1tDd2tHe3NTf3NnS19rZ1tva2Nnf3t3d28rh3tXg3Nnh3tzj393k39ni4N7k4N7n5uXDyOfLz+zAxu3CyOzEyezKzeDJ3eLM3uvP0u3P0ePf2+7R0u7Q1u/U0+7U1ezc0+7a2e/d2+3f3vbFzvLOwfHN0PPQw/TUx/LWyvLYzPDQ1fPe0ubc4vve4uHh3+nh3+/h2u/h3vHj2vHl3uHm4eTn4uDp5ebo4+Xo5ODq6ebq6OTv6+nl4+/j4O7l4e7n5ujp4+np5Ozq5e7s5urt6O7t6Orw6u7x6u3x7vPj5PDl4fDo4vDq5fDt5vDu6PDv7PTv6fDx6vHx7fH17fXw6fXy7fb07/bz8fT18vn38vr39fr48/r59Pr6+P3++//+/gAAALNTSk0AAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAFNElEQVRIS1VVCZxVUxi/9l0UIUT2bMnY43bVI2c0Y01kSWIaS0j2JEtkN41piomZrPPKQ2aQ7JKImOZlnm2493TJzDufuU1Zi+v/fee+mZ//793vnPOd7zvfes5zDBEZkBBjAcIjb+Iiotqgdhat8AMK0vl7/R9N7GiWtshqIr+EZ5gYKibyUsXY1l/mfFpssvUlWQ0FkU3gy4+RB/+kwYcO8pRSnldcOU/r2lAHARSwk2ORgEmOdC1EsuRiYSqMPwwroMIraZk5V2fYJQjCKfZrRmh3gSAZi2i4b7wSylWu8EqZwS59JkFUaW96JbNSc+CEUmt4rorwuZmWdDaoc+uZETuQlTCU5xYzR7muUnVUVo+BcRhre/VwUpasgJwhH7JkYIYA0sNxhmCwUK+lw6vCKBZehw01dEiyw4Q4aE0Z4ahDhKaFQsGnJ2BgqKoTBsNjFy0SlW6whRAZTdm8DBJmkBZhDi1j4xJQBk6ywrWUTymaCxac8lROcdauRGzQSNtA7EHUYhXyEwhhgjFUqRuO+rauhF1awFpzCsmwUbjIFBR0u1bKtyGpulW/H/cVVzkyGaIWTIR9pFAV6GK2gPMXMX8gPk9zzxXgI1kimcAltEYr+cjio1imlKpEa9rOipLm+p+CZ6Bw//qd1/f/O+GwMxbSLpyoZEcwkyh2jIks+3hmdd2jWUw4scxNysnHxU7nSspTRcJjCZGL3IsjsYJMMg5mwgx7gaIOLBFCogAgBBoNa9w+DE6I+Bs7FTgwwrJbHjWDgpYo2KwtBTcYEDuloC9geQw+k2RGnPGpTaOlq7AS+YICUz4DZVaX2TiNDhuYfTtY4geLi0IoCm3XccwM9hx4kU28StQEljDs3ZEpFGA+8dKzLmV9ymIwF5FOGn2GdJM8KLHDJbXyiYVMG9MRTLiXGGg2QKaxM3khPSRrwM9zEIardxU2w/EiA0gOeYKHzDR0V7/QGV3lKIA9ktrDArxO3gdA+k6SKoBiVwcm7NjZb9+Hnztg282TuHVZ9LOISFNt9MgyCetZVczSxnyDbl17Penq6mqpg1IhRaEO2aVLUO4/r17H8tTv6f13h71dduvZI3Y+uMdWksNSauLovJw5hsqiPIUvt0ku7/iBeUR3sksmomYWtRbAjbiLfv2lX9/V7LVG4uYnUZXhQ7f2OPCZEx9wrYWTcePEQqPEML8pl4mMdr/jlXlvHiRiJ2+MSTFY4TTSYStuvz2R/JXh+PPeGXm055J+3/YDWuNu3R3DArPutyg0ZgykMVDU9Ndm22+wYalr2rse48CnsTIFcMn73vfhNrktx1EUcZnPv6ah3Yy5cDTRdBEoGoBeah71dqFyjZDJLkWk3N3v4uuktssjWpzciMPxQeHj8nMKzcGuB0tAyzFhdCKOYWv4HwOQVwIxLG99a6uvH3sJCyO3h+k4EZ+G7+xj5f4XXksoaGrdMRzSc8ARA8+cdOuk2x6fffNNt5x+Ro1omPlrT/CQDlcNlpx4NBIWXhkx7Y3Zp3ofNR7Uv89Om/beW0TLIynHv3vs1VsOFpSWSXvfuPUf9BrRFyxgXdHoKJnQFegPOovvzz59ntrzye240ig8UQ3lDI2VqwagrKIQcLXNFL3wglN2OHdBQ6/vI3kENDVBwRb3k1XtczFbjWn4EzMYi7CF3129+JTYuRSdrGuS92g5dpqn6qXoJQs5xmL8p+Wt4hLbt0mx2OLNZR2bbPy8zJNQGFM/f/CfXZekRYFjGCWjIJpM+WiCzGBPWHhoyaAsjRT/B2Gy5yzYJkwUAAAAAElFTkSuQmCC')\";\r\n    let aerialCss = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQALBgIMDQgOBwQOEQcTBwUSCwoVDAwdBw8ZDgUREwYUGAYZFQYZGgkTFQoVGQsZFAwZHBMeDhIbFBEbHAwWIA4bIREcIQ4hCQwjFw4lHBgkDB8sDxUiExIiGhAoGxohFRshGRorHQcrKQsiIQwmKgooJA0pKQ81Jw8yLRMiIxImKxUrJREuKhslJB0rIhooKRUuMBMyLhkwJhozKh48LxUzMRM9MBwzMiUvFCMtGiMwEiwzFCgzHDI+GSIsISkvJSQxIiM2LiY5Jic+Lyk0JSo0Ky49JSs9KSU1NSM7NCs2NS8+NDM1JzU9Ljg7IDJCHS1DLSNAMitCMSxIOjREITZLIDZJKDlFIjpFKztKJT1LKzJBMzpHMD1JMjpKPD1RKjlQNC1DQj5QQEA8MEJGJkBKJUJNK0lLLEJMMkVMPEpONENSLUdZL0pTLkpaLkRUMkRSPEVZMktUM0pVOklZMklZNEpcNU1ZMk1ZNUxfMk5dNkxcOVFUM1RUOFJbNVFZOVNYPVFdOVJdPFVaOVVaPVVdOlVdPVpaNlpdO0phN01hOlBiN1NhPFNoP1piPWFbPmRjPENOQEtPSURTQkJVS0xVQk1VSkxbQkxcS0heUVFXRFRcQlJfTFxeQlpeS05lQk1kSFRjQVRjSlZpQ1tkQlxlSlxpRF1rSVVnUVtlU1llXF9tU1xoXlxwSl9ramRfQmJlQ2FhSWFlSWFlTmVlSWRmTGFoQWFpRWFsRmVpRWVtRmNsSmtlRGpqRmpsS2BmWGRsUmFrW2ptUmZyR2RxTGpxTWVyU2RyW2d5V2tzUmt0WW15VG15WXFuTHNtVnFxTXF4T3h0TnJzUnJ1XHJ4VXN6Wnp0VHx1W315VXp8XGR0YGx0YHVzZXJ0aHR9ZXV+aHl9YHOCXXqBXXeCYHyCY3iEaHyIYn+JaXqKcYB5WIN6Y4SCXoCDZIGEaYCIZoOLa4iCaImJbIOOdYuMco6OeIuVcpOKbZKPc5aQb5eXe5ufg6KjhAAAAAAAAAAAAAAAAOGCeQgAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjlsM35OAAAH80lEQVRISy1WbXQUVxm+6wqnk3Zmpxl2FG2EGg92C8GDlWptVTwa+uF3xcKmDfFzCUzDsJNsunXipglJXJbrtJWmwZNSnHD3jojRgUIm2UumIZ0JZ7JByrALbMWW0IBW8aRa4+cf76TeX3Nm3uc+z/s+7/vugl4r/aMTrT4e1pPTqnnmJNn5AyUzRnrRle/qE33dsvrBtAQVoxtpZNK3zSzYjUjviWO2Ag+R77dl7W36n/1Ep9KBPG/S+Py0PkjU/gPKQGqwTHryiWYFAXSvMairsio7SjyNsnCzh0qKImV9/7mhfHQZx2yN1O+7rXUm33MUPaboOkAJHaoIdXfJj2xWeyD8jMFEXkvIu5qzpU988gWB5zl+GS+sFe55trEVPdWZB2miq8bBVkNFO2R0qnrfkiXhcJhtDNXE6tbW97/s9O9/7ZfVhx86/CwrROpfvvxboMqeLsuqPr1j44qEwDNMOBximUiYoU8sw7BC/a7T72uEnyJDlGxZ9KcglZRyuqqrv/tSZErgOI4NgRBTIw9EmHAoFGZZnp6aGaJ2GTxfxYs8kKVUQh7WB5hQeC3LsUxoxVKW14l3BX2WcoUYPiZyLLe8teZ+iuT4GGhvV5KpKWkpyzxEr2MZgQ1xdRjfRBoH+2k6lIHjKTHPPBo8CSJISqqq4wGGOcWylIGlgvgNX1Gd8vF5f+IUIwb30ng+Gg2QfBRIMvy0jG8SVkYo4N0zvUXVRztbJ/L6xL7lUZEXBEHkuZqlS6gEAUgKJurnhFtfpACOYd8b/hVbJPqwi44a6KA0sPVjIi/SIyxb3u8KlAJ0S8jRVgrlW+nVHPdrhiXCxu42d86ByksDc80P3MkJFBFQ8Ho1lQegpWJRWFGsDsRwwv7pIyvuQW0ZkrX6NDVFbqcvaQI8vbyqzt5AARrsbKx5yhQEGs+wPO56bOK+0rcwMrOKkpUbZWYxV04UeZZv/cBKFhRL6Qdv9y4LfEDA7/thg7tTmv1a5/GnO0wl0dQg80wglZaHUmxRvjwAHOfyN0mxrpqLUpcjsK3NHYMo4R1o6eho2ZyIb2FoeOC3ILK8kZ2HQMOuWywGXUkJBCeTbYFS0+ym1h2/6UgmvnrvKYZZtIEXGf75C2cIAp5LHNd71x7uPoTjakrWH9e3KFpaatjUvJUysFw0KrLMYMW2lTg4PeUQx6kJEALvxXEmCdVyPLHtCSjBhc01XCjIgafxou+PE6KC1dhxSCwoBCc+N4P3btM84pmdSSjJnjO/nvY4LQfVyz5/I+v6IwjUOMjy+MVCxIbKupTJaEktp7cTKU42Pvjh2m/8cSpC6aPsaX/MHSuUQLVVsIa4RUTs/r/BVAexNdjdnsNG7j/rV93xheLMzKnFrPeTEQchCyCcKb25aAIn7lrAertrZwyNXM8N6zfWrFo3d2SmOEcF83x/r+OOFgrAHYWF7cELjhV7UQo/6WAIUVl9JFl8a//HZ66VpbY3I9QKZqPru77lA+iOWAIr0hKxHCmmr0othSyeIl5y3qt4xT8gSNrKEZozs8Els67rgsLOZ+ygzwMfbtNhobfgzpEyGnz7htPtzUi6PuOoj7K0WF/MXiUFxwGajRD1hjYXHXI9p406qOyinp5/tiWcDHY0jIu4n64Qfq7kliB2gemag9QbOia0PbbDMbd43SHuvxFxrAocxins7MX5Kqbe1QixKBxoV4//PfAgGCu+Rlm4SvZizyDH+0reDHp92iO0BuX3bCfItl0PEwvYLqpwXG2MHlGsQ4S8pMJZv1JGmHiEoHQDdOjwmVlEP/nE9ADKjI8xLI0OOGITfy0SbeG/C2jKUDGSlDhM9I3IpK9iup6XnbRNC7yqueNsJCCIiXzdQhnaGN+46umnEdy5U5UbUJ48LFM9GkJo8BdDOiAZ7ZIQbKhYLMqvhU2wmNxjEAsS2AI7y4nWF64duePbk7YV3zvAVLEMD9AxJRNa3KDUibV7DjnkuprMEYjScFNcaR2ceP2u9R/5k1052Ryme5phAFRswlHjAudiP4dOy7CaxLgdJh9vUlU1702/+LPa1U9fvPi9qlA4XEUBJc3dFlpsR457IDl1iPqLp7o81NQgyV19iYU38uTiv975Pd3SiwQcsGjx+v4/6fl5T7EOOMTCtpbKxfemsQq/3olQZcminADAAI0cuGLHaHOFxbuGvRk/Z9u7CULqoVR6NE0yx1avj30oRhc/jWUoIALGxkz0dg1Dl9iaI7LqOOXKsXJFwjiuEAi70Jra2nW1PL08zLBhZsMABpW5csI7TPfew9ipFKcn5k1i+1KyCWKjC3W/8dF1d666+RaabBVTFTHacjoojBNDh0NDxk+IPTlwfqJkWpbnpFHXIbLbmpxEQ3ff/Z0g/mauXsoln9wDRjy/NHsQFw3P6vWuTJ43/+FZrk2cvAFRipCKdfD9y2+pjRj78s0KdCUDKJvdV91ChngV38T20TM+gghjpJaPlpFr2xbEz5g4A/NGt5rNwdwmYGeeeMXBSLHHUIc+6RsojRH9VTUm3/mLf/64b470XvoxoTKhlMBQ2jMEzo2PjxdGMppmn1RM24bWFJqaQv4BcuJa2Sam7Zokq1ldCsz06NCBHrhwqVQYpfFj42NZexz1EW9SR/kT58nEeQKJb2fPXjjp0u/YUkwHEgLeOnf2nOuf1TRTM02CLKLTPy60/x1CCztqn7Ev+BdsC3m+30decQvW/wBNTwU+CfUQAQAAAABJRU5ErkJggg==')\";\r\n\r\n    if (options.baseSwitcher) {\r\n        //  let switcherContent = '<div class=\"base-map-switcher\" title=\"Toggle Base Layer\" style=\"';\r\n        //  switcherContent += 'position: absolute; top: 70px; left: 4px; border: solid black 1px; ';\r\n        //  switcherContent += `height: 50px; width: 50px; z-index: 10; border-radius: 4px; background: ${aerialCss};`;\r\n        //  switcherContent += '\"></div>';\r\n        //  $mapDiv.append(switcherContent);\r\n        //\r\n        // $mapDiv.find('.base-map-switcher').click(function() {\r\n        //      \"use strict\";\r\n        //      osmLayer.setVisible(!osmLayer.getVisible());\r\n        //      satLayer.setVisible(!satLayer.getVisible());\r\n        //\r\n        //      if (osmLayer.getVisible()){\r\n        //          $(this).css('background', aerialCss);\r\n        //      } else {\r\n        //          $(this).css('background', osmCss);\r\n        //      }\r\n        //  });\r\n    }\r\n\r\n    if (options.zoom < 0 || options.zoom > 28) {\r\n        throw 'zoom out of range';\r\n    }\r\n\r\n    if (options.center.x >= -180 && options.center.x <= 180 && options.center.y >= -90 && options.center.y <= 90) {\r\n        let p = new ol.geom.Point([options.center.x, options.center.y]);\r\n        new ol.proj.Projection({code: \"EPSG:4326\"});\r\n\r\n        p.transform(new ol.proj.Projection({code: \"EPSG:4326\"}), new ol.proj.Projection({code: \"EPSG:3857\"}));\r\n        let coordinates = p.getCoordinates();\r\n        options.center.x = coordinates[0];\r\n        options.center.y = coordinates[1];\r\n    }\r\n\r\n    const controls = ol.control.defaults({\r\n            attributionOptions: {collapsible: false}\r\n        }\r\n    );\r\n\r\n    const view = new ol.View({\r\n        center: [options.center.x, options.center.y],\r\n        zoom: options.zoom,\r\n        minZoom: options.minZoom,\r\n        maxZoom: options.maxZoom\r\n    });\r\n\r\n    let map = new ol.Map({\r\n        layers: [osmLayer],\r\n        target: options.divId,\r\n        controls: controls,\r\n        view: view\r\n    });\r\n\r\n    if (options.fullScreen) {\r\n        map.addControl(new ol.control.FullScreen({}));\r\n    }\r\n\r\n    if (options.addGeocode){\r\n        new Geocode(document.getElementById(options.divId) as HTMLDivElement, map);\r\n    }\r\n\r\n    return map;\r\n}\r\n\r\nnm.quickMapBase = quickMapBase;\r\nexport default quickMapBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/quickMapBase.ts","/**\r\n * Created by gavorhes on 12/14/2015.\r\n */\r\n\r\nimport provide from '../util/provide';\r\nconst nm = provide('olHelpers.zoomResolutionConvert');\r\n\r\nlet _zoomResLookup = [\r\n    156543.03392804097, //0\r\n    78271.51696402048, //1\r\n    39135.75848201024, //2\r\n    19567.87924100512, //3\r\n    9783.93962050256, //4\r\n    4891.96981025128, //5\r\n    2445.98490512564, //6\r\n    1222.99245256282, //7\r\n    611.49622628141, //8\r\n    305.748113140705, //9\r\n    152.8740565703525, //10\r\n    76.43702828517625, //11\r\n    38.21851414258813, //12\r\n    19.109257071294063, //13\r\n    9.554628535647032, //14\r\n    4.777314267823516, //15\r\n    2.388657133911758, //16\r\n    1.194328566955879, //17\r\n    0.5971642834779395, //18\r\n    0.29858214173896974, //19\r\n    0.14929107086948487, //20\r\n    0.07464553543474244, //21\r\n    0.03732276771737122, //22\r\n    0.01866138385868561, //23\r\n    0.009330691929342804, //24\r\n    0.004665345964671402, //25\r\n    0.002332672982335701, //26\r\n    0.0011663364911678506, //27\r\n    0.0005831682455839253 //28\r\n];\r\n\r\n/**\r\n * Get the resolution given the zoom level\r\n * @param {number} zoomLevel - the zoom level\r\n * @returns {number|*} the map resolution\r\n */\r\nexport function zoomToResolution(zoomLevel: number): number {\r\n    \"use strict\";\r\n\r\n    if (typeof zoomLevel == 'number') {\r\n        if (zoomLevel % 1 === 0 && zoomLevel >= 0 && zoomLevel <= 28) {\r\n            return _zoomResLookup[zoomLevel];\r\n        } else {\r\n            console.log(`invalid zoom level provided: ${zoomLevel}`);\r\n\r\n            return undefined;\r\n        }\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\nnm.zoomToResolution = zoomToResolution;\r\n\r\n\r\n/**\r\n * Get resolution from the zoom level\r\n * @param {number} resolution - the resolution\r\n * @returns {number|*} the zoom level\r\n */\r\nexport function resolutionToZoom(resolution: number): number{\r\n    for (let i = 0; i < _zoomResLookup.length; i++){\r\n        if (resolution >= _zoomResLookup[i] ){\r\n            return i;\r\n        }\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nnm.resolutionToZoom = resolutionToZoom;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/olHelpers/zoomResolutionConvert.ts","/**\r\n * Created by gavorhes on 11/3/2015.\r\n */\r\nimport provide from './provide';\r\nimport * as chk from './checkDefined';\r\n\r\nlet nm = provide('util.colors');\r\n\r\n\r\n/**\r\n * helper function to convert to hex\r\n * @param {number|string} x - the number to convert to hex\r\n * @returns {string} number as hex\r\n * @private\r\n */\r\nfunction _hex(x: number|string): string {\r\n    let hexDigits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\r\n    if (isNaN(x as number)){\r\n        return \"00\";\r\n    } else {\r\n        let m = x as number;\r\n        return hexDigits[(m - m % 16) / 16] + hexDigits[m % 16];\r\n    }\r\n    // return isNaN(x as number) ? \"00\" : hexDigits[(x - x % 16) / 16] + hexDigits[x % 16];\r\n}\r\n\r\n/**\r\n * converts an RGB string to hex\r\n * @param {string} rgb - rgb color\r\n * @returns {string} rbg as hex\r\n */\r\nexport function rgb2hex(rgb: string): string {\r\n    let rgb1 = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\r\n\r\n    return (\"#\" + _hex(rgb1[1]) + _hex(rgb1[2]) + _hex(rgb1[3])).toUpperCase();\r\n}\r\n\r\nnm.rgb2hex = rgb2hex;\r\n\r\n\r\n/**\r\n * Convert hex string to RGB or RGBA string\r\n * @param {string} hexString - hex color string\r\n * @param {number} [alphaVal=undefined] Alpha value\r\n * @returns {string} - rgb or rgba color\r\n */\r\nexport function hexAlphaToRgbOrRgba(hexString: string, alphaVal: number): string {\r\n    hexString = ((hexString.charAt(0) == \"#\") ? hexString.substring(1, 7) : hexString);\r\n    let r = parseInt(hexString.substring(0, 2), 16).toString() || '0';\r\n    let g = parseInt(hexString.substring(2, 4), 16).toString() || '0';\r\n    let b = parseInt(hexString.substring(4, 6), 16).toString() || '0';\r\n    if (alphaVal) {\r\n        return `rgba(${r},${g},${b},${alphaVal})`;\r\n    } else {\r\n        return `rgba(${r},${g},${b})`;\r\n    }\r\n}\r\n\r\nnm.hexAlphaToRgbOrRgba = hexAlphaToRgbOrRgba;\r\n\r\n\r\n/**\r\n * adds alpha value to rgb string 'rgb(r, b, g)', returns 'rgba(r, g, b, a)'\r\n * @param {string} rgb - rgb color\r\n * @param {number} alpha - alpha value 0 to 1\r\n * @returns {string} rgba color\r\n */\r\nexport function rgbToRgba(rgb: string, alpha: number): string {\r\n    let pieces = rgb.split(',');\r\n    pieces[0] = pieces[0].replace('rgb', 'rgba');\r\n    pieces[2] = pieces[2].replace(')', '');\r\n    pieces.push(' ' + alpha.toFixed(1) + ')');\r\n\r\n    return pieces.join(',');\r\n}\r\n\r\nnm.rgbToRgba = rgbToRgba;\r\n\r\n\r\n/**\r\n * @typedef {function} colorLookupByNumber\r\n * @param {number} num - the number to use to retrieve the color\r\n * @returns {string} rgb color\r\n */\r\n\r\n\r\n/**\r\n * Make a blue green red gradient\r\n * @param {number} minVal - minimum value\r\n * @param {number} maxVal - maximum value\r\n * @param {boolean} flipColors - if the colors should be flipped\r\n * @returns {colorLookupByNumber} color lookup function\r\n */\r\nexport function makeBlueGreenRedGradient(minVal: number, maxVal: number, flipColors:boolean=false): (v: number) => string {\r\n\r\n    if (typeof flipColors != \"boolean\") {\r\n        flipColors = false;\r\n    }\r\n\r\n    return function (theVal: number): string {\r\n        let r, g, b;\r\n        let ratio;\r\n\r\n        if (chk.undefinedOrNull(theVal)) {\r\n            return 'rgb(100,100,100)';\r\n        }\r\n\r\n        let percent = (theVal - minVal) / (maxVal - minVal);\r\n\r\n        if (flipColors == true) {\r\n            percent = 1 - percent;\r\n        }\r\n\r\n        if (percent >= 1) {\r\n            r = 255;\r\n            g = 0;\r\n            b = 0;\r\n        } else if (percent <= 0) {\r\n            r = 0;\r\n            g = 0;\r\n            b = 255;\r\n        } else if (percent < .25) {\r\n            // green up, blue constant\r\n            r = 0;\r\n            g = Math.floor(255 * percent / 0.25);\r\n            b = 255;\r\n        } else if (percent < 0.50) {\r\n            //blue down, green constant\r\n            ratio = (percent - 0.25) / 0.25;\r\n            r = 0;\r\n            g = 255;\r\n            b = 255 - Math.floor(255 * ratio);\r\n        } else if (percent < 0.75) {\r\n            // red up, green constant\r\n            ratio = (percent - 0.5) / 0.25;\r\n            r = Math.floor(255 * ratio);\r\n            g = 255;\r\n            b = 0;\r\n        } else {\r\n            // green down, red constant\r\n            ratio = (percent - 0.75) / 0.25;\r\n            r = 255;\r\n            g = 255 - Math.floor(255 * ratio);\r\n            b = 0;\r\n        }\r\n\r\n        r = r.toFixed();\r\n        g = g.toFixed();\r\n        b = b.toFixed();\r\n\r\n        return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n    };\r\n}\r\n\r\nnm.makeBlueGreenRedGradient = makeBlueGreenRedGradient;\r\n\r\n\r\n/**\r\n * Create a function that will return colors based on a gradient\r\n * @param {number} median - median value\r\n * @param {number} stdDev - standard deviation\r\n * @param {boolean} flipColors - if the colors should be flipped\r\n * @returns {colorLookupByNumber} color lookup function\r\n */\r\nexport function makeBlueGreenRedGradientZScore(median: number, stdDev: number, flipColors: boolean = false):(v: number) => string {\r\n\r\n    let grd = makeBlueGreenRedGradient(-2.5, 2.5, flipColors);\r\n\r\n    return function (theVal: number): string {\r\n\r\n        let zScore;\r\n        if (theVal == null) {\r\n            zScore = null;\r\n        } else {\r\n            zScore = (theVal - median) / stdDev;\r\n        }\r\n\r\n        return grd(zScore);\r\n    };\r\n}\r\n\r\nnm.makeBlueGreenRedGradientZScore = makeBlueGreenRedGradientZScore;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/util/colors.ts","/**\r\n * Created by gavorhes on 5/16/2016.\r\n */\r\nimport provide from 'webmapsjs/dist/util/provide';\r\n// import * as styles  from '../layerStyles';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport * as calcExtent from 'webmapsjs/dist/olHelpers/extentUtil';\r\nimport makeGuid from 'webmapsjs/dist/util/makeGuid';\r\nimport CorridorConfig from '../corridor/CorridorConfig';\r\nimport Corridor from '../corridor/Corridor';\r\nimport {popupCallback} from 'webmapsjs/dist/olHelpers/mapPopupCls'\r\nimport ol = require('custom-ol');\r\n\r\nimport $ = require('jquery');\r\nimport {LayerBaseVector} from \"webmapsjs/dist/layers/LayerBaseVector\";\r\nimport {mmPopupContent} from \"../popup\";\r\nconst nm = provide('ssa');\r\n\r\n/**\r\n *\r\n * @param {string} [rowHtml=''] data row html\r\n * @returns {string} full table html\r\n */\r\nfunction tableContent(rowHtml = '') {\r\n    \"use strict\";\r\n    rowHtml = typeof  rowHtml == 'string' ? rowHtml : '';\r\n\r\n    let tableContent = \"<table>\";\r\n    tableContent += \"<tr>\";\r\n    tableContent += '<th></th>';\r\n    tableContent += '<th>Corridors</th>';\r\n    tableContent += '<th></th>';\r\n    tableContent += \"</tr>\";\r\n    tableContent += rowHtml;\r\n    tableContent += \"</table>\";\r\n\r\n    return tableContent;\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} fromRp - from reference point\r\n * @param {string} toRp - to reference point\r\n * @returns {string} string with abbreviated reference point identifiers separated by a hyphen\r\n * @private\r\n */\r\nfunction corridorName(fromRp, toRp) {\r\n    \"use strict\";\r\n\r\n    return fromRp.substring(0, 7) + ' - ' + toRp.substring(0, 7);\r\n}\r\n\r\n\r\nexport class CorridorCollection {\r\n    $innerContainer: JQuery;\r\n    $corridorDataContainer: JQuery;\r\n    _map: ol.Map;\r\n    _visible: boolean;\r\n    _inCreateModifyOperation: boolean;\r\n    _showPopups: boolean;\r\n    $containerEl: JQuery;\r\n\r\n    _corridorArray: Array<Corridor>;\r\n    _coridorLookup: {[s: string]: Corridor};\r\n    _afterChange: Function;\r\n    _dataClass: string;\r\n    _popupStyle: popupCallback;\r\n\r\n\r\n    /**\r\n     * @param {jQuery} parentDiv - div id inside which to make the collection\r\n     * @param {ol.Map} theMap - the SSA main map\r\n     * @param {string} corridorDataIdOrClass - the corridor data container id or class\r\n     * @param {function} afterChange - function to run after a change has taken place\r\n     * @param {string} [dataClass=corridor-data] - function to run after a change has taken place\r\n     */\r\n    constructor(parentDiv, theMap, corridorDataIdOrClass, afterChange, dataClass) {\r\n\r\n        this._dataClass = dataClass ||  'corridor-data';\r\n\r\n\r\n        this._afterChange = afterChange;\r\n\r\n        let _corridorDataContainer = $(`.${corridorDataIdOrClass}, #${corridorDataIdOrClass}`);\r\n\r\n        if (_corridorDataContainer.length == 0) {\r\n            throw 'data container not found';\r\n        }\r\n\r\n        this.$corridorDataContainer = $(_corridorDataContainer[0]);\r\n\r\n\r\n        this.$corridorDataContainer.addClass('corridor-data-container');\r\n\r\n        this._map = theMap;\r\n\r\n        let corridorsGuid = makeGuid();\r\n        parentDiv.append(`<div id=\"${corridorsGuid}\"></div>`);\r\n        this.$containerEl = $('#' + corridorsGuid).addClass('corridor-collection-container');\r\n\r\n        let innerHtml = '<div class=\"corridor-collection\">';\r\n        innerHtml += tableContent();\r\n        innerHtml += '</div>';\r\n        this.$containerEl.append(innerHtml);\r\n        this.$innerContainer = this.$containerEl.find('.corridor-collection');\r\n        this._visible = true;\r\n        this._inCreateModifyOperation = false;\r\n\r\n        this._showPopups = true;\r\n\r\n\r\n        /**\r\n         *\r\n         * @type {Array<Corridor>}\r\n         */\r\n        this._corridorArray = [];\r\n\r\n        /**\r\n         *\r\n         * @type {{}}\r\n         * @private\r\n         */\r\n        this._coridorLookup = {};\r\n\r\n        this._popupStyle = (props): string|boolean => {\r\n            if (!this.showPopups) {\r\n                return false;\r\n            }\r\n\r\n            return mmPopupContent(props);\r\n        };\r\n    }\r\n\r\n\r\n    /**\r\n     * add a corridor\r\n     * @param {Corridor} c - the corridor to be added\r\n     * @param [refreshData=true] c - the corridor to be added\r\n     */\r\n    addCorridorCreate(c: Corridor, refreshData = true) {\r\n        this._corridorArray.push(c);\r\n        this._coridorLookup[c.clientId] = c;\r\n        this._map.addLayer(c.olLayer);\r\n        this._map.addLayer(c.nodeLayer.olLayer);\r\n        c.layer.name = corridorName(c.rpFrom, c.rpTo);\r\n        mapPopup.addVectorPopup(c.layer, this._popupStyle);\r\n        if (refreshData){\r\n            this.refreshHtmlCreate();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * delete/remove a corridor\r\n     * @param {string|Corridor} cor - the corridor to be removed\r\n     */\r\n    removeCorridor(cor) {\r\n        if (!confirm('Confirm Delete Corridor?')) {\r\n            return;\r\n        }\r\n\r\n        if (typeof cor == 'string') {\r\n            cor = this._coridorLookup[cor];\r\n        }\r\n\r\n        let ix = this._corridorArray.indexOf(cor);\r\n        mapPopup.removeVectorPopup(cor.layer);\r\n        this._map.removeLayer(cor.olLayer);\r\n        this._map.removeLayer(cor.nodeLayer.olLayer);\r\n        this._corridorArray.splice(ix, 1);\r\n        delete this._coridorLookup[cor.clientId];\r\n\r\n        this._map.getView().setZoom(this._map.getView().getZoom() - 1);\r\n        this._map.getView().setZoom(this._map.getView().getZoom() + 1);\r\n\r\n        this.refreshHtmlCreate();\r\n    }\r\n\r\n    /**\r\n     * refresh the contents of the corridor table and hidden corridor data input elements\r\n     */\r\n    refreshHtmlCreate() {\r\n        this.$innerContainer.html('');\r\n\r\n        let rowContent = '';\r\n\r\n        for (let c of this._corridorArray) {\r\n            rowContent += c.tableHtmlCreate;\r\n        }\r\n\r\n        this.$innerContainer.append(tableContent(rowContent));\r\n\r\n\r\n        this.$corridorDataContainer.html('');\r\n\r\n        for (let i = 0; i < this._corridorArray.length; i++) {\r\n            let cor = this._corridorArray[i];\r\n            this.$corridorDataContainer.append(cor.getDataHtml(i));\r\n        }\r\n\r\n        this._afterChange();\r\n    }\r\n\r\n\r\n    get visible() {\r\n        return this._visible;\r\n    }\r\n\r\n    set visible(viz) {\r\n        if (viz == this.visible) {\r\n            return;\r\n        }\r\n\r\n        this._visible = viz;\r\n\r\n        if (this.visible) {\r\n            this.$containerEl.show();\r\n        } else {\r\n            this.$containerEl.hide();\r\n        }\r\n    }\r\n\r\n    get fullExtent(): ol.Extent|Array<number>{\r\n        let lyrs: LayerBaseVector[] = [];\r\n\r\n        for (let c of this._corridorArray){\r\n            lyrs.push(c.layer);\r\n        }\r\n\r\n        return calcExtent.calculateExtent(lyrs);\r\n    }\r\n\r\n    /**\r\n     * if currently in a create or modify operation\r\n     * @returns {boolean} is creating or modifying\r\n     */\r\n    get inCreateModifyOperation() {\r\n        return this._inCreateModifyOperation;\r\n    }\r\n\r\n    /**\r\n     * if currently in a create or modify operation\r\n     * @param {boolean} isInCreateModifyOperation - is creating or modifying\r\n     */\r\n    set inCreateModifyOperation(isInCreateModifyOperation) {\r\n        this._inCreateModifyOperation = isInCreateModifyOperation;\r\n\r\n        if (this.inCreateModifyOperation) {\r\n            this.$innerContainer.addClass('corridor-collection-create-modify');\r\n        } else {\r\n            this.$innerContainer.removeClass('corridor-collection-create-modify');\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {boolean} if the corridor popups should be shown\r\n     */\r\n    get showPopups() {\r\n        return this._showPopups;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} show - if the corridor popups should be shown\r\n     */\r\n    set showPopups(show) {\r\n        this._showPopups = show;\r\n    }\r\n\r\n    get corridorCount() {\r\n        return this._corridorArray.length;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {string} corId - corridor id\r\n     * @returns {Corridor} the corridor matching the id in the lookup\r\n     */\r\n    getCorridorById(corId) {\r\n        return this._coridorLookup[corId];\r\n    }\r\n\r\n    loadExistingCorridors() {\r\n\r\n        let loadedCount = 0;\r\n\r\n        let existingCorridors = document.getElementsByClassName(this._dataClass);\r\n\r\n        // parse the data from the hidden input elements\r\n        for (let n = 0; n < existingCorridors.length; n++) {\r\n            let el = existingCorridors[n];\r\n\r\n            let conf = new CorridorConfig(el);\r\n\r\n\r\n            let corridor = new Corridor(\r\n                conf.startPdp, conf.endPdp, conf.startRp, conf.endRp,\r\n                conf.startCounty, conf.endCounty, conf.hgwy, conf.routeId,\r\n                {\r\n                    loadedCallback: () => {\r\n                        loadedCount++;\r\n                        //something special when all the corridors have been loaded\r\n                        if (this.corridorCount == loadedCount) {\r\n                            let ext = this.fullExtent;\r\n\r\n                            if (ext) {\r\n                                this._map.getView().fit(ext as ol.Extent, this._map.getSize());\r\n                            }\r\n\r\n                            this.refreshHtmlCreate();\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n            corridor.setDbValues(conf);\r\n\r\n            if (n == 0) {\r\n                $('#primaryCounty').val(corridor.countyStart);\r\n                $('#primaryRdwyRteId').val(corridor.routeId);\r\n            }\r\n\r\n            this.addCorridorCreate(corridor, false);\r\n        }\r\n    }\r\n}\r\n\r\nnm.CorridorCollection = CorridorCollection;\r\n\r\nexport default CorridorCollection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/CorridorCollection.ts","/**\r\n * Created by gavorhes on 7/15/2016.\r\n */\r\nimport filterMmFlag from '../filters/filterMmFlag';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport * as constants from '../constants';\r\nimport DeficiencyBase from './_DeficiencyBase';\r\nimport ol = require('custom-ol');\r\nimport {keyValPairs} from 'webmapsjs/dist/util/objectHelpers';\r\nimport filterControllingCritera from '../filters/filterContollingCriteria';\r\nimport * as styles from '../layerStyles'\r\n\r\n\r\nlet hasMmFlag = 'hasMmFlag';\r\nlet hasCc = 'hasCc';\r\nlet rateFlag = 'rateFlag';\r\nlet kabCrshFlag = 'kabCrshFlag';\r\n\r\nexport class Deficiency extends DeficiencyBase {\r\n    public metaList: string[] = [];\r\n    public deficiencyList: string[] = [];\r\n\r\n    constructor() {\r\n        super(\"Deficiencies\", styles.deficiencyStyle, 200, constants.defListId);\r\n    }\r\n\r\n    /**\r\n     * initialize with the map\r\n     * @param  m - the ol map\r\n     */\r\n    init(m: ol.Map) {\r\n        super.init(m);\r\n\r\n        filterMmFlag.addChangeCallback(() => {\r\n            this.deficiencyLayer.refresh();\r\n        });\r\n\r\n        filterControllingCritera.addChangeCallback(() => {\r\n            this.deficiencyLayer.refresh();\r\n        });\r\n\r\n        mapPopup.addVectorPopup(this.deficiencyLayer, (props) => {\r\n            // console.log(props);\r\n\r\n            let returnHtml = `PDP ID: ${props['pdpId']}<br/>`;\r\n\r\n            let rates = [];\r\n\r\n            if (props['rateFlag'] != null) {\r\n                rates.push(`Rate Flag: ${props['rateFlag'].toFixed(4)}`);\r\n            }\r\n\r\n            if (props['kabCrshFlag'] != null) {\r\n                rates.push(`KAB Flag: ${props['kabCrshFlag'].toFixed(4)}`);\r\n            }\r\n\r\n            if (rates.length > 0) {\r\n                returnHtml += 'Metamanager<ul>';\r\n                for (let m of rates) {\r\n                    returnHtml += `<li>${m}</li>`\r\n                }\r\n                returnHtml += '</ul>'\r\n            }\r\n\r\n            let ccs = [];\r\n\r\n            for (let cc of keyValPairs(constants.controllingCriteriaProps)) {\r\n                if (props[cc.key]) {\r\n                    let newCc = `<li>`;\r\n                    newCc += cc.value;\r\n\r\n                    let subEls = (props[cc.key] as string).split('::');\r\n\r\n                    newCc += '<ul>';\r\n\r\n                    for (let s of subEls) {\r\n                        if (!isNaN(parseInt(s)) || s.trim().length == 0) {\r\n                            continue;\r\n                        }\r\n                        newCc += `<li>${s}</li>`;\r\n                    }\r\n\r\n                    newCc += '</ul>';\r\n\r\n                    newCc += '</li>';\r\n                    ccs.push(newCc)\r\n                }\r\n            }\r\n\r\n            if (ccs.length > 0) {\r\n                returnHtml += \"Geometric Deficiencies<ul>\";\r\n\r\n                for (let c of ccs) {\r\n                    returnHtml += c;\r\n                }\r\n\r\n                returnHtml += '</ul>'\r\n            }\r\n            return returnHtml;\r\n        });\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Corridor} c - the corridor to be added\r\n     */\r\n    addCorridor(c) {\r\n        let feats = c.layer.source.getFeatures();\r\n\r\n        for (let f of feats) {\r\n            let props = f.getProperties();\r\n\r\n            let triggerRateFlag = props['rateFlag'] >= 1;\r\n            let triggerKabFlag = props['kabCrshFlag'] >= 1;\r\n\r\n            let deficiencyList = [];\r\n\r\n            for (let f of keyValPairs(constants.controllingCriteriaProps)) {\r\n                let ccProps = props[f.key];\r\n\r\n                if (ccProps) {\r\n                    deficiencyList.push(f.value)\r\n                }\r\n            }\r\n\r\n            if (triggerRateFlag || triggerKabFlag || deficiencyList.length > 0) {\r\n                this.deficiencyLayer.source.addFeature(f);\r\n\r\n                let appendHtml = `<span style=\"font-weight: bold; color: white\">${props['pdpId']}</span>:&nbsp;`;\r\n\r\n                let defs = [];\r\n\r\n                if (triggerRateFlag && triggerKabFlag){\r\n                    defs.push(`<span style=\"color: ${styles.mmBothColor}\">KAB,&nbsp;Crash Rate</span>`);\r\n                } else if (triggerRateFlag) {\r\n                    defs.push(`<span style=\"color: ${styles.mmRateFlagColor}\">Crash Rate</span>`);\r\n                } else if (triggerKabFlag) {\r\n                    defs.push(`<span style=\"color: ${styles.mmKabFlagColor}\">KAB</span>`);\r\n                }\r\n\r\n                appendHtml += defs.join(' ');\r\n\r\n                if (defs.length > 0){\r\n                    appendHtml += ',&nbsp;';\r\n                }\r\n\r\n                if (deficiencyList.length > 0){\r\n                    // console.log(deficiencyList);\r\n                     appendHtml += `<span style=\"color: ${styles.controllingCriteriaColor}\">` +\r\n                         `${deficiencyList.join(',&nbsp;')}</span>`;\r\n                }\r\n\r\n                this._summaryListItems.push({\r\n                        pdpId: props['pdpId'],\r\n                        liText: `<li ${constants.pdpDataAttr}=\"${props['pdpId']}\">${appendHtml}</li>`\r\n                    }\r\n                );\r\n\r\n\r\n                // this.$summaryList.append(`<li ${constants.pdpDataAttr}=\"${props['pdpId']}\">${appendHtml}</li>`);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default new Deficiency();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/Deficiency.ts","//\r\nimport SelectCounty from '../selectBox/SelectCounty';\r\nimport SelectHighway from '../selectBox/SelectHighway';\r\nimport SegmentPicker from '../selectBox/SegmentPicker';\r\nimport Corridor from '../corridor/Corridor';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\n\r\nimport * as lyrStyles from '../layerStyles';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport makeGuid from 'webmapsjs/dist/util/makeGuid';\r\nimport CorridorCollection from '../collections/CorridorCollection';\r\nimport ol = require('custom-ol');\r\nimport LayerEsriMapServer from 'webmapsjs/dist/layers/LayerEsriMapServer';\r\n\r\nimport $ = require(\"jquery\");\r\nimport 'jquery-ui';\r\n\r\n\r\n\r\nconst nm = provide('ssa');\r\n\r\nclass PickerCollection {\r\n    _map: ol.Map;\r\n    $createCorridorButton: JQuery;\r\n    $innerContainer: JQuery;\r\n    $zoomExtentButton: JQuery;\r\n    $containerEl: JQuery;\r\n    _dummyCorridor: Corridor;\r\n    _modifyCorridor: Corridor;\r\n    // $btnPickerPreview: JQuery;\r\n    $btnPickerAdd: JQuery;\r\n    $btnPickerModify: JQuery;\r\n    $btnPickerCancel: JQuery;\r\n\r\n    corridorCollection: CorridorCollection;\r\n\r\n    _addModifyEnabled: boolean;\r\n    _metamanagerSegmentsLayer: LayerEsriMapServer;\r\n\r\n    countyStartSelect: SelectCounty;\r\n    countyEndSelect: SelectCounty;\r\n    highwaySelect: SelectHighway;\r\n\r\n    segmentPickerFrom: SegmentPicker;\r\n    segmentPickerTo: SegmentPicker;\r\n\r\n    helpDialog: JQuery;\r\n\r\n    /**\r\n     *\r\n     * @param {jQuery} parentDiv - container div\r\n     * @param {ol.Map} theMap - the main map\r\n     */\r\n    constructor(parentDiv, theMap) {\r\n        this._map = theMap;\r\n\r\n        parentDiv.append('<div>' +\r\n            '<input type=\"button\" value=\"Add Corridor\" class=\"btn btn-default picker-create-corridor\">' +\r\n            '<input type=\"button\" value=\"Zoom to Extent\" class=\"btn btn-default picker-zoom-extent\">' +\r\n            '</div>');\r\n\r\n        this.$createCorridorButton = parentDiv.find('.picker-create-corridor');\r\n        this.$zoomExtentButton = parentDiv.find('.picker-zoom-extent');\r\n\r\n        let pickerGuid = makeGuid();\r\n        parentDiv.append(`<div id=\"${pickerGuid}\"></div>`);\r\n\r\n\r\n        this.$containerEl = $('#' + pickerGuid).addClass('picker-collection-container');\r\n        this.$containerEl.append('<div class=\"picker-collection\"><span class=\"corridor-picker-help\" title=\"Show Help\"></span></div>');\r\n        // this.$containerEl.append('<input type=\"button\" value=\"Preview\" class=\"btn btn-default picker-preview\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Add\" class=\"btn btn-default picker-add\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Modify\" class=\"btn btn-default picker-modify\" style=\"display: none;\">');\r\n        this.$containerEl.append('<input type=\"button\" value=\"Cancel\" class=\"btn btn-default picker-cancel\">');\r\n        this.$innerContainer = this.$containerEl.find('.picker-collection');\r\n\r\n        this._dummyCorridor = new Corridor(1, 1, '', '', 1, 1, 'h', -1, {\r\n            cancelLoad: true,\r\n            color: lyrStyles.corridorPreviewColor\r\n        });\r\n        this._dummyCorridor.layer.zIndex = 10;\r\n        this._map.addLayer(this._dummyCorridor.olLayer);\r\n\r\n        this._addModifyEnabled = false;\r\n\r\n        /**\r\n         *\r\n         * @type {Corridor|undefined}\r\n         * @private\r\n         */\r\n        this._modifyCorridor = undefined;\r\n\r\n\r\n        // this.$btnPickerPreview = this.$containerEl.find('.picker-preview');\r\n        this.$btnPickerAdd = this.$containerEl.find('.picker-add');\r\n        this.$btnPickerModify = this.$containerEl.find('.picker-modify');\r\n        this.$btnPickerCancel = this.$containerEl.find('.picker-cancel');\r\n\r\n\r\n        this.countyStartSelect = new SelectCounty(this.$innerContainer, \"Start County\");\r\n        this.countyEndSelect = new SelectCounty(this.$innerContainer, \"End County\");\r\n        this.highwaySelect = new SelectHighway(this.$innerContainer);\r\n\r\n        this._metamanagerSegmentsLayer = new LayerEsriMapServer(\r\n            'http://transportal.cee.wisc.edu/applications/arcgis2/rest/services/MetaManager/MM_All_Segments/MapServer',\r\n            {\r\n                minZoom: 7,\r\n                visible: false,\r\n                name: 'Metamanager Segments',\r\n                opacity: 0.4\r\n            });\r\n\r\n        this._map.addLayer(this._metamanagerSegmentsLayer.olLayer);\r\n\r\n        this.segmentPickerFrom = new SegmentPicker(this, true);\r\n        this.segmentPickerTo = new SegmentPicker(this, false);\r\n\r\n        this._map.addLayer(this.segmentPickerFrom.segmentLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerTo.segmentLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerFrom.selectionLayer.olLayer);\r\n        this._map.addLayer(this.segmentPickerTo.selectionLayer.olLayer);\r\n\r\n        /**\r\n         * \r\n         * @type {CorridorCollection|undefined}\r\n         */\r\n        this.corridorCollection = undefined;\r\n        this._addHandlers();\r\n        this._helpDialogInit();\r\n\r\n    }\r\n\r\n    _addHandlers() {\r\n        this.$createCorridorButton.click(() => {\r\n            this.startPicker();\r\n            this.$createCorridorButton.prop('disabled', true);\r\n        });\r\n\r\n        this.$zoomExtentButton.click(() => {\r\n            let ext = this.corridorCollection.fullExtent;\r\n            if (ext) {\r\n                this._map.getView().fit(ext as ol.Extent, this._map.getSize());\r\n            }\r\n        });\r\n\r\n        this.$btnPickerCancel.click(() => {\r\n            this.stopPicker();\r\n        });\r\n\r\n        // this.$btnPickerPreview.click(() => {\r\n        //     this.previewCorridor(()=> {});\r\n        //     // this.addCorridor();\r\n        // });\r\n\r\n        this.$btnPickerAdd.click(() => {\r\n            this.previewCorridor(this.addCorridor);\r\n            // this.addCorridor();\r\n        });\r\n\r\n        this.$btnPickerModify.click(() => {\r\n            this.previewCorridor(this.modifyCorridor);\r\n        });\r\n\r\n\r\n        this.countyStartSelect.addChangeListener((v) => {\r\n            \"use strict\";\r\n\r\n            this.highwaySelect.setStartEndCounty(v, this.countyEndSelect.selectedValue);\r\n            this.addModifyButtonEnabled = false;\r\n            this.segmentPickerTo.segmentLayer.visible = !this.startEndCountySame;\r\n        });\r\n        \r\n\r\n        this.countyEndSelect.addChangeListener((v) => {\r\n            \"use strict\";\r\n            this.highwaySelect.setStartEndCounty(this.countyStartSelect.selectedValue, v);\r\n            this.addModifyButtonEnabled = false;\r\n            this.segmentPickerTo.segmentLayer.visible = !this.startEndCountySame;\r\n        });\r\n\r\n        this.highwaySelect.addChangeListener((hwy) => {\r\n            \"use strict\";\r\n            this.segmentPickerFrom.setCountyAndRoute(this.countyStartSelect.selectedValue, hwy);\r\n            this.segmentPickerTo.setCountyAndRoute(this.countyEndSelect.selectedValue, hwy);\r\n            this.addModifyButtonEnabled = false;\r\n        });\r\n\r\n        this.segmentPickerFrom.addChangeListener(() => {\r\n            this.addModifyButtonEnabled = false;\r\n        });\r\n\r\n        this.segmentPickerTo.addChangeListener(() => {\r\n            this.addModifyButtonEnabled = false;\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Configure the help dialog\r\n     * @private\r\n     */\r\n    _helpDialogInit() {\r\n        let helpInfo = 'Corridors are defined by selecting in sequence the start county, highway, and end county ';\r\n        helpInfo += \"The reference points are then populated and can be selected either by using the combo box or \";\r\n        helpInfo += \"by clicking a segment in the map and clicking select in the resulting popup \";\r\n        helpInfo += \"Corridors are defined visually in the pickers as the start segment (green) and end segment (red) \";\r\n        helpInfo += \"inclusive of the corridor extents\";\r\n\r\n        $('body').append(`<div class=\"corridor-picker-help-dialog\" title=\"Corridor Selection Help\">` +\r\n            `<p style=\"text-align: justify\">${helpInfo}</p></div>`);\r\n\r\n\r\n        this.helpDialog = $(\".corridor-picker-help-dialog\");\r\n\r\n        this.helpDialog.dialog({\r\n            modal: true,\r\n            autoOpen: false,\r\n            height: 450,\r\n            width: 650,\r\n            buttons: [\r\n                {\r\n                    text: \"OK\",\r\n                    click: function () {\r\n                        $(this).dialog(\"close\");\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n\r\n        this.$containerEl.find('.corridor-picker-help').click(() => {\r\n            this.helpDialog.dialog('open');\r\n        });\r\n    }\r\n\r\n\r\n    previewCorridor(callback: Function) {\r\n        if (!this.segmentPickerFrom.selectedPdpId || !this.segmentPickerTo.selectedPdpId) {\r\n            alert('Select From and To Reference Points');\r\n\r\n            return;\r\n        }\r\n\r\n        this._map.removeLayer(this._dummyCorridor.layer.olLayer);\r\n        this._map.removeLayer(this._dummyCorridor.nodeLayer.olLayer);\r\n        this._dummyCorridor = new Corridor(\r\n            this.segmentPickerFrom.selectedPdpId,\r\n            this.segmentPickerTo.selectedPdpId,\r\n            this.segmentPickerFrom.selectedText,\r\n            this.segmentPickerTo.selectedText,\r\n            this.countyStartSelect.selectedValue,\r\n            this.countyEndSelect.selectedValue,\r\n            this.highwaySelect.selectedText,\r\n            this.highwaySelect.selectedValue,\r\n            {\r\n                cancelLoad: true,\r\n                color: lyrStyles.corridorPreviewColor\r\n            }\r\n        );\r\n\r\n\r\n        this._dummyCorridor.layer.zIndex = 10;\r\n        this._map.addLayer(this._dummyCorridor.layer.olLayer);\r\n        this._map.addLayer(this._dummyCorridor.nodeLayer.olLayer);\r\n\r\n        this._dummyCorridor.load((c) => {\r\n            this._map.getView().fit(c.extent, this._map.getSize());\r\n            this.addModifyButtonEnabled = true;\r\n            callback.call(this);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * add a corridor\r\n     */\r\n    addCorridor() {\r\n        let newCorridor = this._dummyCorridor.clone();\r\n        this.corridorCollection.addCorridorCreate(newCorridor);\r\n        this.segmentPickerTo.segmentLayer.visible = !this.startEndCountySame;\r\n        this.stopPicker();\r\n    }\r\n\r\n    modifyCorridor() {\r\n        this._modifyCorridor.updateCorridor(this._dummyCorridor);\r\n        this.corridorCollection.refreshHtmlCreate();\r\n        this.stopPicker();\r\n    }\r\n\r\n    /**\r\n     * Populate the selections based on values from an existing corridor\r\n     * @param {Corridor} [existingCor=undefined] existing corridor if in an edit operation\r\n     */\r\n    startPicker(existingCor?: Corridor) {\r\n        this.corridorCollection.inCreateModifyOperation = true;\r\n        this.$containerEl.show();\r\n        this.segmentPickerFrom.layersVisible = true;\r\n        this.segmentPickerTo.layersVisible = true;\r\n        this._metamanagerSegmentsLayer.visible = true;\r\n        this.corridorCollection.showPopups = false;\r\n\r\n\r\n        if (existingCor) {\r\n            this.$btnPickerAdd.hide();\r\n            this.$btnPickerModify.show();\r\n            this.countyStartSelect.box.val(existingCor.countyStart);\r\n            this.countyEndSelect.box.val(existingCor.countyEnd);\r\n            this.highwaySelect.setStartEndCounty(existingCor.countyStart, existingCor.countyEnd, existingCor.routeId);\r\n\r\n            this.segmentPickerFrom.setCountyAndRoute(existingCor.countyStart, existingCor.routeId, existingCor.pdpFrom);\r\n            this.segmentPickerTo.setCountyAndRoute(existingCor.countyEnd, existingCor.routeId, existingCor.pdpTo);\r\n\r\n            this._modifyCorridor = existingCor;\r\n            this._dummyCorridor.updateCorridor(existingCor);\r\n            this._map.getView().fit(this._dummyCorridor.extent as ol.Extent, this._map.getSize());\r\n        } else {\r\n            let $primCounty = $('#primaryCounty');\r\n            let $primRoute = $('#primaryRdwyRteId');\r\n            let primaryCounty = undefined;\r\n            let primaryRouteId = undefined;\r\n\r\n            if ($primCounty.length > 0) {\r\n                primaryCounty = $primCounty.val().length > 0 ? parseInt($primCounty.val()) : undefined;\r\n            }\r\n\r\n            if ($primRoute.length > 0) {\r\n                primaryRouteId = $primRoute.val().length > 0 ? parseInt($primRoute.val()) : undefined;\r\n            }\r\n\r\n            if (primaryCounty) {\r\n                this.countyStartSelect.box.val(primaryCounty);\r\n                this.countyEndSelect.box.val(primaryCounty);\r\n                this.highwaySelect.setStartEndCounty(primaryCounty, primaryCounty, primaryRouteId, true);\r\n            }\r\n\r\n            this.$btnPickerAdd.show();\r\n            this.$btnPickerModify.hide();\r\n        }\r\n    }\r\n\r\n    stopPicker() {\r\n        this.corridorCollection.showPopups = true;\r\n        this.$btnPickerAdd.show();\r\n        this.$btnPickerModify.hide();\r\n        // this.$btnPickerModify.prop('disabled', true);\r\n        this.$containerEl.hide();\r\n        this.$createCorridorButton.prop('disabled', false);\r\n        // this.countyStartSelect.box.val(1).trigger('change');\r\n        this.corridorCollection.visible = true;\r\n        this._dummyCorridor.layer.clear();\r\n        this._modifyCorridor = undefined;\r\n        this._dummyCorridor.nodeLayer.olLayer.getSource().clear();\r\n        this.addModifyButtonEnabled = false;\r\n        this.corridorCollection.inCreateModifyOperation = false;\r\n        $('.corridor-tr-selected').removeClass('corridor-tr-selected');\r\n        this.segmentPickerFrom.layersVisible = false;\r\n        this.segmentPickerTo.layersVisible = false;\r\n        this._metamanagerSegmentsLayer.visible = false;\r\n        mapPopup.closePopup();\r\n    }\r\n\r\n\r\n    /**\r\n     * Getter for if an add modify operation is happening {boolean}\r\n     * @returns {boolean} - if the add or modify operation is happening\r\n     */\r\n    get addModifyButtonEnabled() {\r\n        return this._addModifyEnabled;\r\n    }\r\n\r\n    /**\r\n     * Setter for if an add modify operation is happening {boolean}\r\n     * @param {boolean} isEnabled - if enabled\r\n     */\r\n    set addModifyButtonEnabled(isEnabled) {\r\n        this._addModifyEnabled = isEnabled;\r\n        // this.$btnPickerAdd.prop('disabled', !this.addModifyButtonEnabled);\r\n        // this.$btnPickerModify.prop('disabled', !this.addModifyButtonEnabled);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    get startEndCountySame(){\r\n        let isSame = this.countyStartSelect.selectedValue == this.countyEndSelect.selectedValue;\r\n\r\n        this.segmentPickerFrom.segmentLayer.name = isSame ? 'Start/End Segments' : 'Start Segment';\r\n\r\n        return isSame;\r\n    }\r\n\r\n    // /**\r\n    //  *\r\n    //  * @param {boolean} isSame\r\n    //  */\r\n    // set startEndCountySame(isSame){\r\n    //     console.log(isSame);\r\n    //\r\n    //     // this.segmentPickerTo.\r\n    // }\r\n    //\r\n    // get toRefPointLayerVisible(){\r\n    //     return this.segmentPickerTo.layersVisible\r\n    // }\r\n}\r\n\r\nnm.PickerCollection = PickerCollection;\r\nexport default PickerCollection;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/PickerCollection.ts","/**\r\n * Created by gavorhes on 7/15/2016.\r\n */\r\nimport LayerBaseVectorGeoJson from 'webmapsjs/dist/layers/LayerBaseVectorGeoJson';\r\nimport filterMmFlag from '../filters/filterMmFlag';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\n\r\nimport SortedFeatures from 'webmapsjs/dist/olHelpers/SortedFeatures';\r\nimport * as constants from '../constants';\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\n\r\nexport interface liIdText{\r\n    pdpId: number;\r\n    liText: string;\r\n}\r\n\r\nclass DeficiencyBase {\r\n    _map: ol.Map;\r\n    deficiencyLayer: LayerBaseVectorGeoJson;\r\n    _sortedFeatures: SortedFeatures;\r\n\r\n    $summaryList: JQuery;\r\n\r\n\r\n    _summaryListId: string;\r\n\r\n    _summaryListItems: liIdText[];\r\n\r\n    /**\r\n     *\r\n     * @param {string} layerName - layer name\r\n     * @param {function|object} layerStyle - layer style\r\n     * @param {number} z - z index\r\n     * @param {string} summaryListId - summaryListId\r\n     */\r\n    constructor(layerName: string,\r\n                layerStyle: ol.style.Style|Array<ol.style.Style>|ol.StyleFunction,\r\n                z: number,\r\n                summaryListId: string) {\r\n        this.deficiencyLayer = new LayerBaseVectorGeoJson('', {\r\n            zIndex: z,\r\n            name: layerName\r\n        });\r\n\r\n        this.deficiencyLayer.style = layerStyle;\r\n\r\n        this._summaryListItems = [];\r\n\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|undefined}\r\n         * @private\r\n         */\r\n        this._sortedFeatures = undefined;\r\n\r\n        /**\r\n         *\r\n         * @type {ol.Map|undefined}\r\n         * @private\r\n         */\r\n        this._map = undefined;\r\n\r\n        this._summaryListId = summaryListId;\r\n\r\n        /**\r\n         *\r\n         * @type {jQuery|undefined}\r\n         * @private\r\n         */\r\n        this.$summaryList = undefined;\r\n\r\n    }\r\n\r\n    /**\r\n     * initialize with the map\r\n     * @param {ol.Map} m - the ol map\r\n     * @abstract\r\n     */\r\n    init(m: ol.Map) {\r\n        this._map = m;\r\n        m.addLayer(this.deficiencyLayer.olLayer);\r\n        this.$summaryList = $(`#${this._summaryListId}`);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Corridor} c - the corridor to be added\r\n     * @abstract\r\n     */\r\n    addCorridor(c) {\r\n        // let feats = c.layer.source.getFeatures();\r\n        //\r\n        // let $mmDeficiencyList = $(`#${constants.mmFlagListId}`);\r\n        //\r\n        // for (let f of feats) {\r\n        //     // f.setProperties()\r\n        //     let props = f.getProperties();\r\n        //     let rate = props['rateFlag'];\r\n        //     let kab = props['kabFlag'];\r\n        //\r\n        //     let triggerRateFlag = typeof rate == 'number' && rate > 1;\r\n        //     let triggerKabFlag = typeof kab == 'number' && kab > 1;\r\n        //\r\n        //     if (triggerRateFlag || triggerKabFlag) {\r\n        //         this.deficiencyLayer.source.addFeature(f);\r\n        //         mmFlagIndex++;\r\n        //\r\n        //         f.setProperties({mmId: 'MM' + mmFlagIndex.toFixed()});\r\n        //         let appendHtml = `<b>MM${mmFlagIndex.toFixed()}</b>:&nbsp;`;\r\n        //         let flags = [];\r\n        //         if (triggerRateFlag) {\r\n        //             flags.push('Crash Rate');\r\n        //         }\r\n        //         if (triggerKabFlag) {\r\n        //             flags.push('KAB');\r\n        //         }\r\n        //\r\n        //         appendHtml += flags.join(', ');\r\n        //         $mmDeficiencyList.append(`<li ${constants.pdpDataAttr}=\"${props['pdpId']}\">${appendHtml}</li>`);\r\n        //     }\r\n        // }\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param pdpId\r\n     * @returns {ol.Feature|undefined}\r\n     */\r\n    getFeatureById(pdpId) {\r\n        return this._sortedFeatures.getFeature(pdpId);\r\n    }\r\n\r\n    /**\r\n     * @abstract\r\n     */\r\n    afterLoad() {\r\n        this._sortedFeatures = new SortedFeatures(this.deficiencyLayer.features, 'pdpId');\r\n\r\n        let _this = this;\r\n\r\n        this._summaryListItems.sort((a, b) => {\r\n            if (a.pdpId == b.pdpId){\r\n                return 0;\r\n            } else {\r\n                return a.pdpId < b.pdpId ? -1 : 1;\r\n            }\r\n        });\r\n\r\n        for (let i of this._summaryListItems){\r\n            this.$summaryList.append(i.liText);\r\n        }\r\n\r\n        this.$summaryList.find('li').click(function () {\r\n            let $this = $(this);\r\n\r\n            let theFeature = _this.getFeatureById(parseInt($this.attr(constants.pdpDataAttr)));\r\n\r\n            _this._map.getView().fit(theFeature.getGeometry().getExtent(), _this._map.getSize());\r\n            _this._map.getView().setZoom(_this._map.getView().getZoom() - 1);\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport default DeficiencyBase;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/_DeficiencyBase.ts","/**\r\n * Created by gavorhes on 7/13/2016.\r\n */\r\n\r\n// uncomment this to use the example crash data\r\n// import exampleCrashData from './_exampleCrashData';\r\nlet exampleCrashData = undefined;\r\n\r\nimport Ajx from '../ajaxGetters';\r\nimport * as objHelp from 'webmapsjs/dist/util/objectHelpers';\r\nimport LayerBaseVectorGeoJson from 'webmapsjs/dist/layers/LayerBaseVectorGeoJson';\r\nimport filterCrash from '../filters/filterCrash';\r\nimport * as colorUtil from 'webmapsjs/dist/util/colors';\r\nimport * as proj from 'webmapsjs/dist/olHelpers/projections';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport {crashPointStyle} from '../layerStyles';\r\nimport {crashPointPopup} from '../popup';\r\nimport {crashInfoHelper} from '../popup';\r\nimport iCrashData from './iCrashData';\r\n\r\n\r\nimport ol = require('custom-ol');\r\nimport $ = require('jquery');\r\n\r\nexport class CrashData {\r\n    pointCrashes: LayerBaseVectorGeoJson;\r\n    _crashHtmlLookup: {[s: string]: string};\r\n    _crashArrayLookup: {[s: string]: Array<iCrashData>};\r\n\r\n    constructor() {\r\n        this._crashHtmlLookup = {};\r\n        this._crashArrayLookup = {};\r\n        this.pointCrashes = new LayerBaseVectorGeoJson('', {\r\n            name: \"Crash Points\",\r\n            zIndex: 204,\r\n            minZoom: 10,\r\n            renderOrder: (a: ol.Feature, b: ol.Feature): number => {\r\n                let sevOrder = ['P', 'C', 'B', 'A', 'K'];\r\n\r\n                let sevA = a.getProperties()['injSvr'];\r\n                let sevB = b.getProperties()['injSvr'];\r\n\r\n                let sevAInd = sevOrder.indexOf(sevA);\r\n                let sevBInd = sevOrder.indexOf(sevB);\r\n\r\n                if (sevAInd == sevBInd) {\r\n                    return 0;\r\n                }\r\n\r\n                return sevAInd > sevBInd ? 1 : -1;\r\n            }\r\n        });\r\n\r\n        this.pointCrashes.style = crashPointStyle;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param m\r\n     * @param ssaId\r\n     * @param snapshot\r\n     */\r\n    init(m: ol.Map, ssaId: number, snapshot: number) {\r\n        mapPopup.addVectorPopup(this.pointCrashes, crashPointPopup);\r\n\r\n        filterCrash.addChangeCallback(() => {\r\n            this.pointCrashes.refresh();\r\n        });\r\n\r\n        Ajx.getCrashes(ssaId, snapshot, (d) => {\r\n            this._processCrashData(d);\r\n        });\r\n\r\n        m.addLayer(this.pointCrashes.olLayer);\r\n    }\r\n\r\n    _processCrashData(d) {\r\n\r\n        for (let itm of objHelp.keyValPairs(d)) {\r\n\r\n            /**\r\n             *\r\n             * @type {Array.<CrashDataObject>}\r\n             */\r\n            let _crashes = itm.value as iCrashData[];\r\n            let crashes = [] as iCrashData[];\r\n\r\n            let addedCrashDocNumbers: string[] = [];\r\n\r\n            for (let c of _crashes){\r\n                if (addedCrashDocNumbers.indexOf(c.doctnmbr) > -1){\r\n                    continue;\r\n                }\r\n                addedCrashDocNumbers.push(c.doctnmbr);\r\n                crashes.push(c);\r\n            }\r\n\r\n\r\n            this._crashHtmlLookup[itm.key] = crashInfoHelper(crashes);\r\n            this._crashArrayLookup[itm.key] = crashes;\r\n\r\n            for (let c of crashes) {\r\n                if (!(c.lon && c.lat)) {\r\n                    continue;\r\n                }\r\n\r\n                let geom = new ol.geom.Point([c.lon, c.lat] as ol.Coordinate);\r\n\r\n                geom.transform(proj.proj4326, proj.proj3857);\r\n\r\n                let p = new ol.Feature(geom);\r\n                c['injSvr'] = c['injSvr'] || 'O';\r\n                p.setProperties(c);\r\n                this.pointCrashes.source.addFeature(p);\r\n            }\r\n        }\r\n\r\n        // flash a crashes loaded message\r\n        let $crashesLoadMsg = $('.crashes-loaded-msg');\r\n\r\n        if ($crashesLoadMsg) {\r\n            $crashesLoadMsg.fadeIn();\r\n\r\n            setTimeout(()=> {\r\n                $crashesLoadMsg.fadeOut();\r\n            }, 4000);\r\n        } else {\r\n            console.log('get crashes message element not found');\r\n        }\r\n    }\r\n\r\n    getCrashSummary(pdp: string|number) {\r\n        let summ = this._crashHtmlLookup[pdp.toString()];\r\n        return summ || '';\r\n    }\r\n}\r\n\r\nexport default new CrashData();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/collections/crashData.ts","/**\r\n * Created by gavorhes on 5/17/2016.\r\n */\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nconst nm = provide('ssa');\r\n\r\nexport const countyLookup = {\r\n    \"1\": \"Adams\",\r\n    \"2\": \"Ashland\",\r\n    \"3\": \"Barron\",\r\n    \"4\": \"Bayfield\",\r\n    \"5\": \"Brown\",\r\n    \"6\": \"Buffalo\",\r\n    \"7\": \"Burnett\",\r\n    \"8\": \"Calumet\",\r\n    \"9\": \"Chippewa\",\r\n    \"10\": \"Clark\",\r\n    \"11\": \"Columbia\",\r\n    \"12\": \"Crawford\",\r\n    \"13\": \"Dane\",\r\n    \"14\": \"Dodge\",\r\n    \"15\": \"Door\",\r\n    \"16\": \"Douglas\",\r\n    \"17\": \"Dunn\",\r\n    \"18\": \"Eau Claire\",\r\n    \"19\": \"Florence\",\r\n    \"20\": \"Fond du Lac\",\r\n    \"21\": \"Forest\",\r\n    \"22\": \"Grant\",\r\n    \"23\": \"Green\",\r\n    \"24\": \"Green Lake\",\r\n    \"25\": \"Iowa\",\r\n    \"26\": \"Iron\",\r\n    \"27\": \"Jackson\",\r\n    \"28\": \"Jefferson\",\r\n    \"29\": \"Juneau\",\r\n    \"30\": \"Kenosha\",\r\n    \"31\": \"Kewaunee\",\r\n    \"32\": \"La Crosse\",\r\n    \"33\": \"Lafayette\",\r\n    \"34\": \"Langlade\",\r\n    \"35\": \"Lincoln\",\r\n    \"36\": \"Manitowoc\",\r\n    \"37\": \"Marathon\",\r\n    \"38\": \"Marinette\",\r\n    \"39\": \"Marquette\",\r\n    \"40\": \"Milwaukee\",\r\n    \"41\": \"Monroe\",\r\n    \"42\": \"Oconto\",\r\n    \"43\": \"Oneida\",\r\n    \"44\": \"Outagamie\",\r\n    \"45\": \"Ozaukee\",\r\n    \"46\": \"Pepin\",\r\n    \"47\": \"Pierce\",\r\n    \"48\": \"Polk\",\r\n    \"49\": \"Portage\",\r\n    \"50\": \"Price\",\r\n    \"51\": \"Racine\",\r\n    \"52\": \"Richland\",\r\n    \"53\": \"Rock\",\r\n    \"54\": \"Rusk\",\r\n    \"55\": \"Saint Croix\",\r\n    \"56\": \"Sauk\",\r\n    \"57\": \"Sawyer\",\r\n    \"58\": \"Shawano\",\r\n    \"59\": \"Sheboygan\",\r\n    \"60\": \"Taylor\",\r\n    \"61\": \"Trempealeau\",\r\n    \"62\": \"Vernon\",\r\n    \"63\": \"Vilas\",\r\n    \"64\": \"Walworth\",\r\n    \"65\": \"Washburn\",\r\n    \"66\": \"Washington\",\r\n    \"67\": \"Waukesha\",\r\n    \"68\": \"Waupaca\",\r\n    \"69\": \"Waushara\",\r\n    \"70\": \"Winnebago\",\r\n    \"71\": \"Wood\",\r\n    \"73\": \"Menominee\"\r\n};\r\n\r\nnm.countyLookup = countyLookup;\r\n\r\n/**\r\n * \r\n * @param {string|number} countyId\r\n * @returns {string}\r\n */\r\nexport function getCountyById(countyId){\r\n    \"use strict\";\r\n    \r\n    if (typeof countyId == 'number'){\r\n        countyId = countyId.toFixed();\r\n    }\r\n    \r\n    return countyLookup[countyId];\r\n}\r\n\r\nnm.getCountyById = getCountyById;\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/countyLookup.ts","/**\r\n * Created by gavorhes on 5/13/2016.\r\n */\r\n\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nimport SortedFeatures from 'webmapsjs/dist/olHelpers/SortedFeatures';\r\nimport LayerBaseVectorGeoJson from 'webmapsjs/dist/layers/LayerBaseVectorGeoJson';\r\nimport mapPopup from 'webmapsjs/dist/olHelpers/mapPopup';\r\nimport SelectBoxBase from 'webmapsjs/dist/domUtil/SelectBoxBase';\r\nimport Ajx from '../ajaxGetters';\r\nimport * as layerStyles from '../layerStyles';\r\nimport {zoomToResolution} from 'webmapsjs/dist/olHelpers/zoomResolutionConvert';\r\nimport {proj3857} from 'webmapsjs/dist/olHelpers/projections';\r\n\r\nimport PickerCollection from \"../collections/PickerCollection\";\r\nimport $ = require('jquery');\r\nimport ol = require('custom-ol');\r\n\r\nconst nm = provide('ssa.select');\r\n\r\n\r\nexport class SegmentPicker extends SelectBoxBase {\r\n    _isFrom: boolean;\r\n    _selectedPdpId: number;\r\n    _sortedFeatures: SortedFeatures;\r\n    _segmentLayer: LayerBaseVectorGeoJson;\r\n    _segNodeLayer: LayerBaseVectorGeoJson;\r\n    _segmentSelectionLayer: LayerBaseVectorGeoJson;\r\n    _selectBtnClass: string;\r\n    _selectBtnClassTo: string;\r\n    _pickerColl: PickerCollection;\r\n    _enabled: boolean;\r\n    _layersVisible: boolean;\r\n\r\n    /**\r\n     *\r\n     * @param {PickerCollection} pickerColl - picker collection\r\n     * @param {boolean} isFrom - is this the start (from) picker\r\n     */\r\n    constructor(pickerColl, isFrom) {\r\n\r\n\r\n        function contentGen(guid) {\r\n            let outString = '';\r\n            outString += `<div style=\"position: relative;\" class=\"select-picker-map-container\">`;\r\n            outString += `<select id=\"${guid}\"></select>`;\r\n            outString += `</div>`;\r\n\r\n            return outString;\r\n        }\r\n\r\n        super(pickerColl.$innerContainer, isFrom ? 'Ref. Point #1' : 'Ref. Point #2', contentGen);\r\n        this._isFrom = isFrom;\r\n        this._pickerColl = pickerColl;\r\n\r\n        /**\r\n         *\r\n         * @type {number|undefined}\r\n         * @private\r\n         */\r\n        this._selectedPdpId = undefined;\r\n\r\n        this.addChangeListener((v) => {\r\n            this.selectedPdpId = parseInt(v);\r\n        });\r\n\r\n        this._box.keyup(() => {\r\n            if (this.selectedPdpId != parseInt(this.selectedValue.toString())) {\r\n                this._box.trigger('change');\r\n            }\r\n        });\r\n\r\n        /**\r\n         *\r\n         * @type {SortedFeatures|undefined}\r\n         * @private\r\n         */\r\n        this._sortedFeatures = undefined;\r\n\r\n        /**\r\n         *\r\n         * @type {LayerBaseVectorGeoJson}\r\n         * @protected\r\n         */\r\n        this._segmentLayer = new LayerBaseVectorGeoJson('',\r\n            {\r\n                minZoom: 6,\r\n                name: this._isFrom ? 'Start Segment' : 'End Segment',\r\n                transform: {dataProjection: proj3857, featureProjection: proj3857},\r\n                style: layerStyles.segmentLayer,\r\n                visible: false\r\n            }\r\n        );\r\n\r\n        this._segNodeLayer = new LayerBaseVectorGeoJson('', {\r\n            style: layerStyles.segNodeStyle,\r\n            minZoom: 11,\r\n            visible: false\r\n        });\r\n\r\n\r\n        /**\r\n         *\r\n         * @type {LayerBaseVectorGeoJson}\r\n         * @private\r\n         */\r\n        this._segmentSelectionLayer = new LayerBaseVectorGeoJson('', {\r\n            style: new ol.style.Style({\r\n                stroke: new ol.style.Stroke(\r\n                    {\r\n                        color: this._isFrom ? layerStyles.fromSelectionColor : layerStyles.toSelectionColor,\r\n                        width: 8\r\n                    }\r\n                )\r\n            }),\r\n            minZoom: 6,\r\n            visible: false,\r\n            zIndex: this._isFrom ? 100 : 101\r\n        });\r\n\r\n        this._selectBtnClass = this._isFrom ? \"select-seg-btn-from\" : \"select-seg-btn-to\";\r\n        this._selectBtnClassTo = 'select-seg-btn-to';\r\n\r\n        mapPopup.addVectorPopup(this._segmentLayer, (props) => {\r\n            console.log(props);\r\n\r\n            let returnHtml = '<table class=\"mm-popup-table\">';\r\n            returnHtml += `<tr><td>PdpId</td><td>${props['pdpId']}</td>;`;\r\n            returnHtml += `<td rowspan=\"5\">`;\r\n            if (this._pickerColl.startEndCountySame) {\r\n                returnHtml += `<input type=\"button\" id='${props['pdpId']}' class=\"${this._selectBtnClass}\" value=\"Select Start\"/>`;\r\n                returnHtml += `<input type=\"button\" id='${props['pdpId']}' class=\"${this._selectBtnClassTo}\" value=\"Select End\"/>`;\r\n            } else {\r\n                returnHtml += `<input type=\"button\" id='${props['pdpId']}' class=\"${this._selectBtnClass}\" value=\"Select\"/>`;\r\n            }\r\n            returnHtml += `</td></tr>`;\r\n            returnHtml += `<tr><td>Hwy</td><td>${props['stdName']}</td></tr>`;\r\n            returnHtml += `<tr><td>DivUnd</td><td>${props['divUnd']}</td></tr>`;\r\n            returnHtml += `<tr><td>From</td><td>${props['startRp']}</td></tr>`;\r\n            returnHtml += `<tr><td>To</td><td>${props['endRp']}</td></tr>`;\r\n            returnHtml += '</table>';\r\n\r\n            return returnHtml;\r\n        });\r\n\r\n\r\n        // add the popup change function to find the select button\r\n        mapPopup.addPopupChangedFunction(() => {\r\n            let selectButton = $(`.${this._selectBtnClass}`);\r\n            if (selectButton.length > 0) {\r\n                let __this = this;\r\n                selectButton.click(function () {\r\n                    __this.selectedPdpId = this['id'];\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n        this._enabled = false;\r\n        this._layersVisible = false;\r\n\r\n        this._box.click((evt) => {\r\n            evt.stopPropagation();\r\n        });\r\n\r\n        this._box.parent('div').click(() => {\r\n            if (this._sortedFeatures == null){\r\n                return;\r\n            }\r\n\r\n            let selectedFeature = this._sortedFeatures.getFeature(this.selectedPdpId) as ol.Feature;\r\n\r\n            if (selectedFeature == null){\r\n                return;\r\n            }\r\n\r\n            mapPopup.map.getView().fit(selectedFeature.getGeometry().getExtent(), mapPopup.map.getSize());\r\n            mapPopup.map.getView().setZoom(mapPopup.map.getView().getZoom() - 2);\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * @param {Array<object>} arr - array of returned objects, implementation defined in derived classes\r\n     */\r\n    _processAjaxResult(arr) {\r\n\r\n        arr.sort((a, b) => {\r\n            let c = this._isFrom ? a['properties']['startRp'] : a['properties']['endRp'];\r\n            let d = this._isFrom ? b['properties']['startRp'] : b['properties']['endRp'];\r\n\r\n            if (c == d) {\r\n                return 0;\r\n            }\r\n\r\n            return c < d ? -1 : 1;\r\n        });\r\n\r\n        for (let feat of arr) {\r\n            let props = feat['properties'];\r\n            if (this._isFrom) {\r\n                this._box.append(`<option value=\"${props['pdpId']}\">${props['startRp']}</option>`);\r\n\r\n            } else {\r\n                this._box.append(`<option value=\"${props['pdpId']}\">${props['endRp']}</option>`);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {string|number} county - county id as string or number\r\n     * @param {string|number|null} rteId - routeId\r\n     * @param {number|undefined} [pdpId=undefined] - the pdp id to be set on load\r\n     */\r\n    setCountyAndRoute(county: string|number, rteId: string|number, pdpId?: number) {\r\n        pdpId = typeof pdpId == 'number' ? pdpId : undefined;\r\n\r\n        this.selectedPdpId = undefined;\r\n        this._box.html('');\r\n        this._box.addClass('refresh').removeClass('refresh');\r\n\r\n        if (mapPopup) {\r\n            mapPopup.closePopup();\r\n        }\r\n\r\n        if (typeof county == 'string') {\r\n            county = parseInt(county as string);\r\n        }\r\n\r\n        if (rteId == null) {\r\n            this.enabled = false;\r\n\r\n            return;\r\n        }\r\n\r\n        if (typeof rteId == 'string') {\r\n            rteId = parseInt(rteId as string);\r\n        }\r\n\r\n        Ajx.getSegments(county as number, rteId, (d) => {\r\n                this._segmentLayer.clear();\r\n                this._segNodeLayer.clear();\r\n                this._processAjaxResult(d['features']);\r\n\r\n                if (d['features'].length > 0) {\r\n                    this.enabled = true;\r\n                    this._segmentLayer.addFeatures(d);\r\n                    let feats = this._segmentLayer.source.getFeatures();\r\n                    this._sortedFeatures = new SortedFeatures(feats, 'pdpId');\r\n                    this._setExtent();\r\n\r\n                    if (typeof pdpId == 'number') {\r\n                        // this._box.val(pdpId.toFixed());\r\n                        this.selectedPdpId = pdpId;\r\n                    } else {\r\n                        this._box.trigger('change');\r\n                    }\r\n\r\n                    for (let i = 0; i < feats.length; i++) {\r\n                        let coords = feats[i].getGeometry()['getCoordinates']();\r\n                        if (coords.length > 0) {\r\n                            let startPoint = new ol.geom.Point(coords[0]);\r\n                            let endPoint = new ol.geom.Point(coords[coords.length - 1]);\r\n                            this._segNodeLayer.source.addFeature(new ol.Feature(startPoint));\r\n                            this._segNodeLayer.source.addFeature(new ol.Feature(endPoint));\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.enabled = false;\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    _setExtent() {\r\n\r\n    }\r\n\r\n    /**\r\n     * @returns {boolean} if enabled\r\n     */\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {boolean} isEnabled - is enabled\r\n     * @private\r\n     */\r\n    set enabled(isEnabled) {\r\n        this._enabled = isEnabled;\r\n        this._box.prop('disabled', !isEnabled);\r\n    }\r\n\r\n    get layersVisible() {\r\n        return this._layersVisible;\r\n    }\r\n\r\n    set layersVisible(lyrsVisible) {\r\n        this._layersVisible = lyrsVisible;\r\n        if (this._isFrom) {\r\n            this.segmentLayer.visible = this.layersVisible;\r\n            this._segNodeLayer.visible = this.layersVisible;\r\n        } else {\r\n            this.segmentLayer.visible = this.layersVisible && !this._pickerColl.startEndCountySame;\r\n            this._segNodeLayer.visible = this.layersVisible && !this._pickerColl.startEndCountySame;\r\n        }\r\n\r\n        this.selectionLayer.visible = this.layersVisible;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number|undefined} selected id\r\n     */\r\n    get selectedPdpId() {\r\n        return this._selectedPdpId;\r\n    }\r\n\r\n    /**\r\n     * set the currently selected pdp id\r\n     * @param {number|undefined} newId - new selected id\r\n     */\r\n    set selectedPdpId(newId) {\r\n        if (mapPopup) {\r\n            mapPopup.closePopup();\r\n        }\r\n\r\n        if (typeof newId == 'string') {\r\n            newId = parseInt(newId);\r\n        }\r\n\r\n        if (newId == this._selectedPdpId) {\r\n            return;\r\n        }\r\n\r\n        this._selectedPdpId = newId;\r\n        this.selectionLayer.source.clear();\r\n\r\n        if (this._selectedPdpId != undefined) {\r\n            this._box.val(this.selectedPdpId);\r\n            let selectedFeature = this._sortedFeatures.getFeature(this.selectedPdpId);\r\n\r\n            this.selectionLayer.source.addFeature(selectedFeature);\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this._box.html('');\r\n        this.selectedPdpId = undefined;\r\n    }\r\n\r\n    /**\r\n     * get the segment layer with the mm segments in the county and route id\r\n     * @returns {LayerBaseVectorGeoJson} - the segment layer\r\n     */\r\n    get segmentLayer() {\r\n        return this._segmentLayer;\r\n    }\r\n\r\n    /**\r\n     * get the selection hayer\r\n     * @returns {LayerBaseVectorGeoJson} the selection layer for this picker\r\n     */\r\n    get selectionLayer() {\r\n        return this._segmentSelectionLayer;\r\n    }\r\n}\r\n\r\nnm.SegmentPicker = SegmentPicker;\r\nexport default SegmentPicker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/selectBox/SegmentPicker.ts","/**\r\n * Created by gavorhes on 6/14/2016.\r\n */\r\n\r\n\r\nimport SelectBoxBase from 'webmapsjs/dist/domUtil/SelectBoxBase';\r\nimport Ajx from '../ajaxGetters';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nconst nm = provide('ssa.select');\r\n\r\nexport class SelectCounty extends SelectBoxBase{\r\n\r\n    /**\r\n     *\r\n     * @param {jQuery} parent\r\n     * @param {string} labelContent\r\n     */\r\n    constructor(parent, labelContent) {\r\n        super(parent, labelContent);\r\n\r\n        Ajx.getAllCounties((d) => {\r\n            for (let c of d) {\r\n                this.box.append(`<option value=\"${c['id']}\" ${c['primary'] ? 'selected' : ''}>${c['name']}</option>`)\r\n            }\r\n            this.box.trigger('change');\r\n        });\r\n    }\r\n}\r\n\r\nnm.SelectStartCounty = SelectCounty;\r\nexport default SelectCounty;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/selectBox/SelectCounty.ts","/**\r\n * Created by gavorhes on 5/12/2016.\r\n */\r\n\r\nimport SelectBoxBase from 'webmapsjs/dist/domUtil/SelectBoxBase';\r\nimport Ajx from '../ajaxGetters';\r\nimport provide from 'webmapsjs/dist/util/provide';\r\nconst nm = provide('ssa.select');\r\n\r\nexport class SelectHighway extends SelectBoxBase {\r\n\r\n    /**\r\n     *\r\n     * @param {jQuery} parent - parent element\r\n     */\r\n    constructor(parent) {\r\n        super(parent, \"Highway\");\r\n    }\r\n\r\n    // /**\r\n    //  *\r\n    //  * @param {number} countyId - county id\r\n    //  * @param {string|undefined} [hwy=undefined] - route id for initial selection\r\n    //  */\r\n    // setStartCounty(countyId, hwy) {\r\n    //     hwy = typeof hwy == 'string' ? hwy : undefined;\r\n    //     this.box.html('');\r\n    //     this.box.addClass('refresh').removeClass('refresh');\r\n    //\r\n    //     Ajx.getHighways(countyId, (d) => {\r\n    //         \"use strict\";\r\n    //\r\n    //         for (let h of d) {\r\n    //             this.box.append(`<option>${h['name']}</option>`);\r\n    //         }\r\n    //         if (d) {\r\n    //             if (hwy) {\r\n    //                 this.box.val(hwy);\r\n    //             } else {\r\n    //                 this.box.trigger('change');\r\n    //\r\n    //             }\r\n    //         }\r\n    //     });\r\n    // }\r\n\r\n    /**\r\n     *\r\n     * @param {number|string|null} startId - start county id\r\n     * @param {number|string|null} endId - end county id\r\n     * @param {number|string|null} [routeId=undefined] - route id for selection\r\n     * @param {boolean} [forceTrigger=false] - force change trigger to populate the rp pickers\r\n     */\r\n    setStartEndCounty(startId: number|string, endId: number|string, routeId?: number|string, forceTrigger = false) {\r\n\r\n        forceTrigger = typeof forceTrigger == 'boolean' ? forceTrigger : false;\r\n\r\n        if (startId == null || startId == undefined || endId == null) {\r\n            return;\r\n        }\r\n\r\n        if (typeof routeId == 'number'){\r\n            routeId = (routeId as number).toFixed();\r\n        }\r\n        \r\n        this.box.html('');\r\n        this.box.addClass('refresh').removeClass('refresh');\r\n\r\n        if (typeof startId == 'string') {\r\n            startId = parseInt(startId as string);\r\n        }\r\n\r\n        if (typeof endId == 'string') {\r\n            endId = parseInt(endId as string);\r\n        }\r\n\r\n        if (typeof routeId == 'string') {\r\n            routeId = parseInt(routeId as string);\r\n        }\r\n\r\n        Ajx.getHwyByStartEndCounty(startId as number, endId as number, (d) => {\r\n            if (d.length > 0) {\r\n\r\n                d.sort((a, b) => {\r\n                    let aName = a['name'];\r\n                    let bName = b['name'];\r\n\r\n                    if (aName == bName) {\r\n                        return 0;\r\n                    } else {\r\n                        return aName > bName ? 1 : -1;\r\n                    }\r\n                });\r\n                \r\n                for (let c of d) {\r\n                    this.box.append(`<option value=\"${c['id']}\" ${c['primary'] ? 'selected' : ''}>${c['name']}</option>`);\r\n                }\r\n\r\n                if (routeId) {\r\n                    this.box.val((routeId as number).toFixed());\r\n                }\r\n\r\n                if (!routeId || forceTrigger) {\r\n                    this.box.trigger('change');\r\n                }\r\n\r\n                this.box.prop('disabled', false);\r\n            } else {\r\n                this.box.prop('disabled', true);\r\n                this.box.trigger('change');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nnm.SelectHighway = SelectHighway;\r\nexport default SelectHighway;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/selectBox/SelectHighway.ts","/**\r\n * Created by gavorhes on 10/4/2016.\r\n */\r\nimport {SsaMapCreate} from './SsaMapCreate';\r\nimport {SsaMapView} from './SsaMapView';\r\n\r\ndeclare const glob;\r\n\r\nwindow['SsaMapCreate'] = SsaMapCreate;\r\nwindow['SsaMapView'] = SsaMapView;\r\n\r\ntry {\r\n    glob['SsaMapCreate'] = SsaMapCreate;\r\n    glob['SsaMapView'] = SsaMapView;\r\n}\r\ncatch (ex) {\r\n    let glob = {};\r\n    glob['SsaMapCreate'] = SsaMapCreate;\r\n    glob['SsaMapView'] = SsaMapView;\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/ssaApps.ts"],"sourceRoot":""}